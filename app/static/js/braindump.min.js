(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";module.exports={debounce:function debounce(fn,delay){var timer=null;return function(){var context=this,args=arguments;clearTimeout(timer);timer=setTimeout(function(){fn.apply(context,args)},delay)}}}},{}],2:[function(require,module,exports){"use strict";var moment=require("moment");var self=module.exports={initDates:function initDates(){self.setUpdatedDates();self.setCreatedDates()},setUpdatedDates:function setUpdatedDates(){var dateField=$(".note-updated-date");dateField.each(function(){var updatedDate=this.getAttribute("value");this.innerHTML="Updated at: "+moment(updatedDate).format("MMMM DD, YYYY h:mm a")});var dateListField=$(".note-updated-date-list");dateListField.each(function(){var updatedDate=this.getAttribute("value");this.innerHTML=moment(updatedDate).fromNow()})},setCreatedDates:function setCreatedDates(){var dateField=$(".note-created-date");dateField.each(function(){var createdDate=this.getAttribute("value");this.innerHTML="Created on: "+moment(createdDate).format("MMMM DD, YYYY")})}}},{moment:83}],3:[function(require,module,exports){"use strict";var _edit=require("prosemirror/dist/edit");require("prosemirror/dist/menu/tooltipmenu");require("prosemirror/dist/menu/menubar");require("prosemirror/dist/markdown");var debounce=require("./../lib/debounce");var self=module.exports={initEditor:function initEditor(){var place=$(".editor");place.each(function(){self.createEditor(this,this.getAttribute("note_id"))});self.setActive()},createEditor:function createEditor(place,noteId){var input="";if(typeof place.children[0]!=="undefined"){var input=place.children[0].value}var noteBody=$('input[id="body"]');var pm=window.pm=new _edit.ProseMirror({place:place,doc:input,docFormat:"markdown"});self.setMenuStyle(place.getAttribute("menustyle")||"bar");var menuStyle=document.querySelector("#menustyle");if(menuStyle)menuStyle.addEventListener("change",function(){return setMenuStyle(menuStyle.value)});pm.on("change",debounce.debounce(function(event){noteBody.val(pm.getContent("markdown"));self.saveNote(noteId,noteBody.val())},500))},setMenuStyle:function setMenuStyle(type){if(type=="bar"){pm.setOption("menuBar",{"float":true});pm.setOption("tooltipMenu",false)}else{pm.setOption("menuBar",false);pm.setOption("tooltipMenu",{selectedBlockMenu:true})}},saveNote:function saveNote(id,content){var csrftoken=$("meta[name=csrf-token]").attr("content");$.ajax({beforeSend:function beforeSend(xhr){xhr.setRequestHeader("X-CSRFToken",csrftoken)},url:"/edit/"+id,data:JSON.stringify({body:content}),contentType:"application/json",type:"PUT",success:function success(response){console.log(response)},error:function error(_error){console.error(_error)}})},setActive:function setActive(){var tabs=document.getElementsByClassName("note-content");var editors=document.getElementsByClassName("tab-pane");if(tabs.length){tabs[0].className+=" active";editors[0].className+=" active"}}}},{"./../lib/debounce":1,"prosemirror/dist/edit":92,"prosemirror/dist/markdown":103,"prosemirror/dist/menu/menubar":107,"prosemirror/dist/menu/tooltipmenu":108}],4:[function(require,module,exports){"use strict";var _jquery=require("jquery");var _jquery2=_interopRequireDefault(_jquery);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}window.$=_jquery2.default;window.jQuery=_jquery2.default;require("bootstrap");require("bootstrap-tagsinput");require("bootstrap-tabcollapse");var editor=require("./braindump.editor");var notebooks=require("./braindump.notebooks");var dates=require("./Dates");editor.initEditor();notebooks.init();dates.initDates();(0,_jquery2.default)("#noteTabs").tabCollapse()},{"./Dates":2,"./braindump.editor":3,"./braindump.notebooks":5,bootstrap:8,"bootstrap-tabcollapse":6,"bootstrap-tagsinput":7,jquery:23}],5:[function(require,module,exports){"use strict";var self=module.exports={init:function init(){var notebooks=$(".notebook-card");notebooks.each(function(){var notebook=self.getNotebook(this);var deleteButton=$(this).find(".delete-notebook");deleteButton.on("click",notebook,self.deleteNotebook)})},getNotebook:function getNotebook(e){var notebookId=e.getAttribute("notebook_id");var noteCountString=$(e).find("span").text();var noteCount=noteCountString.match(/\d+/)[0];var notebook={self:e,id:notebookId,noteCount:noteCount};return notebook},deleteNotebook:function deleteNotebook(e){$.ajax({url:"/notebook/"+e.data.id,contentType:"application/json",type:"DELETE",success:function success(response){e.data.self.remove();console.log(response)},error:function error(_error){console.log(_error)}})}}},{}],6:[function(require,module,exports){!function($){"use strict";var TabCollapse=function(el,options){this.options=options;this.$tabs=$(el);this._accordionVisible=false;this._initAccordion();this._checkStateOnResize();var that=this;setTimeout(function(){that.checkState()},0)};TabCollapse.DEFAULTS={accordionClass:"visible-xs",tabsClass:"hidden-xs",accordionTemplate:function(heading,groupId,parentId,active){return'<div class="panel panel-default">'+'   <div class="panel-heading">'+'      <h4 class="panel-title">'+"      </h4>"+"   </div>"+'   <div id="'+groupId+'" class="panel-collapse collapse '+(active?"in":"")+'">'+'       <div class="panel-body js-tabcollapse-panel-body">'+"       </div>"+"   </div>"+"</div>"}};TabCollapse.prototype.checkState=function(){if(this.$tabs.is(":visible")&&this._accordionVisible){this.showTabs();this._accordionVisible=false}else if(this.$accordion.is(":visible")&&!this._accordionVisible){this.showAccordion();this._accordionVisible=true}};TabCollapse.prototype.showTabs=function(){var view=this;this.$tabs.trigger($.Event("show-tabs.bs.tabcollapse"));var $panelHeadings=this.$accordion.find(".js-tabcollapse-panel-heading").detach();$panelHeadings.each(function(){var $panelHeading=$(this),$parentLi=$panelHeading.data("bs.tabcollapse.parentLi");var $oldHeading=view._panelHeadingToTabHeading($panelHeading);$parentLi.removeClass("active");if($parentLi.parent().hasClass("dropdown-menu")&&!$parentLi.siblings("li").hasClass("active")){$parentLi.parent().parent().removeClass("active")}if(!$oldHeading.hasClass("collapsed")){$parentLi.addClass("active");if($parentLi.parent().hasClass("dropdown-menu")){$parentLi.parent().parent().addClass("active")}}else{$oldHeading.removeClass("collapsed")}$parentLi.append($panelHeading)});if(!$("li").hasClass("active")){$("li").first().addClass("active")}var $panelBodies=this.$accordion.find(".js-tabcollapse-panel-body");$panelBodies.each(function(){var $panelBody=$(this),$tabPane=$panelBody.data("bs.tabcollapse.tabpane");$tabPane.append($panelBody.contents().detach())});this.$accordion.html("");if(this.options.updateLinks){var $tabContents=this.getTabContentElement();$tabContents.find('[data-toggle-was="tab"], [data-toggle-was="pill"]').each(function(){var $el=$(this);var href=$el.attr("href").replace(/-collapse$/g,"");$el.attr({"data-toggle":$el.attr("data-toggle-was"),"data-toggle-was":"","data-parent":"",href:href})})}this.$tabs.trigger($.Event("shown-tabs.bs.tabcollapse"))};TabCollapse.prototype.getTabContentElement=function(){var $tabContents=$(this.options.tabContentSelector);if($tabContents.length===0){$tabContents=this.$tabs.siblings(".tab-content")}return $tabContents};TabCollapse.prototype.showAccordion=function(){this.$tabs.trigger($.Event("show-accordion.bs.tabcollapse"));var $headings=this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]'),view=this;$headings.each(function(){var $heading=$(this),$parentLi=$heading.parent();$heading.data("bs.tabcollapse.parentLi",$parentLi);view.$accordion.append(view._createAccordionGroup(view.$accordion.attr("id"),$heading.detach()))});if(this.options.updateLinks){var parentId=this.$accordion.attr("id");var $selector=this.$accordion.find(".js-tabcollapse-panel-body");$selector.find('[data-toggle="tab"], [data-toggle="pill"]').each(function(){var $el=$(this);var href=$el.attr("href")+"-collapse";$el.attr({"data-toggle-was":$el.attr("data-toggle"),"data-toggle":"collapse","data-parent":"#"+parentId,href:href})})}this.$tabs.trigger($.Event("shown-accordion.bs.tabcollapse"))};TabCollapse.prototype._panelHeadingToTabHeading=function($heading){var href=$heading.attr("href").replace(/-collapse$/g,"");$heading.attr({"data-toggle":"tab",href:href,"data-parent":""});return $heading};TabCollapse.prototype._tabHeadingToPanelHeading=function($heading,groupId,parentId,active){$heading.addClass("js-tabcollapse-panel-heading "+(active?"":"collapsed"));$heading.attr({"data-toggle":"collapse","data-parent":"#"+parentId,href:"#"+groupId});return $heading};TabCollapse.prototype._checkStateOnResize=function(){var view=this;$(window).resize(function(){clearTimeout(view._resizeTimeout);view._resizeTimeout=setTimeout(function(){view.checkState()},100)})};TabCollapse.prototype._initAccordion=function(){var randomString=function(){var result="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<5;i++){result+=possible.charAt(Math.floor(Math.random()*possible.length))}return result};var srcId=this.$tabs.attr("id"),accordionId=(srcId?srcId:randomString())+"-accordion";this.$accordion=$('<div class="panel-group '+this.options.accordionClass+'" id="'+accordionId+'"></div>');this.$tabs.after(this.$accordion);this.$tabs.addClass(this.options.tabsClass);this.getTabContentElement().addClass(this.options.tabsClass)};TabCollapse.prototype._createAccordionGroup=function(parentId,$heading){var tabSelector=$heading.attr("data-target"),active=$heading.data("bs.tabcollapse.parentLi").is(".active");if(!tabSelector){tabSelector=$heading.attr("href");tabSelector=tabSelector&&tabSelector.replace(/.*(?=#[^\s]*$)/,"")}var $tabPane=$(tabSelector),groupId=$tabPane.attr("id")+"-collapse",$panel=$(this.options.accordionTemplate($heading,groupId,parentId,active));$panel.find(".panel-heading > .panel-title").append(this._tabHeadingToPanelHeading($heading,groupId,parentId,active));$panel.find(".panel-body").append($tabPane.contents().detach()).data("bs.tabcollapse.tabpane",$tabPane);return $panel};$.fn.tabCollapse=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tabcollapse");var options=$.extend({},TabCollapse.DEFAULTS,$this.data(),typeof option==="object"&&option);if(!data)$this.data("bs.tabcollapse",new TabCollapse(this,options))})};$.fn.tabCollapse.Constructor=TabCollapse}(window.jQuery)},{}],7:[function(require,module,exports){(function($){"use strict";var defaultOptions={tagClass:function(item){return"label label-info"},itemValue:function(item){return item?item.toString():item},itemText:function(item){return this.itemValue(item)},itemTitle:function(item){return null},freeInput:true,addOnBlur:true,maxTags:undefined,maxChars:undefined,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:false,onTagExists:function(item,$tag){$tag.hide().fadeIn()},trimValue:false,allowDuplicates:false};function TagsInput(element,options){this.isInit=true;this.itemsArray=[];this.$element=$(element);this.$element.hide();this.isSelect=element.tagName==="SELECT";this.multiple=this.isSelect&&element.hasAttribute("multiple");this.objectItems=options&&options.itemValue;this.placeholderText=element.hasAttribute("placeholder")?this.$element.attr("placeholder"):"";this.inputSize=Math.max(1,this.placeholderText.length);this.$container=$('<div class="bootstrap-tagsinput"></div>');this.$input=$('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container);this.$element.before(this.$container);this.build(options);this.isInit=false}TagsInput.prototype={constructor:TagsInput,add:function(item,dontPushVal,options){var self=this;if(self.options.maxTags&&self.itemsArray.length>=self.options.maxTags)return;if(item!==false&&!item)return;if(typeof item==="string"&&self.options.trimValue){item=$.trim(item)}if(typeof item==="object"&&!self.objectItems)throw"Can't add objects when itemValue option is not set";if(item.toString().match(/^\s*$/))return;if(self.isSelect&&!self.multiple&&self.itemsArray.length>0)self.remove(self.itemsArray[0]);if(typeof item==="string"&&this.$element[0].tagName==="INPUT"){var delimiter=self.options.delimiterRegex?self.options.delimiterRegex:self.options.delimiter;var items=item.split(delimiter);if(items.length>1){for(var i=0;i<items.length;i++){this.add(items[i],true)}if(!dontPushVal)self.pushVal();return}}var itemValue=self.options.itemValue(item),itemText=self.options.itemText(item),tagClass=self.options.tagClass(item),itemTitle=self.options.itemTitle(item);var existing=$.grep(self.itemsArray,function(item){return self.options.itemValue(item)===itemValue})[0];if(existing&&!self.options.allowDuplicates){if(self.options.onTagExists){var $existingTag=$(".tag",self.$container).filter(function(){return $(this).data("item")===existing});self.options.onTagExists(item,$existingTag)}return}if(self.items().toString().length+item.length+1>self.options.maxInputLength)return;var beforeItemAddEvent=$.Event("beforeItemAdd",{item:item,cancel:false,options:options});self.$element.trigger(beforeItemAddEvent);if(beforeItemAddEvent.cancel)return;self.itemsArray.push(item);var $tag=$('<span class="tag '+htmlEncode(tagClass)+(itemTitle!==null?'" title="'+itemTitle:"")+'">'+htmlEncode(itemText)+'<span data-role="remove"></span></span>');$tag.data("item",item);self.findInputWrapper().before($tag);$tag.after(" ");var optionExists=$('option[value="'+encodeURIComponent(itemValue)+'"]',self.$element).length||$('option[value="'+htmlEncode(itemValue)+'"]',self.$element).length;if(self.isSelect&&!optionExists){var $option=$("<option selected>"+htmlEncode(itemText)+"</option>");$option.data("item",item);$option.attr("value",itemValue);self.$element.append($option)}if(!dontPushVal)self.pushVal();if(self.options.maxTags===self.itemsArray.length||self.items().toString().length===self.options.maxInputLength)self.$container.addClass("bootstrap-tagsinput-max");if($(".typeahead, .twitter-typeahead",self.$container).length){self.$input.typeahead("val","")}if(this.isInit){self.$element.trigger($.Event("itemAddedOnInit",{item:item,options:options}))}else{self.$element.trigger($.Event("itemAdded",{item:item,options:options}))}},remove:function(item,dontPushVal,options){var self=this;if(self.objectItems){if(typeof item==="object")item=$.grep(self.itemsArray,function(other){return self.options.itemValue(other)==self.options.itemValue(item)});else item=$.grep(self.itemsArray,function(other){return self.options.itemValue(other)==item});item=item[item.length-1]}if(item){var beforeItemRemoveEvent=$.Event("beforeItemRemove",{item:item,cancel:false,options:options});self.$element.trigger(beforeItemRemoveEvent);if(beforeItemRemoveEvent.cancel)return;$(".tag",self.$container).filter(function(){return $(this).data("item")===item}).remove();$("option",self.$element).filter(function(){return $(this).data("item")===item}).remove();if($.inArray(item,self.itemsArray)!==-1)self.itemsArray.splice($.inArray(item,self.itemsArray),1)}if(!dontPushVal)self.pushVal();if(self.options.maxTags>self.itemsArray.length)self.$container.removeClass("bootstrap-tagsinput-max");self.$element.trigger($.Event("itemRemoved",{item:item,options:options}))},removeAll:function(){var self=this;$(".tag",self.$container).remove();$("option",self.$element).remove();while(self.itemsArray.length>0)self.itemsArray.pop();self.pushVal()},refresh:function(){var self=this;$(".tag",self.$container).each(function(){var $tag=$(this),item=$tag.data("item"),itemValue=self.options.itemValue(item),itemText=self.options.itemText(item),tagClass=self.options.tagClass(item);$tag.attr("class",null);$tag.addClass("tag "+htmlEncode(tagClass));$tag.contents().filter(function(){return this.nodeType==3})[0].nodeValue=htmlEncode(itemText);if(self.isSelect){var option=$("option",self.$element).filter(function(){return $(this).data("item")===item});option.attr("value",itemValue)}})},items:function(){return this.itemsArray},pushVal:function(){var self=this,val=$.map(self.items(),function(item){return self.options.itemValue(item).toString()});self.$element.val(val,true).trigger("change")},build:function(options){var self=this;self.options=$.extend({},defaultOptions,options);if(self.objectItems)self.options.freeInput=false;makeOptionItemFunction(self.options,"itemValue");makeOptionItemFunction(self.options,"itemText");makeOptionFunction(self.options,"tagClass");if(self.options.typeahead){var typeahead=self.options.typeahead||{};makeOptionFunction(typeahead,"source");self.$input.typeahead($.extend({},typeahead,{source:function(query,process){function processItems(items){var texts=[];for(var i=0;i<items.length;i++){var text=self.options.itemText(items[i]);map[text]=items[i];texts.push(text)}process(texts)}this.map={};var map=this.map,data=typeahead.source(query);if($.isFunction(data.success)){data.success(processItems)}else if($.isFunction(data.then)){data.then(processItems)}else{$.when(data).then(processItems)}},updater:function(text){self.add(this.map[text]);return this.map[text]},matcher:function(text){return text.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(texts){return texts.sort()},highlighter:function(text){var regex=new RegExp("("+this.query+")","gi");return text.replace(regex,"<strong>$1</strong>")}}))}if(self.options.typeaheadjs){var typeaheadConfig=null;var typeaheadDatasets={};var typeaheadjs=self.options.typeaheadjs;if($.isArray(typeaheadjs)){typeaheadConfig=typeaheadjs[0];typeaheadDatasets=typeaheadjs[1]}else{typeaheadDatasets=typeaheadjs}self.$input.typeahead(typeaheadConfig,typeaheadDatasets).on("typeahead:selected",$.proxy(function(obj,datum){if(typeaheadDatasets.valueKey)self.add(datum[typeaheadDatasets.valueKey]);else self.add(datum);self.$input.typeahead("val","")},self))}self.$container.on("click",$.proxy(function(event){if(!self.$element.attr("disabled")){self.$input.removeAttr("disabled")}self.$input.focus()},self));if(self.options.addOnBlur&&self.options.freeInput){self.$input.on("focusout",$.proxy(function(event){if($(".typeahead, .twitter-typeahead",self.$container).length===0){self.add(self.$input.val());self.$input.val("")}},self))}self.$container.on("keydown","input",$.proxy(function(event){var $input=$(event.target),$inputWrapper=self.findInputWrapper();if(self.$element.attr("disabled")){self.$input.attr("disabled","disabled");return}switch(event.which){case 8:if(doGetCaretPosition($input[0])===0){var prev=$inputWrapper.prev();if(prev.length){self.remove(prev.data("item"))}}break;case 46:if(doGetCaretPosition($input[0])===0){var next=$inputWrapper.next();if(next.length){self.remove(next.data("item"))}}break;case 37:var $prevTag=$inputWrapper.prev();if($input.val().length===0&&$prevTag[0]){$prevTag.before($inputWrapper);$input.focus()}break;case 39:var $nextTag=$inputWrapper.next();if($input.val().length===0&&$nextTag[0]){$nextTag.after($inputWrapper);$input.focus()}break;default:}var textLength=$input.val().length,wordSpace=Math.ceil(textLength/5),size=textLength+wordSpace+1;$input.attr("size",Math.max(this.inputSize,$input.val().length))},self));self.$container.on("keypress","input",$.proxy(function(event){var $input=$(event.target);if(self.$element.attr("disabled")){self.$input.attr("disabled","disabled");return}var text=$input.val(),maxLengthReached=self.options.maxChars&&text.length>=self.options.maxChars;if(self.options.freeInput&&(keyCombinationInList(event,self.options.confirmKeys)||maxLengthReached)){if(text.length!==0){self.add(maxLengthReached?text.substr(0,self.options.maxChars):text);$input.val("")}if(self.options.cancelConfirmKeysOnEmpty===false){event.preventDefault()}}var textLength=$input.val().length,wordSpace=Math.ceil(textLength/5),size=textLength+wordSpace+1;$input.attr("size",Math.max(this.inputSize,$input.val().length))},self));self.$container.on("click","[data-role=remove]",$.proxy(function(event){if(self.$element.attr("disabled")){return}self.remove($(event.target).closest(".tag").data("item"))},self));if(self.options.itemValue===defaultOptions.itemValue){if(self.$element[0].tagName==="INPUT"){self.add(self.$element.val())}else{$("option",self.$element).each(function(){self.add($(this).attr("value"),true)})}}},destroy:function(){var self=this;self.$container.off("keypress","input");self.$container.off("click","[role=remove]");self.$container.remove();self.$element.removeData("tagsinput");self.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){var elt=this.$input[0],container=this.$container[0];while(elt&&elt.parentNode!==container)elt=elt.parentNode;return $(elt)}};$.fn.tagsinput=function(arg1,arg2,arg3){var results=[];this.each(function(){var tagsinput=$(this).data("tagsinput");if(!tagsinput){tagsinput=new TagsInput(this,arg1);$(this).data("tagsinput",tagsinput);results.push(tagsinput);if(this.tagName==="SELECT"){$("option",$(this)).attr("selected","selected")}$(this).val($(this).val())}else if(!arg1&&!arg2){results.push(tagsinput)}else if(tagsinput[arg1]!==undefined){if(tagsinput[arg1].length===3&&arg3!==undefined){var retVal=tagsinput[arg1](arg2,null,arg3)}else{var retVal=tagsinput[arg1](arg2)}if(retVal!==undefined)results.push(retVal)}});if(typeof arg1=="string"){return results.length>1?results:results[0]}else{return results}};$.fn.tagsinput.Constructor=TagsInput;function makeOptionItemFunction(options,key){if(typeof options[key]!=="function"){var propertyName=options[key];options[key]=function(item){return item[propertyName]}}}function makeOptionFunction(options,key){if(typeof options[key]!=="function"){var value=options[key];options[key]=function(){return value}}}var htmlEncodeContainer=$("<div />");function htmlEncode(value){if(value){return htmlEncodeContainer.text(value).html()}else{return""}}function doGetCaretPosition(oField){var iCaretPos=0;if(document.selection){oField.focus();var oSel=document.selection.createRange();oSel.moveStart("character",-oField.value.length);iCaretPos=oSel.text.length}else if(oField.selectionStart||oField.selectionStart=="0"){iCaretPos=oField.selectionStart}return iCaretPos}function keyCombinationInList(keyPressEvent,lookupList){var found=false;$.each(lookupList,function(index,keyCombination){if(typeof keyCombination==="number"&&keyPressEvent.which===keyCombination){found=true;return false}if(keyPressEvent.which===keyCombination.which){var alt=!keyCombination.hasOwnProperty("altKey")||keyPressEvent.altKey===keyCombination.altKey,shift=!keyCombination.hasOwnProperty("shiftKey")||keyPressEvent.shiftKey===keyCombination.shiftKey,ctrl=!keyCombination.hasOwnProperty("ctrlKey")||keyPressEvent.ctrlKey===keyCombination.ctrlKey;if(alt&&shift&&ctrl){found=true;return false}}});return found}$(function(){$("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery)},{}],8:[function(require,module,exports){require("../../js/transition.js");require("../../js/alert.js");require("../../js/button.js");require("../../js/carousel.js");require("../../js/collapse.js");require("../../js/dropdown.js");require("../../js/modal.js");require("../../js/tooltip.js");require("../../js/popover.js");require("../../js/scrollspy.js");require("../../js/tab.js");require("../../js/affix.js")},{"../../js/affix.js":9,"../../js/alert.js":10,"../../js/button.js":11,"../../js/carousel.js":12,"../../js/collapse.js":13,"../../js/dropdown.js":14,"../../js/modal.js":15,"../../js/popover.js":16,"../../js/scrollspy.js":17,"../../js/tab.js":18,"../../js/tooltip.js":19,"../../js/transition.js":20}],9:[function(require,module,exports){+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};Affix.VERSION="3.3.7";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop();var position=this.$element.offset();var targetHeight=this.$target.height();if(offsetTop!=null&&this.affixed=="top")return scrollTop<offsetTop?"top":false;if(this.affixed=="bottom"){if(offsetTop!=null)return scrollTop+this.unpin<=position.top?false:"bottom";return scrollTop+targetHeight<=scrollHeight-offsetBottom?false:"bottom"}var initializing=this.affixed==null;var colliderTop=initializing?scrollTop:position.top;var colliderHeight=initializing?targetHeight:height;if(offsetTop!=null&&scrollTop<=offsetTop)return"top";if(offsetBottom!=null&&colliderTop+colliderHeight>=scrollHeight-offsetBottom)return"bottom";return false};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop();var position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var height=this.$element.height();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;var scrollHeight=Math.max($(document).height(),$(document.body).height());if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top(this.$element);if(typeof offsetBottom=="function")offsetBottom=offset.bottom(this.$element);var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){if(this.unpin!=null)this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:"");var e=$.Event(affixType+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented())return;this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}if(affix=="bottom"){this.$element.offset({top:scrollHeight-height-offsetBottom})}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.affix;$.fn.affix=Plugin;$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom;if(data.offsetTop!=null)data.offset.top=data.offsetTop;Plugin.call($spy,data)})})}(jQuery)},{}],10:[function(require,module,exports){+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.7";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector==="#"?[]:selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery)},{}],11:[function(require,module,exports){+function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);this.isLoading=false};Button.VERSION="3.3.7";Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state+="Text";if(data.resetText==null)$el.data("resetText",$el[val]());setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state]);if(state=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d).prop(d,true)}else if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d).prop(d,false)}},this),0)};Button.prototype.toggle=function(){var changed=true;var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");if($input.prop("type")=="radio"){if($input.prop("checked"))changed=false;$parent.find(".active").removeClass("active");this.$element.addClass("active")}else if($input.prop("type")=="checkbox"){if($input.prop("checked")!==this.$element.hasClass("active"))changed=false;this.$element.toggleClass("active")}$input.prop("checked",this.$element.hasClass("active"));if(changed)$input.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})}var old=$.fn.button;$.fn.button=Plugin;$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target).closest(".btn");Plugin.call($btn,"toggle");if(!$(e.target).is('input[type="radio"], input[type="checkbox"]')){e.preventDefault();if($btn.is("input,button"))$btn.trigger("focus");else $btn.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery)},{}],12:[function(require,module,exports){+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.7";Carousel.TRANSITION_DURATION=600;Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault();

};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this};Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active)};Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);var willWrap=direction=="prev"&&activeIndex===0||direction=="next"&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta=direction=="prev"?-1:1;var itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||this.getItemForDirection(type,$active);var isCycling=this.interval;var direction=type=="next"?"left":"right";var that=this;if($next.hasClass("active"))return this.sliding=false;var relatedTarget=$next[0];var slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});this.$element.trigger(slideEvent);if(slideEvent.isDefaultPrevented())return;this.sliding=true;isCycling&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if($.support.transition&&this.$element.hasClass("slide")){$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger(slidEvent)}isCycling&&this.cycle();return this};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})}var old=$.fn.carousel;$.fn.carousel=Plugin;$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};var clickHandler=function(e){var href;var $this=$(this);var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!$target.hasClass("carousel"))return;var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;Plugin.call($target,options);if(slideIndex){$target.data("bs.carousel").to(slideIndex)}e.preventDefault()};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler);$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery)},{}],13:[function(require,module,exports){+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.7";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery)},{}],14:[function(require,module,exports){+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.7";function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;if(e&&e.type=="click"&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget))})}Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find(".dropdown-menu"+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery)},{}],15:[function(require,module,exports){+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.3.7";Modal.TRANSITION_DURATION=300;Modal.BACKDROP_TRANSITION_DURATION=150;Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})});this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);that.adjustDialog();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in");that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();$(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};Modal.prototype.resize=function(){if(this.isShown){$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this))}else{$(window).off("resize.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetAdjustments();that.resetScrollbar();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}};Modal.prototype.handleUpdate=function(){this.adjustDialog()};Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})};Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth;this.scrollbarWidth=this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery)},{}],16:[function(require,module,exports){+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.7";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery)},{}],17:[function(require,module,exports){+function($){"use strict";function ScrollSpy(element,options){this.$body=$(document.body);this.$scrollElement=$(element).is(document.body)?$(window):$(element);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this));this.refresh();this.process()}ScrollSpy.VERSION="3.3.7";ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};ScrollSpy.prototype.refresh=function(){var that=this;var offsetMethod="offset";var offsetBase=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!$.isWindow(this.$scrollElement[0])){offsetMethod="position";offsetBase=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]);that.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.getScrollHeight();var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(this.scrollHeight!=scrollHeight){this.refresh()}if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null;return this.clear()}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate.bs.scrollspy")};ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.scrollspy;$.fn.scrollspy=Plugin;$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery)},{}],18:[function(require,module,exports){+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.7";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery)},{}],19:[function(require,module,exports){+function($){"use strict";var Tooltip=function(element,options){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.3.7";Tooltip.TRANSITION_DURATION=150;Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusin"?"focus":"hover"]=true}if(self.tip().hasClass("in")||self.hoverState=="in"){self.hoverState="in";return}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState){if(this.inState[key])return true}return false};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}if(obj instanceof $.Event){self.inState[obj.type=="focusout"?"focus":"hover"]=false}if(self.isInStateTrue())return;clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var viewportDim=this.getPosition(this.$viewport);placement=placement=="bottom"&&pos.bottom+actualHeight>viewportDim.bottom?"top":placement=="top"&&pos.top-actualHeight<viewportDim.top?"bottom":placement=="right"&&pos.right+actualWidth>viewportDim.width?"left":placement=="left"&&pos.left-actualWidth<viewportDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(prevHoverState=="out")that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);

var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top+=marginTop;offset.left+=marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var isVertical=/top|bottom/.test(placement);var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)};Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(callback){var that=this;var $tip=$(this.$tip);var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();if(that.$element){that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type)}callback&&callback()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";var elRect=el.getBoundingClientRect();if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}var isSvg=window.SVGElement&&el instanceof window.SVGElement;var elOffset=isBody?{top:0,left:0}:isSvg?null:$element.offset();var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()};var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.right){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1e6);while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){if(!this.$tip){this.$tip=$(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}if(e){self.inState.click=!self.inState.click;if(self.isInStateTrue())self.enter(self);else self.leave(self)}else{self.tip().hasClass("in")?self.leave(self):self.enter(self)}};Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type);if(that.$tip){that.$tip.detach()}that.$tip=null;that.$arrow=null;that.$viewport=null;that.$element=null})};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery)},{}],20:[function(require,module,exports){+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery)},{}],21:[function(require,module,exports){(function(mod){if(typeof exports=="object"&&typeof module=="object")module.exports=mod();else if(typeof define=="function"&&define.amd)return define([],mod);else(this||window).browserKeymap=mod()})(function(){"use strict";var mac=typeof navigator!="undefined"?/Mac/.test(navigator.platform):typeof os!="undefined"?os.platform()=="darwin":false;var keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var i=0;i<10;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(var i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(var i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i;function keyName(event){if(event.type=="keypress")return"'"+String.fromCharCode(event.charCode)+"'";var base=keyNames[event.keyCode],name=base;if(name==null||event.altGraphKey)return null;if(event.altKey&&base!="Alt")name="Alt-"+name;if(event.ctrlKey&&base!="Ctrl")name="Ctrl-"+name;if(event.metaKey&&base!="Cmd")name="Cmd-"+name;if(event.shiftKey&&base!="Shift")name="Shift-"+name;return name}function isModifierKey(name){name=/[^-]*$/.exec(name)[0];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"}function normalizeKeyName(name){var parts=name.split(/-(?!'?$)/),result=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=true;else if(/^a(lt)?$/i.test(mod))alt=true;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=true;else if(/^s(hift)?$/i.test(mod))shift=true;else if(/^mod$/i.test(mod)){if(mac)cmd=true;else ctrl=true}else throw new Error("Unrecognized modifier name: "+mod)}if(alt)result="Alt-"+result;if(ctrl)result="Ctrl-"+result;if(cmd)result="Cmd-"+result;if(shift)result="Shift-"+result;return result}function Keymap(keys,options){this.options=options||{};this.bindings=Object.create(null);if(keys)this.addBindings(keys)}Keymap.prototype={normalize:function(name){return this.options.multi!==false?name.split(/ +(?!\'$)/).map(normalizeKeyName):[normalizeKeyName(name)]},addBinding:function(keyname,value){var keys=this.normalize(keyname);for(var i=0;i<keys.length;i++){var name=keys.slice(0,i+1).join(" ");var val=i==keys.length-1?value:"...";var prev=this.bindings[name];if(!prev)this.bindings[name]=val;else if(prev!=val)throw new Error("Inconsistent bindings for "+name)}},addBindings:function(bindings){for(var keyname in bindings)if(Object.prototype.hasOwnProperty.call(bindings,keyname))this.addBinding(keyname,bindings[keyname])},removeBinding:function(keyname){var keys=this.normalize(keyname);for(var i=keys.length-1;i>=0;i--){var name=keys.slice(0,i).join(" ");var val=this.bindings[name];if(val=="..."&&!this.unusedMulti(name))break;else if(val)delete this.bindings[name]}},unusedMulti:function(name){for(var binding in this.bindings)if(binding.length>name&&binding.indexOf(name)==0&&binding.charAt(name.length)==" ")return false;return true},lookup:function(key,context){return this.options.call?this.options.call(key,context):this.bindings[key]},reverseLookup:function(value){for(var keyname in this.bindings)if(this.bindings[keyname]==value)return keyname},constructor:Keymap};Keymap.keyName=keyName;Keymap.isModifierKey=isModifierKey;Keymap.normalizeKeyName=normalizeKeyName;return Keymap})},{}],22:[function(require,module,exports){module.exports={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"","in":"",infin:"",infintie:"",inodot:"",intcal:"","int":"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",
Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}},{}],23:[function(require,module,exports){(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var document=window.document;var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var version="2.2.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback){return jQuery.each(this,callback)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor()},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){var realStringObj=obj&&obj.toString();return!jQuery.isArray(obj)&&realStringObj-parseFloat(realStringObj)+1>=0},isPlainObject:function(obj){var key;if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype||{},"isPrototypeOf")){return false}for(key in obj){}return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback){var length,i=0;if(isArrayLike(obj)){length=obj.length;for(;i<length;i++){if(callback.call(obj[i],i,obj[i])===false){break}}}else{for(i in obj){if(callback.call(obj[i],i,obj[i])===false){break}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArrayLike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var length,value,i=0,ret=[];if(isArrayLike(elems)){length=elems.length;for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});if(typeof Symbol==="function"){jQuery.fn[Symbol.iterator]=arr[Symbol.iterator]}jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArrayLike(obj){var length=!!obj&&"length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var m,i,elem,nid,nidselect,match,groups,newSelector,newContext=context&&context.ownerDocument,nodeType=context?context.nodeType:9;results=results||[];if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed){if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;if(documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){if(elem=context.getElementById(m)){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(newContext&&(elem=newContext.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&!compilerCache[selector+" "]&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nodeType!==1){newContext=context;newSelector=selector}else if(context.nodeName.toLowerCase()!=="object"){if(nid=context.getAttribute("id")){nid=nid.replace(rescape,"\\$&")}else{context.setAttribute("id",nid=expando)}groups=tokenize(selector);i=groups.length;nidselect=ridentifier.test(nid)?"#"+nid:"[id='"+nid+"']";while(i--){groups[i]=nidselect+" "+toSelector(groups[i])}newSelector=groups.join(",");newContext=rsibling.test(selector)&&testContext(context.parentNode)||context}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(nid===expando){context.removeAttribute("id")}}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=arr.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=document.documentElement;documentIsHTML=!isXML(document);if((parent=document.defaultView)&&parent.top!==parent){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)}}support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(document.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!document.getElementsByName||!document.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!=="undefined"&&documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(document.querySelectorAll)){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===document||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===document||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===document?-1:b===document?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&!compilerCache[expr+" "]&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,uniqueCache,outerCache,node,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType,diff=false;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){node=parent;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){uniqueCache[type]=[dirruns,nodeIndex,diff];break}}}else{if(useCache){node=elem;outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});cache=uniqueCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=nodeIndex}if(diff===false){while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){outerCache=node[expando]||(node[expando]={});uniqueCache=outerCache[node.uniqueID]||(outerCache[node.uniqueID]={});uniqueCache[type]=[dirruns,diff]}if(node===elem){break}}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){
matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,uniqueCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});uniqueCache=outerCache[elem.uniqueID]||(outerCache[elem.uniqueID]={});if((oldCache=uniqueCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{uniqueCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context===document||context||outermost}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;if(!context&&elem.ownerDocument!==document){setDocument(elem);xml=!documentIsHTML}while(matcher=elementMatchers[j++]){if(matcher(elem,context||document,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,!context||rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.uniqueSort=jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var dir=function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched};var siblings=function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched};var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>-1!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context,root){var match,elem;if(!selector){return this}root=root||rootjQuery;if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||root).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return root.ready!==undefined?root.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.uniqueSort(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return dir(elem,"nextSibling")},prevAll:function(elem){return dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return dir(elem,"previousSibling",until)},siblings:function(elem){return siblings((elem.parentNode||{}).firstChild,elem)},children:function(elem){return siblings(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.uniqueSort(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;function createOptions(options){var object={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?createOptions(options):jQuery.extend({},options);var firing,memory,fired,locked,list=[],queue=[],firingIndex=-1,fire=function(){locked=options.once;fired=firing=true;for(;queue.length;firingIndex=-1){memory=queue.shift();while(++firingIndex<list.length){if(list[firingIndex].apply(memory[0],memory[1])===false&&options.stopOnFalse){firingIndex=list.length;memory=false}}}if(!options.memory){memory=false}firing=false;if(locked){if(memory){list=[]}else{list=""}}},self={add:function(){if(list){if(memory&&!firing){firingIndex=list.length-1;queue.push(memory)}(function add(args){jQuery.each(args,function(_,arg){if(jQuery.isFunction(arg)){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&jQuery.type(arg)!=="string"){add(arg)}})})(arguments);if(memory&&!firing){fire()}}return this},remove:function(){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(index<=firingIndex){firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:list.length>0},empty:function(){if(list){list=[]}return this},disable:function(){locked=queue=[];list=memory="";return this},disabled:function(){return!list},lock:function(){locked=queue=[];if(!memory){list=memory=""}return this},locked:function(){return!!locked},fireWith:function(context,args){if(!locked){args=args||[];args=[context,args.slice?args.slice():args];queue.push(args);if(!firing){fire()}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().progress(newDefer.notify).done(newDefer.resolve).fail(newDefer.reject)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().progress(updateFunc(i,progressContexts,progressValues)).done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject)}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed);window.removeEventListener("load",completed);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll){window.setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed);window.addEventListener("load",completed)}}return readyList.promise(obj)};jQuery.ready.promise();var access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};var acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.prototype={register:function(owner,initial){var value=initial||{};if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,writable:true,configurable:true})}return owner[this.expando]},cache:function(owner){if(!acceptData(owner)){return{}}var value=owner[this.expando];if(!value){value={};if(acceptData(owner)){if(owner.nodeType){owner[this.expando]=value}else{Object.defineProperty(owner,this.expando,{value:value,configurable:true})}}}return value},set:function(owner,data,value){var prop,cache=this.cache(owner);if(typeof data==="string"){cache[data]=value}else{for(prop in data){cache[prop]=data[prop]}}return cache},get:function(owner,key){return key===undefined?this.cache(owner):owner[this.expando]&&owner[this.expando][key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,cache=owner[this.expando];if(cache===undefined){return}if(key===undefined){this.register(owner)}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}if(key===undefined||jQuery.isEmptyObject(cache)){if(owner.nodeType){owner[this.expando]=undefined}else{delete owner[this.expando]}}},hasData:function(owner){var cache=owner[this.expando];return cache!==undefined&&!jQuery.isEmptyObject(cache)}};var dataPriv=new Data;var dataUser=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/[A-Z]/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$&").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}dataUser.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return dataUser.hasData(elem)||dataPriv.hasData(elem)},data:function(elem,name,data){return dataUser.access(elem,name,data)},removeData:function(elem,name){dataUser.remove(elem,name)},_data:function(elem,name,data){return dataPriv.access(elem,name,data)},_removeData:function(elem,name){dataPriv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=dataUser.get(elem);if(elem.nodeType===1&&!dataPriv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}dataPriv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){dataUser.set(this,key)})}return access(this,function(value){var data,camelKey;if(elem&&value===undefined){data=dataUser.get(elem,key)||dataUser.get(elem,key.replace(rmultiDash,"-$&").toLowerCase());if(data!==undefined){return data}camelKey=jQuery.camelCase(key);data=dataUser.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}camelKey=jQuery.camelCase(key);this.each(function(){var data=dataUser.get(this,camelKey);dataUser.set(this,camelKey,value);if(key.indexOf("-")>-1&&data!==undefined){dataUser.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){dataUser.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=dataPriv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=dataPriv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return dataPriv.get(elem,key)||dataPriv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){dataPriv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=dataPriv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var rcssNum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i");var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};function adjustCSS(elem,prop,valueParts,tween){var adjusted,scale=1,maxIterations=20,currentValue=tween?function(){return tween.cur()}:function(){return jQuery.css(elem,prop,"")},initial=currentValue(),unit=valueParts&&valueParts[3]||(jQuery.cssNumber[prop]?"":"px"),initialInUnit=(jQuery.cssNumber[prop]||unit!=="px"&&+initial)&&rcssNum.exec(jQuery.css(elem,prop));if(initialInUnit&&initialInUnit[3]!==unit){unit=unit||initialInUnit[3];valueParts=valueParts||[];initialInUnit=+initial||1;do{scale=scale||".5";initialInUnit=initialInUnit/scale;jQuery.style(elem,prop,initialInUnit+unit)}while(scale!==(scale=currentValue()/initial)&&scale!==1&&--maxIterations)}if(valueParts){initialInUnit=+initialInUnit||+initial||0;adjusted=valueParts[1]?initialInUnit+(valueParts[1]+1)*valueParts[2]:+valueParts[2];if(tween){tween.unit=unit;tween.start=initialInUnit;tween.end=adjusted}}return adjusted}var rcheckableType=/^(?:checkbox|radio)$/i;var rtagName=/<([\w:-]+)/;var rscriptType=/^$|\/(?:java|ecma)script/i;var wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function getAll(context,tag){var ret=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!=="undefined"?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){dataPriv.set(elems[i],"globalEval",!refElements||dataPriv.get(refElements[i],"globalEval"))}}var rhtml=/<|&#?\w+;/;function buildFragment(elems,context,scripts,selection,ignored){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+jQuery.htmlPrefilter(elem)+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)>-1){if(ignored){ignored.push(elem)}continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment}(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,rtypenamespace=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}function on(elem,types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){on(elem,type,selector,data,types[type],one)}return elem}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return elem}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return elem.each(function(){jQuery.event.add(this,types,fn,data,selector)})}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!=="undefined"&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];

handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=dataPriv.hasData(elem)&&dataPriv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){dataPriv.remove(elem,"handle events")}},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(dataPriv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.rnamespace||event.rnamespace.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(event.type!=="click"||isNaN(event.button)||event.button<1)){for(;cur!==this;cur=cur.parentNode||this){if(cur.nodeType===1&&(cur.disabled!==true||event.type!=="click")){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>-1:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});jQuery.fn.extend({on:function(types,selector,data,fn){return on(this,types,selector,data,fn)},one:function(types,selector,data,fn){return on(this,types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,rnoInnerhtml=/<script|<style|<link/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(dataPriv.hasData(src)){pdataOld=dataPriv.access(src);pdataCur=dataPriv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(dataUser.hasData(src)){udataOld=dataUser.access(src);udataCur=jQuery.extend({},udataOld);dataUser.set(dest,udataCur)}}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}function domManip(collection,args,callback,ignored){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=collection.length,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return collection.each(function(index){var self=collection.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}domManip(self,args,callback,ignored)})}if(l){fragment=buildFragment(args,collection[0].ownerDocument,false,collection,ignored);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first||ignored){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(collection[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!dataPriv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return collection}function remove(elem,selector,keepData){var node,nodes=selector?jQuery.filter(selector,elem):elem,i=0;for(;(node=nodes[i])!=null;i++){if(!keepData&&node.nodeType===1){jQuery.cleanData(getAll(node))}if(node.parentNode){if(keepData&&jQuery.contains(node.ownerDocument,node)){setGlobalEval(getAll(node,"script"))}node.parentNode.removeChild(node)}}return elem}jQuery.extend({htmlPrefilter:function(html){return html.replace(rxhtmlTag,"<$1></$2>")},clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},cleanData:function(elems){var data,elem,type,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(acceptData(elem)){if(data=elem[dataPriv.expando]){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}elem[dataPriv.expando]=undefined}if(elem[dataUser.expando]){elem[dataUser.expando]=undefined}}}}});jQuery.fn.extend({domManip:domManip,detach:function(selector){return remove(this,selector,true)},remove:function(selector){return remove(this,selector)},text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return domManip(this,arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return domManip(this,arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=jQuery.htmlPrefilter(value);try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var ignored=[];return domManip(this,arguments,function(elem){var parent=this.parentNode;if(jQuery.inArray(this,ignored)<0){jQuery.cleanData(getAll(this));if(parent){parent.replaceChild(elem,this)}}},ignored)}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={HTML:"block",BODY:"block"};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){var view=elem.ownerDocument.defaultView;if(!view||!view.opener){view=window}return view.getComputedStyle(elem)};var swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var documentElement=document.documentElement;(function(){var pixelPositionVal,boxSizingReliableVal,pixelMarginRightVal,reliableMarginLeftVal,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";container.appendChild(div);function computeStyleTests(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";div.innerHTML="";documentElement.appendChild(container);var divStyle=window.getComputedStyle(div);pixelPositionVal=divStyle.top!=="1%";reliableMarginLeftVal=divStyle.marginLeft==="2px";boxSizingReliableVal=divStyle.width==="4px";div.style.marginRight="50%";pixelMarginRightVal=divStyle.marginRight==="4px";documentElement.removeChild(container)}jQuery.extend(support,{pixelPosition:function(){computeStyleTests();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computeStyleTests()}return boxSizingReliableVal},pixelMarginRight:function(){if(boxSizingReliableVal==null){computeStyleTests()}return pixelMarginRightVal},reliableMarginLeft:function(){if(boxSizingReliableVal==null){computeStyleTests()}return reliableMarginLeftVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";documentElement.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv).marginRight);documentElement.removeChild(container);div.removeChild(marginDiv);return ret}})})();function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);ret=computed?computed.getPropertyValue(name)||computed[name]:undefined;if((ret===""||ret===undefined)&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(computed){if(!support.pixelMarginRight()&&rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}var rdisplayswap=/^(none|table(?!-c[ea]).+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"],emptyStyle=document.createElement("div").style;function vendorPropName(name){if(name in emptyStyle){return name}var capName=name[0].toUpperCase()+name.slice(1),i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in emptyStyle){return name}}}function setPositiveNumber(elem,value,subtract){var matches=rcssNum.exec(value);return matches?Math.max(0,matches[2]-(subtract||0))+(matches[3]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=dataPriv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=dataPriv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){dataPriv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rcssNum.exec(value))&&ret[1]){value=adjustCSS(elem,name,ret);type="number"}if(value==null||value!==value){return}if(type==="number"){value+=ret&&ret[3]||(jQuery.cssNumber[origName]?"":"px")}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(origName)||origName);hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||isFinite(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var matches,styles=extra&&getStyles(elem),subtract=extra&&augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles);if(subtract&&(matches=rcssNum.exec(value))&&(matches[3]||"px")!=="px"){elem.style[name]=value;value=jQuery.css(elem,name)}return setPositiveNumber(elem,value,subtract)}}});jQuery.cssHooks.marginLeft=addGetHookIf(support.reliableMarginLeft,function(elem,computed){if(computed){return(parseFloat(curCSS(elem,"marginLeft"))||elem.getBoundingClientRect().left-swap(elem,{marginLeft:0},function(){return elem.getBoundingClientRect().left}))+"px"}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||jQuery.easing._default;this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem.nodeType!==1||tween.elem[tween.prop]!=null&&tween.elem.style[tween.prop]==null){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.nodeType===1&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rrun=/queueHooks$/;function createFxNow(){window.setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(Animation.tweeners[prop]||[]).concat(Animation.tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=dataPriv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?dataPriv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=dataPriv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;dataPriv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=Animation.prefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{},easing:jQuery.easing._default},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.notifyWith(elem,[animation,1,0]);

deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=Animation.prefilters[index].call(animation,elem,props,animation.opts);if(result){if(jQuery.isFunction(result.stop)){jQuery._queueHooks(animation.elem,animation.opts.queue).stop=jQuery.proxy(result.stop,result)}return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(prop,value){var tween=this.createTween(prop,value);adjustCSS(tween.elem,prop,rcssNum.exec(value),tween);return tween}]},tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.match(rnotwhite)}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];Animation.tweeners[prop]=Animation.tweeners[prop]||[];Animation.tweeners[prop].unshift(callback)}},prefilters:[defaultPrefilter],prefilter:function(callback,prepend){if(prepend){Animation.prefilters.unshift(callback)}else{Animation.prefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||dataPriv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=dataPriv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=dataPriv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=window.setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){window.clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=window.setTimeout(next,time);hooks.stop=function(){window.clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute==="undefined"){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:undefined)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}elem.setAttribute(name,value+"");return value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(nType===3||nType===8||nType===2){return}if(nType!==1||!jQuery.isXMLDoc(elem)){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}return elem[name]=value}if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}return elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null},set:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;function getClass(elem){return elem.getAttribute&&elem.getAttribute("class")||""}jQuery.fn.extend({addClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,getClass(this)))})}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},removeClass:function(value){var classes,elem,cur,curValue,clazz,j,finalValue,i=0;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,getClass(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof value==="string"&&value){classes=value.match(rnotwhite)||[];while(elem=this[i++]){curValue=getClass(elem);cur=elem.nodeType===1&&(" "+curValue+" ").replace(rclass," ");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>-1){cur=cur.replace(" "+clazz+" "," ")}}finalValue=jQuery.trim(cur);if(curValue!==finalValue){elem.setAttribute("class",finalValue)}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,getClass(this),stateVal),stateVal)})}return this.each(function(){var className,i,self,classNames;if(type==="string"){i=0;self=jQuery(this);classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(value===undefined||type==="boolean"){className=getClass(this);if(className){dataPriv.set(this,"__className__",className)}if(this.setAttribute){this.setAttribute("class",className||value===false?"":dataPriv.get(this,"__className__")||"")}}})},hasClass:function(selector){var className,elem,i=0;className=" "+selector+" ";while(elem=this[i++]){if(elem.nodeType===1&&(" "+getClass(elem)+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false}});var rreturn=/\r/g,rspaces=/[\x20\t\r\n\f]+/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem)).replace(rspaces," ")}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery.valHooks.option.get(option),values)>-1){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>-1}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});var rfocusMorph=/^(?:focusinfocus|focusoutblur)$/;jQuery.extend(jQuery.event,{trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.rnamespace=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(dataPriv.get(cur,"events")||{})[event.type]&&dataPriv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},simulate:function(type,elem,event){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true});jQuery.event.trigger(e,null,elem)}});jQuery.fn.extend({trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});support.focusin="onfocusin"in window;if(!support.focusin){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event))};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}dataPriv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=dataPriv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);dataPriv.remove(doc,fix)}else{dataPriv.access(doc,fix,attaches)}}}})}var location=window.location;var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml;if(!data||typeof data!=="string"){return null}try{xml=(new window.DOMParser).parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,prefilters={},transports={},allTypes="*/".concat("*"),originAnchor=document.createElement("a");originAnchor.href=location.href;function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s.throws){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:location.href,type:"GET",isLocal:rlocalProtocol.test(location.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,urlAnchor,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||location.href)+"").replace(rhash,"").replace(rprotocol,location.protocol+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){urlAnchor=document.createElement("a");try{urlAnchor.href=s.url;urlAnchor.href=urlAnchor.href;s.crossDomain=originAnchor.protocol+"//"+originAnchor.host!==urlAnchor.protocol+"//"+urlAnchor.host}catch(e){s.crossDomain=true}}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(state===2){return jqXHR}if(s.async&&s.timeout>0){timeoutTimer=window.setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){window.clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax(jQuery.extend({url:url,type:method,dataType:type,data:data,success:callback},jQuery.isPlainObject(url)&&url))}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return!jQuery.expr.filters.visible(elem)};jQuery.expr.filters.visible=function(elem){return elem.offsetWidth>0||elem.offsetHeight>0||elem.getClientRects().length>0};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"&&v!=null?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new window.XMLHttpRequest}catch(e){}};var xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback,errorCallback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){callback=errorCallback=xhr.onload=xhr.onerror=xhr.onabort=xhr.onreadystatechange=null;

if(type==="abort"){xhr.abort()}else if(type==="error"){if(typeof xhr.status!=="number"){complete(0,"error")}else{complete(xhr.status,xhr.statusText)}}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,(xhr.responseType||"text")!=="text"||typeof xhr.responseText!=="string"?{binary:xhr.response}:{text:xhr.responseText},xhr.getAllResponseHeaders())}}}};xhr.onload=callback();errorCallback=xhr.onerror=callback("error");if(xhr.onabort!==undefined){xhr.onabort=errorCallback}else{xhr.onreadystatechange=function(){if(xhr.readyState===4){window.setTimeout(function(){if(callback){errorCallback()}})}}}callback=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){if(overwritten===undefined){jQuery(window).removeProp(callbackName)}else{window[callbackName]=overwritten}if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>-1){selector=jQuery.trim(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type||"GET",dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).always(callback&&function(jqXHR,status){self.each(function(){callback.apply(this,response||[jqXHR.responseText,status,jqXHR])})})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,jQuery.extend({},curOffset))}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}box=elem.getBoundingClientRect();win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent;while(offsetParent&&jQuery.css(offsetParent,"position")==="static"){offsetParent=offsetParent.offsetParent}return offsetParent||documentElement})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:win.pageXOffset,top?val:win.pageYOffset)}else{elem[method]=val}},method,val,arguments.length)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.extend({bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},size:function(){return this.length}});jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(!noGlobal){window.jQuery=window.$=jQuery}return jQuery})},{}],24:[function(require,module,exports){"use strict";function assign(obj){var sources=Array.prototype.slice.call(arguments,1);sources.forEach(function(source){if(!source){return}Object.keys(source).forEach(function(key){obj[key]=source[key]})});return obj}function _class(obj){return Object.prototype.toString.call(obj)}function isString(obj){return _class(obj)==="[object String]"}function isObject(obj){return _class(obj)==="[object Object]"}function isRegExp(obj){return _class(obj)==="[object RegExp]"}function isFunction(obj){return _class(obj)==="[object Function]"}function escapeRE(str){return str.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var defaultOptions={fuzzyLink:true,fuzzyEmail:true,fuzzyIP:false};function isOptionsObj(obj){return Object.keys(obj||{}).reduce(function(acc,k){return acc||defaultOptions.hasOwnProperty(k)},false)}var defaultSchemas={"http:":{validate:function(text,pos,self){var tail=text.slice(pos);if(!self.re.http){self.re.http=new RegExp("^\\/\\/"+self.re.src_auth+self.re.src_host_port_strict+self.re.src_path,"i")}if(self.re.http.test(tail)){return tail.match(self.re.http)[0].length}return 0}},"https:":"http:","ftp:":"http:","//":{validate:function(text,pos,self){var tail=text.slice(pos);if(!self.re.no_http){self.re.no_http=new RegExp("^"+self.re.src_auth+"(?:localhost|(?:(?:"+self.re.src_domain+")\\.)+"+self.re.src_domain_root+")"+self.re.src_port+self.re.src_host_terminator+self.re.src_path,"i")}if(self.re.no_http.test(tail)){if(pos>=3&&text[pos-3]===":"){return 0}if(pos>=3&&text[pos-3]==="/"){return 0}return tail.match(self.re.no_http)[0].length}return 0}},"mailto:":{validate:function(text,pos,self){var tail=text.slice(pos);if(!self.re.mailto){self.re.mailto=new RegExp("^"+self.re.src_email_name+"@"+self.re.src_host_strict,"i")}if(self.re.mailto.test(tail)){return tail.match(self.re.mailto)[0].length}return 0}}};var tlds_2ch_src_re="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]";var tlds_default="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function resetScanCache(self){self.__index__=-1;self.__text_cache__=""}function createValidator(re){return function(text,pos){var tail=text.slice(pos);if(re.test(tail)){return tail.match(re)[0].length}return 0}}function createNormalizer(){return function(match,self){self.normalize(match)}}function compile(self){var re=self.re=assign({},require("./lib/re"));var tlds=self.__tlds__.slice();if(!self.__tlds_replaced__){tlds.push(tlds_2ch_src_re)}tlds.push(re.src_xn);re.src_tlds=tlds.join("|");function untpl(tpl){return tpl.replace("%TLDS%",re.src_tlds)}re.email_fuzzy=RegExp(untpl(re.tpl_email_fuzzy),"i");re.link_fuzzy=RegExp(untpl(re.tpl_link_fuzzy),"i");re.link_no_ip_fuzzy=RegExp(untpl(re.tpl_link_no_ip_fuzzy),"i");re.host_fuzzy_test=RegExp(untpl(re.tpl_host_fuzzy_test),"i");var aliases=[];self.__compiled__={};function schemaError(name,val){throw new Error('(LinkifyIt) Invalid schema "'+name+'": '+val)}Object.keys(self.__schemas__).forEach(function(name){var val=self.__schemas__[name];if(val===null){return}var compiled={validate:null,link:null};self.__compiled__[name]=compiled;if(isObject(val)){if(isRegExp(val.validate)){compiled.validate=createValidator(val.validate)}else if(isFunction(val.validate)){compiled.validate=val.validate}else{schemaError(name,val)}if(isFunction(val.normalize)){compiled.normalize=val.normalize}else if(!val.normalize){compiled.normalize=createNormalizer()}else{schemaError(name,val)}return}if(isString(val)){aliases.push(name);return}schemaError(name,val)});aliases.forEach(function(alias){if(!self.__compiled__[self.__schemas__[alias]]){return}self.__compiled__[alias].validate=self.__compiled__[self.__schemas__[alias]].validate;self.__compiled__[alias].normalize=self.__compiled__[self.__schemas__[alias]].normalize});self.__compiled__[""]={validate:null,normalize:createNormalizer()};var slist=Object.keys(self.__compiled__).filter(function(name){return name.length>0&&self.__compiled__[name]}).map(escapeRE).join("|");self.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+re.src_ZPCc+"))("+slist+")","i");self.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+re.src_ZPCc+"))("+slist+")","ig");self.re.pretest=RegExp("("+self.re.schema_test.source+")|"+"("+self.re.host_fuzzy_test.source+")|"+"@","i");resetScanCache(self)}function Match(self,shift){var start=self.__index__,end=self.__last_index__,text=self.__text_cache__.slice(start,end);this.schema=self.__schema__.toLowerCase();this.index=start+shift;this.lastIndex=end+shift;this.raw=text;this.text=text;this.url=text}function createMatch(self,shift){var match=new Match(self,shift);self.__compiled__[match.schema].normalize(match,self);return match}function LinkifyIt(schemas,options){if(!(this instanceof LinkifyIt)){return new LinkifyIt(schemas,options)}if(!options){if(isOptionsObj(schemas)){options=schemas;schemas={}}}this.__opts__=assign({},defaultOptions,options);this.__index__=-1;this.__last_index__=-1;this.__schema__="";this.__text_cache__="";this.__schemas__=assign({},defaultSchemas,schemas);this.__compiled__={};this.__tlds__=tlds_default;this.__tlds_replaced__=false;this.re={};compile(this)}LinkifyIt.prototype.add=function add(schema,definition){this.__schemas__[schema]=definition;compile(this);return this};LinkifyIt.prototype.set=function set(options){this.__opts__=assign(this.__opts__,options);return this};LinkifyIt.prototype.test=function test(text){this.__text_cache__=text;this.__index__=-1;if(!text.length){return false}var m,ml,me,len,shift,next,re,tld_pos,at_pos;if(this.re.schema_test.test(text)){re=this.re.schema_search;re.lastIndex=0;while((m=re.exec(text))!==null){len=this.testSchemaAt(text,m[2],re.lastIndex);if(len){this.__schema__=m[2];this.__index__=m.index+m[1].length;this.__last_index__=m.index+m[0].length+len;break}}}if(this.__opts__.fuzzyLink&&this.__compiled__["http:"]){tld_pos=text.search(this.re.host_fuzzy_test);if(tld_pos>=0){if(this.__index__<0||tld_pos<this.__index__){if((ml=text.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null){shift=ml.index+ml[1].length;if(this.__index__<0||shift<this.__index__){this.__schema__="";this.__index__=shift;this.__last_index__=ml.index+ml[0].length}}}}}if(this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]){at_pos=text.indexOf("@");if(at_pos>=0){if((me=text.match(this.re.email_fuzzy))!==null){shift=me.index+me[1].length;next=me.index+me[0].length;if(this.__index__<0||shift<this.__index__||shift===this.__index__&&next>this.__last_index__){this.__schema__="mailto:";this.__index__=shift;this.__last_index__=next}}}}return this.__index__>=0};LinkifyIt.prototype.pretest=function pretest(text){return this.re.pretest.test(text)};LinkifyIt.prototype.testSchemaAt=function testSchemaAt(text,schema,pos){if(!this.__compiled__[schema.toLowerCase()]){return 0}return this.__compiled__[schema.toLowerCase()].validate(text,pos,this)};LinkifyIt.prototype.match=function match(text){var shift=0,result=[];if(this.__index__>=0&&this.__text_cache__===text){result.push(createMatch(this,shift));shift=this.__last_index__}var tail=shift?text.slice(shift):text;while(this.test(tail)){result.push(createMatch(this,shift));tail=tail.slice(this.__last_index__);shift+=this.__last_index__}if(result.length){return result}return null};LinkifyIt.prototype.tlds=function tlds(list,keepOld){list=Array.isArray(list)?list:[list];if(!keepOld){this.__tlds__=list.slice();this.__tlds_replaced__=true;compile(this);return this}this.__tlds__=this.__tlds__.concat(list).sort().filter(function(el,idx,arr){return el!==arr[idx-1]}).reverse();compile(this);return this};LinkifyIt.prototype.normalize=function normalize(match){if(!match.schema){match.url="http://"+match.url}if(match.schema==="mailto:"&&!/^mailto:/i.test(match.url)){match.url="mailto:"+match.url}};module.exports=LinkifyIt},{"./lib/re":25}],25:[function(require,module,exports){"use strict";var src_Any=exports.src_Any=require("uc.micro/properties/Any/regex").source;var src_Cc=exports.src_Cc=require("uc.micro/categories/Cc/regex").source;var src_Z=exports.src_Z=require("uc.micro/categories/Z/regex").source;var src_P=exports.src_P=require("uc.micro/categories/P/regex").source;var src_ZPCc=exports.src_ZPCc=[src_Z,src_P,src_Cc].join("|");var src_ZCc=exports.src_ZCc=[src_Z,src_Cc].join("|");var src_pseudo_letter="(?:(?!>|<|"+src_ZPCc+")"+src_Any+")";var src_ip4=exports.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";exports.src_auth="(?:(?:(?!"+src_ZCc+"|[@/]).)+@)?";var src_port=exports.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?";var src_host_terminator=exports.src_host_terminator="(?=$|>|<|"+src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+src_ZPCc+"))";var src_path=exports.src_path="(?:"+"[/?#]"+"(?:"+"(?!"+src_ZCc+"|[()[\\]{}.,\"'?!\\-<>]).|"+"\\[(?:(?!"+src_ZCc+"|\\]).)*\\]|"+"\\((?:(?!"+src_ZCc+"|[)]).)*\\)|"+"\\{(?:(?!"+src_ZCc+"|[}]).)*\\}|"+'\\"(?:(?!'+src_ZCc+'|["]).)+\\"|'+"\\'(?:(?!"+src_ZCc+"|[']).)+\\'|"+"\\'(?="+src_pseudo_letter+").|"+"\\.{2,3}[a-zA-Z0-9%/]|"+"\\.(?!"+src_ZCc+"|[.]).|"+"\\-(?!--(?:[^-]|$))(?:-*)|"+"\\,(?!"+src_ZCc+").|"+"\\!(?!"+src_ZCc+"|[!]).|"+"\\?(?!"+src_ZCc+"|[?])."+")+"+"|\\/"+")?";var src_email_name=exports.src_email_name='[\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]+';var src_xn=exports.src_xn="xn--[a-z0-9\\-]{1,59}";var src_domain_root=exports.src_domain_root="(?:"+src_xn+"|"+src_pseudo_letter+"{1,63}"+")";var src_domain=exports.src_domain="(?:"+src_xn+"|"+"(?:"+src_pseudo_letter+")"+"|"+"(?:"+src_pseudo_letter+"(?:-(?!-)|"+src_pseudo_letter+"){0,61}"+src_pseudo_letter+")"+")";var src_host=exports.src_host="(?:"+"(?:(?:(?:"+src_domain+")\\.)*"+src_domain_root+")"+")";var tpl_host_fuzzy=exports.tpl_host_fuzzy="(?:"+src_ip4+"|"+"(?:(?:(?:"+src_domain+")\\.)+(?:%TLDS%))"+")";var tpl_host_no_ip_fuzzy=exports.tpl_host_no_ip_fuzzy="(?:(?:(?:"+src_domain+")\\.)+(?:%TLDS%))";exports.src_host_strict=src_host+src_host_terminator;var tpl_host_fuzzy_strict=exports.tpl_host_fuzzy_strict=tpl_host_fuzzy+src_host_terminator;exports.src_host_port_strict=src_host+src_port+src_host_terminator;var tpl_host_port_fuzzy_strict=exports.tpl_host_port_fuzzy_strict=tpl_host_fuzzy+src_port+src_host_terminator;var tpl_host_port_no_ip_fuzzy_strict=exports.tpl_host_port_no_ip_fuzzy_strict=tpl_host_no_ip_fuzzy+src_port+src_host_terminator;exports.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+src_ZPCc+"|>|$))";exports.tpl_email_fuzzy="(^|<|>|\\(|"+src_ZCc+")("+src_email_name+"@"+tpl_host_fuzzy_strict+")";exports.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+src_ZPCc+"))"+"((?![$+<=>^`|])"+tpl_host_port_fuzzy_strict+src_path+")";exports.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+src_ZPCc+"))"+"((?![$+<=>^`|])"+tpl_host_port_no_ip_fuzzy_strict+src_path+")"},{"uc.micro/categories/Cc/regex":142,"uc.micro/categories/P/regex":144,"uc.micro/categories/Z/regex":145,"uc.micro/properties/Any/regex":147}],26:[function(require,module,exports){"use strict";module.exports=require("./lib/")},{"./lib/":35}],27:[function(require,module,exports){"use strict";module.exports=require("entities/maps/entities.json")},{"entities/maps/entities.json":22}],28:[function(require,module,exports){"use strict";module.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","pre","section","source","title","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},{}],29:[function(require,module,exports){"use strict";var attr_name="[a-zA-Z_:][a-zA-Z0-9:._-]*";var unquoted="[^\"'=<>`\\x00-\\x20]+";var single_quoted="'[^']*'";var double_quoted='"[^"]*"';var attr_value="(?:"+unquoted+"|"+single_quoted+"|"+double_quoted+")";var attribute="(?:\\s+"+attr_name+"(?:\\s*=\\s*"+attr_value+")?)";var open_tag="<[A-Za-z][A-Za-z0-9\\-]*"+attribute+"*\\s*\\/?>";var close_tag="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>";var comment="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->";var processing="<[?].*?[?]>";var declaration="<![A-Z]+\\s+[^>]*>";var cdata="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>";var HTML_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+"|"+comment+"|"+processing+"|"+declaration+"|"+cdata+")");var HTML_OPEN_CLOSE_TAG_RE=new RegExp("^(?:"+open_tag+"|"+close_tag+")");module.exports.HTML_TAG_RE=HTML_TAG_RE;module.exports.HTML_OPEN_CLOSE_TAG_RE=HTML_OPEN_CLOSE_TAG_RE},{}],30:[function(require,module,exports){"use strict";function _class(obj){return Object.prototype.toString.call(obj)}function isString(obj){return _class(obj)==="[object String]"}var _hasOwnProperty=Object.prototype.hasOwnProperty;function has(object,key){return _hasOwnProperty.call(object,key)}function assign(obj){var sources=Array.prototype.slice.call(arguments,1);sources.forEach(function(source){if(!source){return}if(typeof source!=="object"){throw new TypeError(source+"must be object")}Object.keys(source).forEach(function(key){obj[key]=source[key]})});return obj}function arrayReplaceAt(src,pos,newElements){return[].concat(src.slice(0,pos),newElements,src.slice(pos+1))}function isValidEntityCode(c){if(c>=55296&&c<=57343){return false}if(c>=64976&&c<=65007){return false}if((c&65535)===65535||(c&65535)===65534){return false}if(c>=0&&c<=8){return false}if(c===11){return false}if(c>=14&&c<=31){return false}if(c>=127&&c<=159){return false}if(c>1114111){return false}return true}function fromCodePoint(c){if(c>65535){c-=65536;var surrogate1=55296+(c>>10),surrogate2=56320+(c&1023);return String.fromCharCode(surrogate1,surrogate2)}return String.fromCharCode(c)}var UNESCAPE_MD_RE=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g;var ENTITY_RE=/&([a-z#][a-z0-9]{1,31});/gi;var UNESCAPE_ALL_RE=new RegExp(UNESCAPE_MD_RE.source+"|"+ENTITY_RE.source,"gi");var DIGITAL_ENTITY_TEST_RE=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;var entities=require("./entities");function replaceEntityPattern(match,name){var code=0;if(has(entities,name)){return entities[name]}if(name.charCodeAt(0)===35&&DIGITAL_ENTITY_TEST_RE.test(name)){code=name[1].toLowerCase()==="x"?parseInt(name.slice(2),16):parseInt(name.slice(1),10);if(isValidEntityCode(code)){return fromCodePoint(code)}}return match}function unescapeMd(str){if(str.indexOf("\\")<0){return str}return str.replace(UNESCAPE_MD_RE,"$1")}function unescapeAll(str){if(str.indexOf("\\")<0&&str.indexOf("&")<0){return str}return str.replace(UNESCAPE_ALL_RE,function(match,escaped,entity){if(escaped){return escaped}return replaceEntityPattern(match,entity)})}var HTML_ESCAPE_TEST_RE=/[&<>"]/;var HTML_ESCAPE_REPLACE_RE=/[&<>"]/g;var HTML_REPLACEMENTS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function replaceUnsafeChar(ch){return HTML_REPLACEMENTS[ch]}function escapeHtml(str){if(HTML_ESCAPE_TEST_RE.test(str)){return str.replace(HTML_ESCAPE_REPLACE_RE,replaceUnsafeChar)}return str}var REGEXP_ESCAPE_RE=/[.?*+^$[\]\\(){}|-]/g;function escapeRE(str){return str.replace(REGEXP_ESCAPE_RE,"\\$&")}function isSpace(code){switch(code){case 9:case 32:return true}return false}function isWhiteSpace(code){if(code>=8192&&code<=8202){return true}switch(code){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return true}return false}var UNICODE_PUNCT_RE=require("uc.micro/categories/P/regex");function isPunctChar(ch){return UNICODE_PUNCT_RE.test(ch)}function isMdAsciiPunct(ch){switch(ch){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return true;default:return false}}function normalizeReference(str){return str.trim().replace(/\s+/g," ").toUpperCase()}exports.lib={};exports.lib.mdurl=require("mdurl");exports.lib.ucmicro=require("uc.micro");exports.assign=assign;exports.isString=isString;exports.has=has;exports.unescapeMd=unescapeMd;exports.unescapeAll=unescapeAll;exports.isValidEntityCode=isValidEntityCode;exports.fromCodePoint=fromCodePoint;exports.escapeHtml=escapeHtml;exports.arrayReplaceAt=arrayReplaceAt;exports.isSpace=isSpace;exports.isWhiteSpace=isWhiteSpace;exports.isMdAsciiPunct=isMdAsciiPunct;exports.isPunctChar=isPunctChar;exports.escapeRE=escapeRE;exports.normalizeReference=normalizeReference},{"./entities":27,mdurl:81,"uc.micro":146,"uc.micro/categories/P/regex":144}],31:[function(require,module,exports){"use strict";exports.parseLinkLabel=require("./parse_link_label");exports.parseLinkDestination=require("./parse_link_destination");exports.parseLinkTitle=require("./parse_link_title")},{"./parse_link_destination":32,"./parse_link_label":33,"./parse_link_title":34}],32:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;var unescapeAll=require("../common/utils").unescapeAll;module.exports=function parseLinkDestination(str,pos,max){var code,level,lines=0,start=pos,result={ok:false,pos:0,lines:0,str:""};if(str.charCodeAt(pos)===60){pos++;while(pos<max){code=str.charCodeAt(pos);if(code===10||isSpace(code)){return result}if(code===62){result.pos=pos+1;result.str=unescapeAll(str.slice(start+1,pos));result.ok=true;return result}if(code===92&&pos+1<max){pos+=2;continue}pos++}return result}level=0;while(pos<max){code=str.charCodeAt(pos);if(code===32){break}if(code<32||code===127){break}if(code===92&&pos+1<max){pos+=2;continue}if(code===40){level++;if(level>1){break}}if(code===41){level--;if(level<0){break}}pos++}if(start===pos){return result}result.str=unescapeAll(str.slice(start,pos));result.lines=lines;result.pos=pos;result.ok=true;return result}},{"../common/utils":30}],33:[function(require,module,exports){"use strict";module.exports=function parseLinkLabel(state,start,disableNested){var level,found,marker,prevPos,labelEnd=-1,max=state.posMax,oldPos=state.pos;state.pos=start+1;level=1;while(state.pos<max){marker=state.src.charCodeAt(state.pos);if(marker===93){level--;if(level===0){found=true;break}}prevPos=state.pos;state.md.inline.skipToken(state);if(marker===91){if(prevPos===state.pos-1){level++}else if(disableNested){state.pos=oldPos;return-1}}}if(found){labelEnd=state.pos}state.pos=oldPos;return labelEnd}},{}],34:[function(require,module,exports){"use strict";var unescapeAll=require("../common/utils").unescapeAll;module.exports=function parseLinkTitle(str,pos,max){var code,marker,lines=0,start=pos,result={ok:false,pos:0,lines:0,str:""};if(pos>=max){return result}marker=str.charCodeAt(pos);if(marker!==34&&marker!==39&&marker!==40){return result}pos++;if(marker===40){marker=41}while(pos<max){code=str.charCodeAt(pos);if(code===marker){result.pos=pos+1;result.lines=lines;result.str=unescapeAll(str.slice(start+1,pos));result.ok=true;return result}else if(code===10){lines++}else if(code===92&&pos+1<max){pos++;if(str.charCodeAt(pos)===10){lines++}}pos++}return result}},{"../common/utils":30}],35:[function(require,module,exports){"use strict";var utils=require("./common/utils");var helpers=require("./helpers");var Renderer=require("./renderer");var ParserCore=require("./parser_core");var ParserBlock=require("./parser_block");var ParserInline=require("./parser_inline");var LinkifyIt=require("linkify-it");var mdurl=require("mdurl");var punycode=require("punycode");var config={"default":require("./presets/default"),zero:require("./presets/zero"),commonmark:require("./presets/commonmark")};var BAD_PROTO_RE=/^(vbscript|javascript|file|data):/;var GOOD_DATA_RE=/^data:image\/(gif|png|jpeg|webp);/;function validateLink(url){var str=url.trim().toLowerCase();return BAD_PROTO_RE.test(str)?GOOD_DATA_RE.test(str)?true:false:true}var RECODE_HOSTNAME_FOR=["http:","https:","mailto:"];function normalizeLink(url){var parsed=mdurl.parse(url,true);if(parsed.hostname){if(!parsed.protocol||RECODE_HOSTNAME_FOR.indexOf(parsed.protocol)>=0){try{parsed.hostname=punycode.toASCII(parsed.hostname)}catch(er){}}}return mdurl.encode(mdurl.format(parsed))}function normalizeLinkText(url){var parsed=mdurl.parse(url,true);if(parsed.hostname){if(!parsed.protocol||RECODE_HOSTNAME_FOR.indexOf(parsed.protocol)>=0){try{parsed.hostname=punycode.toUnicode(parsed.hostname)}catch(er){}}}return mdurl.decode(mdurl.format(parsed))}function MarkdownIt(presetName,options){if(!(this instanceof MarkdownIt)){return new MarkdownIt(presetName,options)}if(!options){if(!utils.isString(presetName)){options=presetName||{};presetName="default"}}this.inline=new ParserInline;this.block=new ParserBlock;this.core=new ParserCore;this.renderer=new Renderer;this.linkify=new LinkifyIt;this.validateLink=validateLink;this.normalizeLink=normalizeLink;this.normalizeLinkText=normalizeLinkText;this.utils=utils;this.helpers=helpers;this.options={};this.configure(presetName);if(options){this.set(options)}}MarkdownIt.prototype.set=function(options){utils.assign(this.options,options);return this};MarkdownIt.prototype.configure=function(presets){var self=this,presetName;if(utils.isString(presets)){presetName=presets;presets=config[presetName];if(!presets){throw new Error('Wrong `markdown-it` preset "'+presetName+'", check name')}}if(!presets){throw new Error("Wrong `markdown-it` preset, can't be empty")}if(presets.options){self.set(presets.options)}if(presets.components){Object.keys(presets.components).forEach(function(name){if(presets.components[name].rules){self[name].ruler.enableOnly(presets.components[name].rules)}if(presets.components[name].rules2){self[name].ruler2.enableOnly(presets.components[name].rules2)}})}return this};MarkdownIt.prototype.enable=function(list,ignoreInvalid){var result=[];if(!Array.isArray(list)){list=[list]}["core","block","inline"].forEach(function(chain){result=result.concat(this[chain].ruler.enable(list,true))},this);result=result.concat(this.inline.ruler2.enable(list,true));var missed=list.filter(function(name){return result.indexOf(name)<0});if(missed.length&&!ignoreInvalid){throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+missed)}return this};MarkdownIt.prototype.disable=function(list,ignoreInvalid){var result=[];if(!Array.isArray(list)){list=[list]}["core","block","inline"].forEach(function(chain){result=result.concat(this[chain].ruler.disable(list,true))},this);result=result.concat(this.inline.ruler2.disable(list,true));var missed=list.filter(function(name){return result.indexOf(name)<0});if(missed.length&&!ignoreInvalid){throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+missed)}return this};MarkdownIt.prototype.use=function(plugin){
var args=[this].concat(Array.prototype.slice.call(arguments,1));plugin.apply(plugin,args);return this};MarkdownIt.prototype.parse=function(src,env){var state=new this.core.State(src,this,env);this.core.process(state);return state.tokens};MarkdownIt.prototype.render=function(src,env){env=env||{};return this.renderer.render(this.parse(src,env),this.options,env)};MarkdownIt.prototype.parseInline=function(src,env){var state=new this.core.State(src,this,env);state.inlineMode=true;this.core.process(state);return state.tokens};MarkdownIt.prototype.renderInline=function(src,env){env=env||{};return this.renderer.render(this.parseInline(src,env),this.options,env)};module.exports=MarkdownIt},{"./common/utils":30,"./helpers":31,"./parser_block":36,"./parser_core":37,"./parser_inline":38,"./presets/commonmark":39,"./presets/default":40,"./presets/zero":41,"./renderer":42,"linkify-it":24,mdurl:81,punycode:140}],36:[function(require,module,exports){"use strict";var Ruler=require("./ruler");var _rules=[["table",require("./rules_block/table"),["paragraph","reference"]],["code",require("./rules_block/code")],["fence",require("./rules_block/fence"),["paragraph","reference","blockquote","list"]],["blockquote",require("./rules_block/blockquote"),["paragraph","reference","list"]],["hr",require("./rules_block/hr"),["paragraph","reference","blockquote","list"]],["list",require("./rules_block/list"),["paragraph","reference","blockquote"]],["reference",require("./rules_block/reference")],["heading",require("./rules_block/heading"),["paragraph","reference","blockquote"]],["lheading",require("./rules_block/lheading")],["html_block",require("./rules_block/html_block"),["paragraph","reference","blockquote"]],["paragraph",require("./rules_block/paragraph")]];function ParserBlock(){this.ruler=new Ruler;for(var i=0;i<_rules.length;i++){this.ruler.push(_rules[i][0],_rules[i][1],{alt:(_rules[i][2]||[]).slice()})}}ParserBlock.prototype.tokenize=function(state,startLine,endLine){var ok,i,rules=this.ruler.getRules(""),len=rules.length,line=startLine,hasEmptyLines=false,maxNesting=state.md.options.maxNesting;while(line<endLine){state.line=line=state.skipEmptyLines(line);if(line>=endLine){break}if(state.sCount[line]<state.blkIndent){break}if(state.level>=maxNesting){state.line=endLine;break}for(i=0;i<len;i++){ok=rules[i](state,line,endLine,false);if(ok){break}}state.tight=!hasEmptyLines;if(state.isEmpty(state.line-1)){hasEmptyLines=true}line=state.line;if(line<endLine&&state.isEmpty(line)){hasEmptyLines=true;line++;if(line<endLine&&state.parentType==="list"&&state.isEmpty(line)){break}state.line=line}}};ParserBlock.prototype.parse=function(src,md,env,outTokens){var state;if(!src){return}state=new this.State(src,md,env,outTokens);this.tokenize(state,state.line,state.lineMax)};ParserBlock.prototype.State=require("./rules_block/state_block");module.exports=ParserBlock},{"./ruler":43,"./rules_block/blockquote":44,"./rules_block/code":45,"./rules_block/fence":46,"./rules_block/heading":47,"./rules_block/hr":48,"./rules_block/html_block":49,"./rules_block/lheading":50,"./rules_block/list":51,"./rules_block/paragraph":52,"./rules_block/reference":53,"./rules_block/state_block":54,"./rules_block/table":55}],37:[function(require,module,exports){"use strict";var Ruler=require("./ruler");var _rules=[["normalize",require("./rules_core/normalize")],["block",require("./rules_core/block")],["inline",require("./rules_core/inline")],["linkify",require("./rules_core/linkify")],["replacements",require("./rules_core/replacements")],["smartquotes",require("./rules_core/smartquotes")]];function Core(){this.ruler=new Ruler;for(var i=0;i<_rules.length;i++){this.ruler.push(_rules[i][0],_rules[i][1])}}Core.prototype.process=function(state){var i,l,rules;rules=this.ruler.getRules("");for(i=0,l=rules.length;i<l;i++){rules[i](state)}};Core.prototype.State=require("./rules_core/state_core");module.exports=Core},{"./ruler":43,"./rules_core/block":56,"./rules_core/inline":57,"./rules_core/linkify":58,"./rules_core/normalize":59,"./rules_core/replacements":60,"./rules_core/smartquotes":61,"./rules_core/state_core":62}],38:[function(require,module,exports){"use strict";var Ruler=require("./ruler");var _rules=[["text",require("./rules_inline/text")],["newline",require("./rules_inline/newline")],["escape",require("./rules_inline/escape")],["backticks",require("./rules_inline/backticks")],["strikethrough",require("./rules_inline/strikethrough").tokenize],["emphasis",require("./rules_inline/emphasis").tokenize],["link",require("./rules_inline/link")],["image",require("./rules_inline/image")],["autolink",require("./rules_inline/autolink")],["html_inline",require("./rules_inline/html_inline")],["entity",require("./rules_inline/entity")]];var _rules2=[["balance_pairs",require("./rules_inline/balance_pairs")],["strikethrough",require("./rules_inline/strikethrough").postProcess],["emphasis",require("./rules_inline/emphasis").postProcess],["text_collapse",require("./rules_inline/text_collapse")]];function ParserInline(){var i;this.ruler=new Ruler;for(i=0;i<_rules.length;i++){this.ruler.push(_rules[i][0],_rules[i][1])}this.ruler2=new Ruler;for(i=0;i<_rules2.length;i++){this.ruler2.push(_rules2[i][0],_rules2[i][1])}}ParserInline.prototype.skipToken=function(state){var ok,i,pos=state.pos,rules=this.ruler.getRules(""),len=rules.length,maxNesting=state.md.options.maxNesting,cache=state.cache;if(typeof cache[pos]!=="undefined"){state.pos=cache[pos];return}if(state.level<maxNesting){for(i=0;i<len;i++){state.level++;ok=rules[i](state,true);state.level--;if(ok){break}}}else{state.pos=state.posMax}if(!ok){state.pos++}cache[pos]=state.pos};ParserInline.prototype.tokenize=function(state){var ok,i,rules=this.ruler.getRules(""),len=rules.length,end=state.posMax,maxNesting=state.md.options.maxNesting;while(state.pos<end){if(state.level<maxNesting){for(i=0;i<len;i++){ok=rules[i](state,false);if(ok){break}}}if(ok){if(state.pos>=end){break}continue}state.pending+=state.src[state.pos++]}if(state.pending){state.pushPending()}};ParserInline.prototype.parse=function(str,md,env,outTokens){var i,rules,len;var state=new this.State(str,md,env,outTokens);this.tokenize(state);rules=this.ruler2.getRules("");len=rules.length;for(i=0;i<len;i++){rules[i](state)}};ParserInline.prototype.State=require("./rules_inline/state_inline");module.exports=ParserInline},{"./ruler":43,"./rules_inline/autolink":63,"./rules_inline/backticks":64,"./rules_inline/balance_pairs":65,"./rules_inline/emphasis":66,"./rules_inline/entity":67,"./rules_inline/escape":68,"./rules_inline/html_inline":69,"./rules_inline/image":70,"./rules_inline/link":71,"./rules_inline/newline":72,"./rules_inline/state_inline":73,"./rules_inline/strikethrough":74,"./rules_inline/text":75,"./rules_inline/text_collapse":76}],39:[function(require,module,exports){"use strict";module.exports={options:{html:true,xhtmlOut:true,breaks:false,langPrefix:"language-",linkify:false,typographer:false,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},{}],40:[function(require,module,exports){"use strict";module.exports={options:{html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:false,typographer:false,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},{}],41:[function(require,module,exports){"use strict";module.exports={options:{html:false,xhtmlOut:false,breaks:false,langPrefix:"language-",linkify:false,typographer:false,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}},{}],42:[function(require,module,exports){"use strict";var assign=require("./common/utils").assign;var unescapeAll=require("./common/utils").unescapeAll;var escapeHtml=require("./common/utils").escapeHtml;var default_rules={};default_rules.code_inline=function(tokens,idx,options,env,slf){var token=tokens[idx],attrs=slf.renderAttrs(token);return"<code"+(attrs?" "+attrs:"")+">"+escapeHtml(tokens[idx].content)+"</code>"};default_rules.code_block=function(tokens,idx,options,env,slf){var token=tokens[idx],attrs=slf.renderAttrs(token);return"<pre"+(attrs?" "+attrs:"")+"><code>"+escapeHtml(tokens[idx].content)+"</code></pre>\n"};default_rules.fence=function(tokens,idx,options,env,slf){var token=tokens[idx],info=token.info?unescapeAll(token.info).trim():"",langName="",highlighted,i,tmpAttrs,tmpToken;if(info){langName=info.split(/\s+/g)[0]}if(options.highlight){highlighted=options.highlight(token.content,langName)||escapeHtml(token.content)}else{highlighted=escapeHtml(token.content)}if(highlighted.indexOf("<pre")===0){return highlighted+"\n"}if(info){i=token.attrIndex("class");tmpAttrs=token.attrs?token.attrs.slice():[];if(i<0){tmpAttrs.push(["class",options.langPrefix+langName])}else{tmpAttrs[i]+=" "+options.langPrefix+langName}tmpToken={attrs:tmpAttrs};return"<pre><code"+slf.renderAttrs(tmpToken)+">"+highlighted+"</code></pre>\n"}return"<pre><code"+slf.renderAttrs(token)+">"+highlighted+"</code></pre>\n"};default_rules.image=function(tokens,idx,options,env,slf){var token=tokens[idx];token.attrs[token.attrIndex("alt")][1]=slf.renderInlineAsText(token.children,options,env);return slf.renderToken(tokens,idx,options)};default_rules.hardbreak=function(tokens,idx,options){return options.xhtmlOut?"<br />\n":"<br>\n"};default_rules.softbreak=function(tokens,idx,options){return options.breaks?options.xhtmlOut?"<br />\n":"<br>\n":"\n"};default_rules.text=function(tokens,idx){return escapeHtml(tokens[idx].content)};default_rules.html_block=function(tokens,idx){return tokens[idx].content};default_rules.html_inline=function(tokens,idx){return tokens[idx].content};function Renderer(){this.rules=assign({},default_rules)}Renderer.prototype.renderAttrs=function renderAttrs(token){var i,l,result;if(!token.attrs){return""}result="";for(i=0,l=token.attrs.length;i<l;i++){result+=" "+escapeHtml(token.attrs[i][0])+'="'+escapeHtml(token.attrs[i][1])+'"'}return result};Renderer.prototype.renderToken=function renderToken(tokens,idx,options){var nextToken,result="",needLf=false,token=tokens[idx];if(token.hidden){return""}if(token.block&&token.nesting!==-1&&idx&&tokens[idx-1].hidden){result+="\n"}result+=(token.nesting===-1?"</":"<")+token.tag;result+=this.renderAttrs(token);if(token.nesting===0&&options.xhtmlOut){result+=" /"}if(token.block){needLf=true;if(token.nesting===1){if(idx+1<tokens.length){nextToken=tokens[idx+1];if(nextToken.type==="inline"||nextToken.hidden){needLf=false}else if(nextToken.nesting===-1&&nextToken.tag===token.tag){needLf=false}}}}result+=needLf?">\n":">";return result};Renderer.prototype.renderInline=function(tokens,options,env){var type,result="",rules=this.rules;for(var i=0,len=tokens.length;i<len;i++){type=tokens[i].type;if(typeof rules[type]!=="undefined"){result+=rules[type](tokens,i,options,env,this)}else{result+=this.renderToken(tokens,i,options)}}return result};Renderer.prototype.renderInlineAsText=function(tokens,options,env){var result="";for(var i=0,len=tokens.length;i<len;i++){if(tokens[i].type==="text"){result+=tokens[i].content}else if(tokens[i].type==="image"){result+=this.renderInlineAsText(tokens[i].children,options,env)}}return result};Renderer.prototype.render=function(tokens,options,env){var i,len,type,result="",rules=this.rules;for(i=0,len=tokens.length;i<len;i++){type=tokens[i].type;if(type==="inline"){result+=this.renderInline(tokens[i].children,options,env)}else if(typeof rules[type]!=="undefined"){result+=rules[tokens[i].type](tokens,i,options,env,this)}else{result+=this.renderToken(tokens,i,options,env)}}return result};module.exports=Renderer},{"./common/utils":30}],43:[function(require,module,exports){"use strict";function Ruler(){this.__rules__=[];this.__cache__=null}Ruler.prototype.__find__=function(name){for(var i=0;i<this.__rules__.length;i++){if(this.__rules__[i].name===name){return i}}return-1};Ruler.prototype.__compile__=function(){var self=this;var chains=[""];self.__rules__.forEach(function(rule){if(!rule.enabled){return}rule.alt.forEach(function(altName){if(chains.indexOf(altName)<0){chains.push(altName)}})});self.__cache__={};chains.forEach(function(chain){self.__cache__[chain]=[];self.__rules__.forEach(function(rule){if(!rule.enabled){return}if(chain&&rule.alt.indexOf(chain)<0){return}self.__cache__[chain].push(rule.fn)})})};Ruler.prototype.at=function(name,fn,options){var index=this.__find__(name);var opt=options||{};if(index===-1){throw new Error("Parser rule not found: "+name)}this.__rules__[index].fn=fn;this.__rules__[index].alt=opt.alt||[];this.__cache__=null};Ruler.prototype.before=function(beforeName,ruleName,fn,options){var index=this.__find__(beforeName);var opt=options||{};if(index===-1){throw new Error("Parser rule not found: "+beforeName)}this.__rules__.splice(index,0,{name:ruleName,enabled:true,fn:fn,alt:opt.alt||[]});this.__cache__=null};Ruler.prototype.after=function(afterName,ruleName,fn,options){var index=this.__find__(afterName);var opt=options||{};if(index===-1){throw new Error("Parser rule not found: "+afterName)}this.__rules__.splice(index+1,0,{name:ruleName,enabled:true,fn:fn,alt:opt.alt||[]});this.__cache__=null};Ruler.prototype.push=function(ruleName,fn,options){var opt=options||{};this.__rules__.push({name:ruleName,enabled:true,fn:fn,alt:opt.alt||[]});this.__cache__=null};Ruler.prototype.enable=function(list,ignoreInvalid){if(!Array.isArray(list)){list=[list]}var result=[];list.forEach(function(name){var idx=this.__find__(name);if(idx<0){if(ignoreInvalid){return}throw new Error("Rules manager: invalid rule name "+name)}this.__rules__[idx].enabled=true;result.push(name)},this);this.__cache__=null;return result};Ruler.prototype.enableOnly=function(list,ignoreInvalid){if(!Array.isArray(list)){list=[list]}this.__rules__.forEach(function(rule){rule.enabled=false});this.enable(list,ignoreInvalid)};Ruler.prototype.disable=function(list,ignoreInvalid){if(!Array.isArray(list)){list=[list]}var result=[];list.forEach(function(name){var idx=this.__find__(name);if(idx<0){if(ignoreInvalid){return}throw new Error("Rules manager: invalid rule name "+name)}this.__rules__[idx].enabled=false;result.push(name)},this);this.__cache__=null;return result};Ruler.prototype.getRules=function(chainName){if(this.__cache__===null){this.__compile__()}return this.__cache__[chainName]||[]};module.exports=Ruler},{}],44:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;module.exports=function blockquote(state,startLine,endLine,silent){var nextLine,lastLineEmpty,oldTShift,oldSCount,oldBMarks,oldIndent,oldParentType,lines,initial,offset,ch,terminatorRules,token,i,l,terminate,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine];if(state.src.charCodeAt(pos++)!==62){return false}if(silent){return true}if(state.src.charCodeAt(pos)===32){pos++}oldIndent=state.blkIndent;state.blkIndent=0;initial=offset=state.sCount[startLine]+pos-(state.bMarks[startLine]+state.tShift[startLine]);oldBMarks=[state.bMarks[startLine]];state.bMarks[startLine]=pos;while(pos<max){ch=state.src.charCodeAt(pos);if(isSpace(ch)){if(ch===9){offset+=4-offset%4}else{offset++}}else{break}pos++}lastLineEmpty=pos>=max;oldSCount=[state.sCount[startLine]];state.sCount[startLine]=offset-initial;oldTShift=[state.tShift[startLine]];state.tShift[startLine]=pos-state.bMarks[startLine];terminatorRules=state.md.block.ruler.getRules("blockquote");for(nextLine=startLine+1;nextLine<endLine;nextLine++){if(state.sCount[nextLine]<oldIndent){break}pos=state.bMarks[nextLine]+state.tShift[nextLine];max=state.eMarks[nextLine];if(pos>=max){break}if(state.src.charCodeAt(pos++)===62){if(state.src.charCodeAt(pos)===32){pos++}initial=offset=state.sCount[nextLine]+pos-(state.bMarks[nextLine]+state.tShift[nextLine]);oldBMarks.push(state.bMarks[nextLine]);state.bMarks[nextLine]=pos;while(pos<max){ch=state.src.charCodeAt(pos);if(isSpace(ch)){if(ch===9){offset+=4-offset%4}else{offset++}}else{break}pos++}lastLineEmpty=pos>=max;oldSCount.push(state.sCount[nextLine]);state.sCount[nextLine]=offset-initial;oldTShift.push(state.tShift[nextLine]);state.tShift[nextLine]=pos-state.bMarks[nextLine];continue}if(lastLineEmpty){break}terminate=false;for(i=0,l=terminatorRules.length;i<l;i++){if(terminatorRules[i](state,nextLine,endLine,true)){terminate=true;break}}if(terminate){break}oldBMarks.push(state.bMarks[nextLine]);oldTShift.push(state.tShift[nextLine]);oldSCount.push(state.sCount[nextLine]);state.sCount[nextLine]=-1}oldParentType=state.parentType;state.parentType="blockquote";token=state.push("blockquote_open","blockquote",1);token.markup=">";token.map=lines=[startLine,0];state.md.block.tokenize(state,startLine,nextLine);token=state.push("blockquote_close","blockquote",-1);token.markup=">";state.parentType=oldParentType;lines[1]=state.line;for(i=0;i<oldTShift.length;i++){state.bMarks[i+startLine]=oldBMarks[i];state.tShift[i+startLine]=oldTShift[i];state.sCount[i+startLine]=oldSCount[i]}state.blkIndent=oldIndent;return true}},{"../common/utils":30}],45:[function(require,module,exports){"use strict";module.exports=function code(state,startLine,endLine){var nextLine,last,token,emptyLines=0;if(state.sCount[startLine]-state.blkIndent<4){return false}last=nextLine=startLine+1;while(nextLine<endLine){if(state.isEmpty(nextLine)){emptyLines++;if(emptyLines>=2&&state.parentType==="list"){break}nextLine++;continue}emptyLines=0;if(state.sCount[nextLine]-state.blkIndent>=4){nextLine++;last=nextLine;continue}break}state.line=last;token=state.push("code_block","code",0);token.content=state.getLines(startLine,last,4+state.blkIndent,true);token.map=[startLine,state.line];return true}},{}],46:[function(require,module,exports){"use strict";module.exports=function fence(state,startLine,endLine,silent){var marker,len,params,nextLine,mem,token,markup,haveEndMarker=false,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine];if(pos+3>max){return false}marker=state.src.charCodeAt(pos);if(marker!==126&&marker!==96){return false}mem=pos;pos=state.skipChars(pos,marker);len=pos-mem;if(len<3){return false}markup=state.src.slice(mem,pos);params=state.src.slice(pos,max);if(params.indexOf("`")>=0){return false}if(silent){return true}nextLine=startLine;for(;;){nextLine++;if(nextLine>=endLine){break}pos=mem=state.bMarks[nextLine]+state.tShift[nextLine];max=state.eMarks[nextLine];if(pos<max&&state.sCount[nextLine]<state.blkIndent){break}if(state.src.charCodeAt(pos)!==marker){continue}if(state.sCount[nextLine]-state.blkIndent>=4){continue}pos=state.skipChars(pos,marker);if(pos-mem<len){continue}pos=state.skipSpaces(pos);if(pos<max){continue}haveEndMarker=true;break}len=state.sCount[startLine];state.line=nextLine+(haveEndMarker?1:0);token=state.push("fence","code",0);token.info=params;token.content=state.getLines(startLine+1,nextLine,len,true);token.markup=markup;token.map=[startLine,state.line];return true}},{}],47:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;module.exports=function heading(state,startLine,endLine,silent){var ch,level,tmp,token,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine];ch=state.src.charCodeAt(pos);if(ch!==35||pos>=max){return false}level=1;ch=state.src.charCodeAt(++pos);while(ch===35&&pos<max&&level<=6){level++;ch=state.src.charCodeAt(++pos)}if(level>6||pos<max&&ch!==32){return false}if(silent){return true}max=state.skipSpacesBack(max,pos);tmp=state.skipCharsBack(max,35,pos);if(tmp>pos&&isSpace(state.src.charCodeAt(tmp-1))){max=tmp}state.line=startLine+1;token=state.push("heading_open","h"+String(level),1);token.markup="########".slice(0,level);token.map=[startLine,state.line];token=state.push("inline","",0);token.content=state.src.slice(pos,max).trim();token.map=[startLine,state.line];token.children=[];token=state.push("heading_close","h"+String(level),-1);token.markup="########".slice(0,level);return true}},{"../common/utils":30}],48:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;module.exports=function hr(state,startLine,endLine,silent){var marker,cnt,ch,token,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine];marker=state.src.charCodeAt(pos++);if(marker!==42&&marker!==45&&marker!==95){return false}cnt=1;while(pos<max){ch=state.src.charCodeAt(pos++);if(ch!==marker&&!isSpace(ch)){return false}if(ch===marker){cnt++}}if(cnt<3){return false}if(silent){return true}state.line=startLine+1;token=state.push("hr","hr",0);token.map=[startLine,state.line];token.markup=Array(cnt+1).join(String.fromCharCode(marker));return true}},{"../common/utils":30}],49:[function(require,module,exports){"use strict";var block_names=require("../common/html_blocks");var HTML_OPEN_CLOSE_TAG_RE=require("../common/html_re").HTML_OPEN_CLOSE_TAG_RE;var HTML_SEQUENCES=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,true],[/^<!--/,/-->/,true],[/^<\?/,/\?>/,true],[/^<![A-Z]/,/>/,true],[/^<!\[CDATA\[/,/\]\]>/,true],[new RegExp("^</?("+block_names.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,true],[new RegExp(HTML_OPEN_CLOSE_TAG_RE.source+"\\s*$"),/^$/,false]];module.exports=function html_block(state,startLine,endLine,silent){var i,nextLine,token,lineText,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine];if(!state.md.options.html){return false}if(state.src.charCodeAt(pos)!==60){return false}lineText=state.src.slice(pos,max);for(i=0;i<HTML_SEQUENCES.length;i++){if(HTML_SEQUENCES[i][0].test(lineText)){break}}if(i===HTML_SEQUENCES.length){return false}if(silent){return HTML_SEQUENCES[i][2]}nextLine=startLine+1;if(!HTML_SEQUENCES[i][1].test(lineText)){for(;nextLine<endLine;nextLine++){if(state.sCount[nextLine]<state.blkIndent){break}pos=state.bMarks[nextLine]+state.tShift[nextLine];max=state.eMarks[nextLine];lineText=state.src.slice(pos,max);if(HTML_SEQUENCES[i][1].test(lineText)){if(lineText.length!==0){nextLine++}break}}}state.line=nextLine;token=state.push("html_block","",0);token.map=[startLine,nextLine];token.content=state.getLines(startLine,nextLine,state.blkIndent,true);return true}},{"../common/html_blocks":28,"../common/html_re":29}],50:[function(require,module,exports){"use strict";module.exports=function lheading(state,startLine,endLine){var content,terminate,i,l,token,pos,max,level,marker,nextLine=startLine+1,terminatorRules=state.md.block.ruler.getRules("paragraph");for(;nextLine<endLine&&!state.isEmpty(nextLine);nextLine++){if(state.sCount[nextLine]-state.blkIndent>3){continue}if(state.sCount[nextLine]>=state.blkIndent){pos=state.bMarks[nextLine]+state.tShift[nextLine];max=state.eMarks[nextLine];if(pos<max){marker=state.src.charCodeAt(pos);if(marker===45||marker===61){pos=state.skipChars(pos,marker);pos=state.skipSpaces(pos);if(pos>=max){level=marker===61?1:2;break}}}}if(state.sCount[nextLine]<0){continue}terminate=false;for(i=0,l=terminatorRules.length;i<l;i++){if(terminatorRules[i](state,nextLine,endLine,true)){terminate=true;break}}if(terminate){break}}if(!level){return false}content=state.getLines(startLine,nextLine,state.blkIndent,false).trim();state.line=nextLine+1;token=state.push("heading_open","h"+String(level),1);token.markup=String.fromCharCode(marker);token.map=[startLine,state.line];token=state.push("inline","",0);token.content=content;token.map=[startLine,state.line-1];token.children=[];token=state.push("heading_close","h"+String(level),-1);token.markup=String.fromCharCode(marker);return true}},{}],51:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;function skipBulletListMarker(state,startLine){var marker,pos,max,ch;pos=state.bMarks[startLine]+state.tShift[startLine];max=state.eMarks[startLine];marker=state.src.charCodeAt(pos++);if(marker!==42&&marker!==45&&marker!==43){return-1}if(pos<max){ch=state.src.charCodeAt(pos);if(!isSpace(ch)){return-1}}return pos}function skipOrderedListMarker(state,startLine){var ch,start=state.bMarks[startLine]+state.tShift[startLine],pos=start,max=state.eMarks[startLine];if(pos+1>=max){return-1}ch=state.src.charCodeAt(pos++);if(ch<48||ch>57){return-1}for(;;){if(pos>=max){return-1}ch=state.src.charCodeAt(pos++);if(ch>=48&&ch<=57){if(pos-start>=10){return-1}continue}if(ch===41||ch===46){break}return-1}if(pos<max){ch=state.src.charCodeAt(pos);if(!isSpace(ch)){return-1}}return pos}function markTightParagraphs(state,idx){var i,l,level=state.level+2;for(i=idx+2,l=state.tokens.length-2;i<l;i++){if(state.tokens[i].level===level&&state.tokens[i].type==="paragraph_open"){state.tokens[i+2].hidden=true;state.tokens[i].hidden=true;i+=2}}}module.exports=function list(state,startLine,endLine,silent){var nextLine,initial,offset,indent,oldTShift,oldIndent,oldLIndent,oldTight,oldParentType,start,posAfterMarker,ch,pos,max,indentAfterMarker,markerValue,markerCharCode,isOrdered,contentStart,listTokIdx,prevEmptyEnd,listLines,itemLines,tight=true,terminatorRules,token,i,l,terminate;if((posAfterMarker=skipOrderedListMarker(state,startLine))>=0){isOrdered=true}else if((posAfterMarker=skipBulletListMarker(state,startLine))>=0){isOrdered=false}else{return false}markerCharCode=state.src.charCodeAt(posAfterMarker-1);if(silent){return true}listTokIdx=state.tokens.length;if(isOrdered){start=state.bMarks[startLine]+state.tShift[startLine];markerValue=Number(state.src.substr(start,posAfterMarker-start-1));token=state.push("ordered_list_open","ol",1);if(markerValue!==1){token.attrs=[["start",markerValue]]}}else{token=state.push("bullet_list_open","ul",1)}token.map=listLines=[startLine,0];token.markup=String.fromCharCode(markerCharCode);nextLine=startLine;prevEmptyEnd=false;terminatorRules=state.md.block.ruler.getRules("list");while(nextLine<endLine){pos=posAfterMarker;max=state.eMarks[nextLine];initial=offset=state.sCount[nextLine]+posAfterMarker-(state.bMarks[startLine]+state.tShift[startLine]);while(pos<max){ch=state.src.charCodeAt(pos);if(isSpace(ch)){if(ch===9){offset+=4-offset%4}else{offset++}}else{break}pos++}contentStart=pos;if(contentStart>=max){indentAfterMarker=1}else{indentAfterMarker=offset-initial}if(indentAfterMarker>4){indentAfterMarker=1}indent=initial+indentAfterMarker;token=state.push("list_item_open","li",1);token.markup=String.fromCharCode(markerCharCode);token.map=itemLines=[startLine,0];oldIndent=state.blkIndent;oldTight=state.tight;oldTShift=state.tShift[startLine];oldLIndent=state.sCount[startLine];oldParentType=state.parentType;state.blkIndent=indent;state.tight=true;state.parentType="list";state.tShift[startLine]=contentStart-state.bMarks[startLine];state.sCount[startLine]=offset;if(contentStart>=max&&state.isEmpty(startLine+1)){state.line=Math.min(state.line+2,endLine)}else{state.md.block.tokenize(state,startLine,endLine,true)}if(!state.tight||prevEmptyEnd){tight=false}prevEmptyEnd=state.line-startLine>1&&state.isEmpty(state.line-1);state.blkIndent=oldIndent;state.tShift[startLine]=oldTShift;state.sCount[startLine]=oldLIndent;state.tight=oldTight;state.parentType=oldParentType;token=state.push("list_item_close","li",-1);token.markup=String.fromCharCode(markerCharCode);nextLine=startLine=state.line;itemLines[1]=nextLine;contentStart=state.bMarks[startLine];if(nextLine>=endLine){break}if(state.isEmpty(nextLine)){break}if(state.sCount[nextLine]<state.blkIndent){break}terminate=false;for(i=0,l=terminatorRules.length;i<l;i++){if(terminatorRules[i](state,nextLine,endLine,true)){terminate=true;break}}if(terminate){break}if(isOrdered){posAfterMarker=skipOrderedListMarker(state,nextLine);if(posAfterMarker<0){break}}else{posAfterMarker=skipBulletListMarker(state,nextLine);if(posAfterMarker<0){break}}if(markerCharCode!==state.src.charCodeAt(posAfterMarker-1)){break}}if(isOrdered){token=state.push("ordered_list_close","ol",-1)}else{token=state.push("bullet_list_close","ul",-1)}token.markup=String.fromCharCode(markerCharCode);listLines[1]=nextLine;state.line=nextLine;if(tight){markTightParagraphs(state,listTokIdx)}return true}},{"../common/utils":30}],52:[function(require,module,exports){"use strict";module.exports=function paragraph(state,startLine){var content,terminate,i,l,token,nextLine=startLine+1,terminatorRules=state.md.block.ruler.getRules("paragraph"),endLine=state.lineMax;for(;nextLine<endLine&&!state.isEmpty(nextLine);nextLine++){if(state.sCount[nextLine]-state.blkIndent>3){continue}if(state.sCount[nextLine]<0){continue}terminate=false;for(i=0,l=terminatorRules.length;i<l;i++){if(terminatorRules[i](state,nextLine,endLine,true)){terminate=true;break}}if(terminate){break}}content=state.getLines(startLine,nextLine,state.blkIndent,false).trim();state.line=nextLine;token=state.push("paragraph_open","p",1);token.map=[startLine,state.line];token=state.push("inline","",0);token.content=content;token.map=[startLine,state.line];token.children=[];token=state.push("paragraph_close","p",-1);return true}},{}],53:[function(require,module,exports){"use strict";var parseLinkDestination=require("../helpers/parse_link_destination");var parseLinkTitle=require("../helpers/parse_link_title");var normalizeReference=require("../common/utils").normalizeReference;var isSpace=require("../common/utils").isSpace;module.exports=function reference(state,startLine,_endLine,silent){var ch,destEndPos,destEndLineNo,endLine,href,i,l,label,labelEnd,res,start,str,terminate,terminatorRules,title,lines=0,pos=state.bMarks[startLine]+state.tShift[startLine],max=state.eMarks[startLine],nextLine=startLine+1;if(state.src.charCodeAt(pos)!==91){return false}while(++pos<max){if(state.src.charCodeAt(pos)===93&&state.src.charCodeAt(pos-1)!==92){if(pos+1===max){return false}if(state.src.charCodeAt(pos+1)!==58){return false}break}}endLine=state.lineMax;terminatorRules=state.md.block.ruler.getRules("reference");for(;nextLine<endLine&&!state.isEmpty(nextLine);nextLine++){if(state.sCount[nextLine]-state.blkIndent>3){continue}if(state.sCount[nextLine]<0){continue}terminate=false;for(i=0,l=terminatorRules.length;i<l;i++){if(terminatorRules[i](state,nextLine,endLine,true)){terminate=true;break}}if(terminate){break}}str=state.getLines(startLine,nextLine,state.blkIndent,false).trim();max=str.length;for(pos=1;pos<max;pos++){ch=str.charCodeAt(pos);if(ch===91){return false}else if(ch===93){labelEnd=pos;break}else if(ch===10){lines++}else if(ch===92){pos++;if(pos<max&&str.charCodeAt(pos)===10){lines++}}}if(labelEnd<0||str.charCodeAt(labelEnd+1)!==58){return false}for(pos=labelEnd+2;pos<max;pos++){ch=str.charCodeAt(pos);if(ch===10){lines++}else if(isSpace(ch)){}else{break}}res=parseLinkDestination(str,pos,max);if(!res.ok){return false}href=state.md.normalizeLink(res.str);if(!state.md.validateLink(href)){return false}pos=res.pos;lines+=res.lines;destEndPos=pos;destEndLineNo=lines;start=pos;for(;pos<max;pos++){ch=str.charCodeAt(pos);if(ch===10){lines++}else if(isSpace(ch)){}else{break}}res=parseLinkTitle(str,pos,max);if(pos<max&&start!==pos&&res.ok){title=res.str;pos=res.pos;lines+=res.lines}else{title="";pos=destEndPos;lines=destEndLineNo}while(pos<max){ch=str.charCodeAt(pos);if(!isSpace(ch)){break}pos++}if(pos<max&&str.charCodeAt(pos)!==10){if(title){title="";pos=destEndPos;lines=destEndLineNo;while(pos<max){ch=str.charCodeAt(pos);if(!isSpace(ch)){break}pos++}}}if(pos<max&&str.charCodeAt(pos)!==10){return false}label=normalizeReference(str.slice(1,labelEnd));if(!label){return false}if(silent){return true}if(typeof state.env.references==="undefined"){state.env.references={}}if(typeof state.env.references[label]==="undefined"){state.env.references[label]={title:title,href:href}}state.line=startLine+lines+1;return true}},{"../common/utils":30,"../helpers/parse_link_destination":32,
"../helpers/parse_link_title":34}],54:[function(require,module,exports){"use strict";var Token=require("../token");var isSpace=require("../common/utils").isSpace;function StateBlock(src,md,env,tokens){var ch,s,start,pos,len,indent,offset,indent_found;this.src=src;this.md=md;this.env=env;this.tokens=tokens;this.bMarks=[];this.eMarks=[];this.tShift=[];this.sCount=[];this.blkIndent=0;this.line=0;this.lineMax=0;this.tight=false;this.parentType="root";this.ddIndent=-1;this.level=0;this.result="";s=this.src;indent_found=false;for(start=pos=indent=offset=0,len=s.length;pos<len;pos++){ch=s.charCodeAt(pos);if(!indent_found){if(isSpace(ch)){indent++;if(ch===9){offset+=4-offset%4}else{offset++}continue}else{indent_found=true}}if(ch===10||pos===len-1){if(ch!==10){pos++}this.bMarks.push(start);this.eMarks.push(pos);this.tShift.push(indent);this.sCount.push(offset);indent_found=false;indent=0;offset=0;start=pos+1}}this.bMarks.push(s.length);this.eMarks.push(s.length);this.tShift.push(0);this.sCount.push(0);this.lineMax=this.bMarks.length-1}StateBlock.prototype.push=function(type,tag,nesting){var token=new Token(type,tag,nesting);token.block=true;if(nesting<0){this.level--}token.level=this.level;if(nesting>0){this.level++}this.tokens.push(token);return token};StateBlock.prototype.isEmpty=function isEmpty(line){return this.bMarks[line]+this.tShift[line]>=this.eMarks[line]};StateBlock.prototype.skipEmptyLines=function skipEmptyLines(from){for(var max=this.lineMax;from<max;from++){if(this.bMarks[from]+this.tShift[from]<this.eMarks[from]){break}}return from};StateBlock.prototype.skipSpaces=function skipSpaces(pos){var ch;for(var max=this.src.length;pos<max;pos++){ch=this.src.charCodeAt(pos);if(!isSpace(ch)){break}}return pos};StateBlock.prototype.skipSpacesBack=function skipSpacesBack(pos,min){if(pos<=min){return pos}while(pos>min){if(!isSpace(this.src.charCodeAt(--pos))){return pos+1}}return pos};StateBlock.prototype.skipChars=function skipChars(pos,code){for(var max=this.src.length;pos<max;pos++){if(this.src.charCodeAt(pos)!==code){break}}return pos};StateBlock.prototype.skipCharsBack=function skipCharsBack(pos,code,min){if(pos<=min){return pos}while(pos>min){if(code!==this.src.charCodeAt(--pos)){return pos+1}}return pos};StateBlock.prototype.getLines=function getLines(begin,end,indent,keepLastLF){var i,lineIndent,ch,first,last,queue,lineStart,line=begin;if(begin>=end){return""}queue=new Array(end-begin);for(i=0;line<end;line++,i++){lineIndent=0;lineStart=first=this.bMarks[line];if(line+1<end||keepLastLF){last=this.eMarks[line]+1}else{last=this.eMarks[line]}while(first<last&&lineIndent<indent){ch=this.src.charCodeAt(first);if(isSpace(ch)){if(ch===9){lineIndent+=4-lineIndent%4}else{lineIndent++}}else if(first-lineStart<this.tShift[line]){lineIndent++}else{break}first++}queue[i]=this.src.slice(first,last)}return queue.join("")};StateBlock.prototype.Token=Token;module.exports=StateBlock},{"../common/utils":30,"../token":77}],55:[function(require,module,exports){"use strict";function getLine(state,line){var pos=state.bMarks[line]+state.blkIndent,max=state.eMarks[line];return state.src.substr(pos,max-pos)}function escapedSplit(str){var result=[],pos=0,max=str.length,ch,escapes=0,lastPos=0,backTicked=false,lastBackTick=0;ch=str.charCodeAt(pos);while(pos<max){if(ch===96&&escapes%2===0){backTicked=!backTicked;lastBackTick=pos}else if(ch===124&&escapes%2===0&&!backTicked){result.push(str.substring(lastPos,pos));lastPos=pos+1}else if(ch===92){escapes++}else{escapes=0}pos++;if(pos===max&&backTicked){backTicked=false;pos=lastBackTick+1}ch=str.charCodeAt(pos)}result.push(str.substring(lastPos));return result}module.exports=function table(state,startLine,endLine,silent){var ch,lineText,pos,i,nextLine,columns,columnCount,token,aligns,t,tableLines,tbodyLines;if(startLine+2>endLine){return false}nextLine=startLine+1;if(state.sCount[nextLine]<state.blkIndent){return false}pos=state.bMarks[nextLine]+state.tShift[nextLine];if(pos>=state.eMarks[nextLine]){return false}ch=state.src.charCodeAt(pos);if(ch!==124&&ch!==45&&ch!==58){return false}lineText=getLine(state,startLine+1);if(!/^[-:| ]+$/.test(lineText)){return false}columns=lineText.split("|");aligns=[];for(i=0;i<columns.length;i++){t=columns[i].trim();if(!t){if(i===0||i===columns.length-1){continue}else{return false}}if(!/^:?-+:?$/.test(t)){return false}if(t.charCodeAt(t.length-1)===58){aligns.push(t.charCodeAt(0)===58?"center":"right")}else if(t.charCodeAt(0)===58){aligns.push("left")}else{aligns.push("")}}lineText=getLine(state,startLine).trim();if(lineText.indexOf("|")===-1){return false}columns=escapedSplit(lineText.replace(/^\||\|$/g,""));columnCount=columns.length;if(columnCount>aligns.length){return false}if(silent){return true}token=state.push("table_open","table",1);token.map=tableLines=[startLine,0];token=state.push("thead_open","thead",1);token.map=[startLine,startLine+1];token=state.push("tr_open","tr",1);token.map=[startLine,startLine+1];for(i=0;i<columns.length;i++){token=state.push("th_open","th",1);token.map=[startLine,startLine+1];if(aligns[i]){token.attrs=[["style","text-align:"+aligns[i]]]}token=state.push("inline","",0);token.content=columns[i].trim();token.map=[startLine,startLine+1];token.children=[];token=state.push("th_close","th",-1)}token=state.push("tr_close","tr",-1);token=state.push("thead_close","thead",-1);token=state.push("tbody_open","tbody",1);token.map=tbodyLines=[startLine+2,0];for(nextLine=startLine+2;nextLine<endLine;nextLine++){if(state.sCount[nextLine]<state.blkIndent){break}lineText=getLine(state,nextLine);if(lineText.indexOf("|")===-1){break}columns=escapedSplit(lineText.replace(/^\||\|\s*$/g,""));token=state.push("tr_open","tr",1);for(i=0;i<columnCount;i++){token=state.push("td_open","td",1);if(aligns[i]){token.attrs=[["style","text-align:"+aligns[i]]]}token=state.push("inline","",0);token.content=columns[i]?columns[i].trim():"";token.children=[];token=state.push("td_close","td",-1)}token=state.push("tr_close","tr",-1)}token=state.push("tbody_close","tbody",-1);token=state.push("table_close","table",-1);tableLines[1]=tbodyLines[1]=nextLine;state.line=nextLine;return true}},{}],56:[function(require,module,exports){"use strict";module.exports=function block(state){var token;if(state.inlineMode){token=new state.Token("inline","",0);token.content=state.src;token.map=[0,1];token.children=[];state.tokens.push(token)}else{state.md.block.parse(state.src,state.md,state.env,state.tokens)}}},{}],57:[function(require,module,exports){"use strict";module.exports=function inline(state){var tokens=state.tokens,tok,i,l;for(i=0,l=tokens.length;i<l;i++){tok=tokens[i];if(tok.type==="inline"){state.md.inline.parse(tok.content,state.md,state.env,tok.children)}}}},{}],58:[function(require,module,exports){"use strict";var arrayReplaceAt=require("../common/utils").arrayReplaceAt;function isLinkOpen(str){return/^<a[>\s]/i.test(str)}function isLinkClose(str){return/^<\/a\s*>/i.test(str)}module.exports=function linkify(state){var i,j,l,tokens,token,currentToken,nodes,ln,text,pos,lastPos,level,htmlLinkLevel,url,fullUrl,urlText,blockTokens=state.tokens,links;if(!state.md.options.linkify){return}for(j=0,l=blockTokens.length;j<l;j++){if(blockTokens[j].type!=="inline"||!state.md.linkify.pretest(blockTokens[j].content)){continue}tokens=blockTokens[j].children;htmlLinkLevel=0;for(i=tokens.length-1;i>=0;i--){currentToken=tokens[i];if(currentToken.type==="link_close"){i--;while(tokens[i].level!==currentToken.level&&tokens[i].type!=="link_open"){i--}continue}if(currentToken.type==="html_inline"){if(isLinkOpen(currentToken.content)&&htmlLinkLevel>0){htmlLinkLevel--}if(isLinkClose(currentToken.content)){htmlLinkLevel++}}if(htmlLinkLevel>0){continue}if(currentToken.type==="text"&&state.md.linkify.test(currentToken.content)){text=currentToken.content;links=state.md.linkify.match(text);nodes=[];level=currentToken.level;lastPos=0;for(ln=0;ln<links.length;ln++){url=links[ln].url;fullUrl=state.md.normalizeLink(url);if(!state.md.validateLink(fullUrl)){continue}urlText=links[ln].text;if(!links[ln].schema){urlText=state.md.normalizeLinkText("http://"+urlText).replace(/^http:\/\//,"")}else if(links[ln].schema==="mailto:"&&!/^mailto:/i.test(urlText)){urlText=state.md.normalizeLinkText("mailto:"+urlText).replace(/^mailto:/,"")}else{urlText=state.md.normalizeLinkText(urlText)}pos=links[ln].index;if(pos>lastPos){token=new state.Token("text","",0);token.content=text.slice(lastPos,pos);token.level=level;nodes.push(token)}token=new state.Token("link_open","a",1);token.attrs=[["href",fullUrl]];token.level=level++;token.markup="linkify";token.info="auto";nodes.push(token);token=new state.Token("text","",0);token.content=urlText;token.level=level;nodes.push(token);token=new state.Token("link_close","a",-1);token.level=--level;token.markup="linkify";token.info="auto";nodes.push(token);lastPos=links[ln].lastIndex}if(lastPos<text.length){token=new state.Token("text","",0);token.content=text.slice(lastPos);token.level=level;nodes.push(token)}blockTokens[j].children=tokens=arrayReplaceAt(tokens,i,nodes)}}}}},{"../common/utils":30}],59:[function(require,module,exports){"use strict";var NEWLINES_RE=/\r[\n\u0085]?|[\u2424\u2028\u0085]/g;var NULL_RE=/\u0000/g;module.exports=function inline(state){var str;str=state.src.replace(NEWLINES_RE,"\n");str=str.replace(NULL_RE,"");state.src=str}},{}],60:[function(require,module,exports){"use strict";var RARE_RE=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/;var SCOPED_ABBR_TEST_RE=/\((c|tm|r|p)\)/i;var SCOPED_ABBR_RE=/\((c|tm|r|p)\)/gi;var SCOPED_ABBR={c:"",r:"",p:"",tm:""};function replaceFn(match,name){return SCOPED_ABBR[name.toLowerCase()]}function replace_scoped(inlineTokens){var i,token;for(i=inlineTokens.length-1;i>=0;i--){token=inlineTokens[i];if(token.type==="text"){token.content=token.content.replace(SCOPED_ABBR_RE,replaceFn)}}}function replace_rare(inlineTokens){var i,token;for(i=inlineTokens.length-1;i>=0;i--){token=inlineTokens[i];if(token.type==="text"){if(RARE_RE.test(token.content)){token.content=token.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1$2").replace(/(^|\s)--(\s|$)/gm,"$1$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1$2")}}}}module.exports=function replace(state){var blkIdx;if(!state.md.options.typographer){return}for(blkIdx=state.tokens.length-1;blkIdx>=0;blkIdx--){if(state.tokens[blkIdx].type!=="inline"){continue}if(SCOPED_ABBR_TEST_RE.test(state.tokens[blkIdx].content)){replace_scoped(state.tokens[blkIdx].children)}if(RARE_RE.test(state.tokens[blkIdx].content)){replace_rare(state.tokens[blkIdx].children)}}}},{}],61:[function(require,module,exports){"use strict";var isWhiteSpace=require("../common/utils").isWhiteSpace;var isPunctChar=require("../common/utils").isPunctChar;var isMdAsciiPunct=require("../common/utils").isMdAsciiPunct;var QUOTE_TEST_RE=/['"]/;var QUOTE_RE=/['"]/g;var APOSTROPHE="";function replaceAt(str,index,ch){return str.substr(0,index)+ch+str.substr(index+1)}function process_inlines(tokens,state){var i,token,text,t,pos,max,thisLevel,item,lastChar,nextChar,isLastPunctChar,isNextPunctChar,isLastWhiteSpace,isNextWhiteSpace,canOpen,canClose,j,isSingle,stack,openQuote,closeQuote;stack=[];for(i=0;i<tokens.length;i++){token=tokens[i];thisLevel=tokens[i].level;for(j=stack.length-1;j>=0;j--){if(stack[j].level<=thisLevel){break}}stack.length=j+1;if(token.type!=="text"){continue}text=token.content;pos=0;max=text.length;OUTER:while(pos<max){QUOTE_RE.lastIndex=pos;t=QUOTE_RE.exec(text);if(!t){break}canOpen=canClose=true;pos=t.index+1;isSingle=t[0]==="'";lastChar=32;if(t.index-1>=0){lastChar=text.charCodeAt(t.index-1)}else{for(j=i-1;j>=0;j--){if(tokens[j].type!=="text"){continue}lastChar=tokens[j].content.charCodeAt(tokens[j].content.length-1);break}}nextChar=32;if(pos<max){nextChar=text.charCodeAt(pos)}else{for(j=i+1;j<tokens.length;j++){if(tokens[j].type!=="text"){continue}nextChar=tokens[j].content.charCodeAt(0);break}}isLastPunctChar=isMdAsciiPunct(lastChar)||isPunctChar(String.fromCharCode(lastChar));isNextPunctChar=isMdAsciiPunct(nextChar)||isPunctChar(String.fromCharCode(nextChar));isLastWhiteSpace=isWhiteSpace(lastChar);isNextWhiteSpace=isWhiteSpace(nextChar);if(isNextWhiteSpace){canOpen=false}else if(isNextPunctChar){if(!(isLastWhiteSpace||isLastPunctChar)){canOpen=false}}if(isLastWhiteSpace){canClose=false}else if(isLastPunctChar){if(!(isNextWhiteSpace||isNextPunctChar)){canClose=false}}if(nextChar===34&&t[0]==='"'){if(lastChar>=48&&lastChar<=57){canClose=canOpen=false}}if(canOpen&&canClose){canOpen=false;canClose=isNextPunctChar}if(!canOpen&&!canClose){if(isSingle){token.content=replaceAt(token.content,t.index,APOSTROPHE)}continue}if(canClose){for(j=stack.length-1;j>=0;j--){item=stack[j];if(stack[j].level<thisLevel){break}if(item.single===isSingle&&stack[j].level===thisLevel){item=stack[j];if(isSingle){openQuote=state.md.options.quotes[2];closeQuote=state.md.options.quotes[3]}else{openQuote=state.md.options.quotes[0];closeQuote=state.md.options.quotes[1]}token.content=replaceAt(token.content,t.index,closeQuote);tokens[item.token].content=replaceAt(tokens[item.token].content,item.pos,openQuote);pos+=closeQuote.length-1;if(item.token===i){pos+=openQuote.length-1}text=token.content;max=text.length;stack.length=j;continue OUTER}}}if(canOpen){stack.push({token:i,pos:t.index,single:isSingle,level:thisLevel})}else if(canClose&&isSingle){token.content=replaceAt(token.content,t.index,APOSTROPHE)}}}}module.exports=function smartquotes(state){var blkIdx;if(!state.md.options.typographer){return}for(blkIdx=state.tokens.length-1;blkIdx>=0;blkIdx--){if(state.tokens[blkIdx].type!=="inline"||!QUOTE_TEST_RE.test(state.tokens[blkIdx].content)){continue}process_inlines(state.tokens[blkIdx].children,state)}}},{"../common/utils":30}],62:[function(require,module,exports){"use strict";var Token=require("../token");function StateCore(src,md,env){this.src=src;this.env=env;this.tokens=[];this.inlineMode=false;this.md=md}StateCore.prototype.Token=Token;module.exports=StateCore},{"../token":77}],63:[function(require,module,exports){"use strict";var EMAIL_RE=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;var AUTOLINK_RE=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/;module.exports=function autolink(state,silent){var tail,linkMatch,emailMatch,url,fullUrl,token,pos=state.pos;if(state.src.charCodeAt(pos)!==60){return false}tail=state.src.slice(pos);if(tail.indexOf(">")<0){return false}if(AUTOLINK_RE.test(tail)){linkMatch=tail.match(AUTOLINK_RE);url=linkMatch[0].slice(1,-1);fullUrl=state.md.normalizeLink(url);if(!state.md.validateLink(fullUrl)){return false}if(!silent){token=state.push("link_open","a",1);token.attrs=[["href",fullUrl]];token.markup="autolink";token.info="auto";token=state.push("text","",0);token.content=state.md.normalizeLinkText(url);token=state.push("link_close","a",-1);token.markup="autolink";token.info="auto"}state.pos+=linkMatch[0].length;return true}if(EMAIL_RE.test(tail)){emailMatch=tail.match(EMAIL_RE);url=emailMatch[0].slice(1,-1);fullUrl=state.md.normalizeLink("mailto:"+url);if(!state.md.validateLink(fullUrl)){return false}if(!silent){token=state.push("link_open","a",1);token.attrs=[["href",fullUrl]];token.markup="autolink";token.info="auto";token=state.push("text","",0);token.content=state.md.normalizeLinkText(url);token=state.push("link_close","a",-1);token.markup="autolink";token.info="auto"}state.pos+=emailMatch[0].length;return true}return false}},{}],64:[function(require,module,exports){"use strict";module.exports=function backtick(state,silent){var start,max,marker,matchStart,matchEnd,token,pos=state.pos,ch=state.src.charCodeAt(pos);if(ch!==96){return false}start=pos;pos++;max=state.posMax;while(pos<max&&state.src.charCodeAt(pos)===96){pos++}marker=state.src.slice(start,pos);matchStart=matchEnd=pos;while((matchStart=state.src.indexOf("`",matchEnd))!==-1){matchEnd=matchStart+1;while(matchEnd<max&&state.src.charCodeAt(matchEnd)===96){matchEnd++}if(matchEnd-matchStart===marker.length){if(!silent){token=state.push("code_inline","code",0);token.markup=marker;token.content=state.src.slice(pos,matchStart).replace(/[ \n]+/g," ").trim()}state.pos=matchEnd;return true}}if(!silent){state.pending+=marker}state.pos+=marker.length;return true}},{}],65:[function(require,module,exports){"use strict";module.exports=function link_pairs(state){var i,j,lastDelim,currDelim,delimiters=state.delimiters,max=state.delimiters.length;for(i=0;i<max;i++){lastDelim=delimiters[i];if(!lastDelim.close){continue}j=i-lastDelim.jump-1;while(j>=0){currDelim=delimiters[j];if(currDelim.open&&currDelim.marker===lastDelim.marker&&currDelim.end<0&&currDelim.level===lastDelim.level){lastDelim.jump=i-j;lastDelim.open=false;currDelim.end=i;currDelim.jump=0;break}j-=currDelim.jump+1}}}},{}],66:[function(require,module,exports){"use strict";module.exports.tokenize=function emphasis(state,silent){var i,scanned,token,start=state.pos,marker=state.src.charCodeAt(start);if(silent){return false}if(marker!==95&&marker!==42){return false}scanned=state.scanDelims(state.pos,marker===42);for(i=0;i<scanned.length;i++){token=state.push("text","",0);token.content=String.fromCharCode(marker);state.delimiters.push({marker:marker,jump:i,token:state.tokens.length-1,level:state.level,end:-1,open:scanned.can_open,close:scanned.can_close})}state.pos+=scanned.length;return true};module.exports.postProcess=function emphasis(state){var i,startDelim,endDelim,token,ch,isStrong,delimiters=state.delimiters,max=state.delimiters.length;for(i=0;i<max;i++){startDelim=delimiters[i];if(startDelim.marker!==95&&startDelim.marker!==42){continue}if(startDelim.end===-1){continue}endDelim=delimiters[startDelim.end];isStrong=i+1<max&&delimiters[i+1].end===startDelim.end-1&&delimiters[i+1].token===startDelim.token+1&&delimiters[startDelim.end-1].token===endDelim.token-1&&delimiters[i+1].marker===startDelim.marker;ch=String.fromCharCode(startDelim.marker);token=state.tokens[startDelim.token];token.type=isStrong?"strong_open":"em_open";token.tag=isStrong?"strong":"em";token.nesting=1;token.markup=isStrong?ch+ch:ch;token.content="";token=state.tokens[endDelim.token];token.type=isStrong?"strong_close":"em_close";token.tag=isStrong?"strong":"em";token.nesting=-1;token.markup=isStrong?ch+ch:ch;token.content="";if(isStrong){state.tokens[delimiters[i+1].token].content="";state.tokens[delimiters[startDelim.end-1].token].content="";i++}}}},{}],67:[function(require,module,exports){"use strict";var entities=require("../common/entities");var has=require("../common/utils").has;var isValidEntityCode=require("../common/utils").isValidEntityCode;var fromCodePoint=require("../common/utils").fromCodePoint;var DIGITAL_RE=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i;var NAMED_RE=/^&([a-z][a-z0-9]{1,31});/i;module.exports=function entity(state,silent){var ch,code,match,pos=state.pos,max=state.posMax;if(state.src.charCodeAt(pos)!==38){return false}if(pos+1<max){ch=state.src.charCodeAt(pos+1);if(ch===35){match=state.src.slice(pos).match(DIGITAL_RE);if(match){if(!silent){code=match[1][0].toLowerCase()==="x"?parseInt(match[1].slice(1),16):parseInt(match[1],10);state.pending+=isValidEntityCode(code)?fromCodePoint(code):fromCodePoint(65533)}state.pos+=match[0].length;return true}}else{match=state.src.slice(pos).match(NAMED_RE);if(match){if(has(entities,match[1])){if(!silent){state.pending+=entities[match[1]]}state.pos+=match[0].length;return true}}}}if(!silent){state.pending+="&"}state.pos++;return true}},{"../common/entities":27,"../common/utils":30}],68:[function(require,module,exports){"use strict";var isSpace=require("../common/utils").isSpace;var ESCAPED=[];for(var i=0;i<256;i++){ESCAPED.push(0)}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(ch){ESCAPED[ch.charCodeAt(0)]=1});module.exports=function escape(state,silent){var ch,pos=state.pos,max=state.posMax;if(state.src.charCodeAt(pos)!==92){return false}pos++;if(pos<max){ch=state.src.charCodeAt(pos);if(ch<256&&ESCAPED[ch]!==0){if(!silent){state.pending+=state.src[pos]}state.pos+=2;return true}if(ch===10){if(!silent){state.push("hardbreak","br",0)}pos++;while(pos<max){ch=state.src.charCodeAt(pos);if(!isSpace(ch)){break}pos++}state.pos=pos;return true}}if(!silent){state.pending+="\\"}state.pos++;return true}},{"../common/utils":30}],69:[function(require,module,exports){"use strict";var HTML_TAG_RE=require("../common/html_re").HTML_TAG_RE;function isLetter(ch){var lc=ch|32;return lc>=97&&lc<=122}module.exports=function html_inline(state,silent){var ch,match,max,token,pos=state.pos;if(!state.md.options.html){return false}max=state.posMax;if(state.src.charCodeAt(pos)!==60||pos+2>=max){return false}ch=state.src.charCodeAt(pos+1);if(ch!==33&&ch!==63&&ch!==47&&!isLetter(ch)){return false}match=state.src.slice(pos).match(HTML_TAG_RE);if(!match){return false}if(!silent){token=state.push("html_inline","",0);token.content=state.src.slice(pos,pos+match[0].length)}state.pos+=match[0].length;return true}},{"../common/html_re":29}],70:[function(require,module,exports){"use strict";var parseLinkLabel=require("../helpers/parse_link_label");var parseLinkDestination=require("../helpers/parse_link_destination");var parseLinkTitle=require("../helpers/parse_link_title");var normalizeReference=require("../common/utils").normalizeReference;var isSpace=require("../common/utils").isSpace;module.exports=function image(state,silent){var attrs,code,content,label,labelEnd,labelStart,pos,ref,res,title,token,tokens,start,href="",oldPos=state.pos,max=state.posMax;if(state.src.charCodeAt(state.pos)!==33){return false}if(state.src.charCodeAt(state.pos+1)!==91){return false}labelStart=state.pos+2;labelEnd=parseLinkLabel(state,state.pos+1,false);if(labelEnd<0){return false}pos=labelEnd+1;if(pos<max&&state.src.charCodeAt(pos)===40){pos++;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}if(pos>=max){return false}start=pos;res=parseLinkDestination(state.src,pos,state.posMax);if(res.ok){href=state.md.normalizeLink(res.str);if(state.md.validateLink(href)){pos=res.pos}else{href=""}}start=pos;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}res=parseLinkTitle(state.src,pos,state.posMax);if(pos<max&&start!==pos&&res.ok){title=res.str;pos=res.pos;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}}else{title=""}if(pos>=max||state.src.charCodeAt(pos)!==41){state.pos=oldPos;return false}pos++}else{if(typeof state.env.references==="undefined"){return false}if(pos<max&&state.src.charCodeAt(pos)===91){start=pos+1;pos=parseLinkLabel(state,pos);if(pos>=0){label=state.src.slice(start,pos++)}else{pos=labelEnd+1}}else{pos=labelEnd+1}if(!label){label=state.src.slice(labelStart,labelEnd)}ref=state.env.references[normalizeReference(label)];if(!ref){state.pos=oldPos;return false}href=ref.href;title=ref.title}if(!silent){content=state.src.slice(labelStart,labelEnd);state.md.inline.parse(content,state.md,state.env,tokens=[]);token=state.push("image","img",0);token.attrs=attrs=[["src",href],["alt",""]];token.children=tokens;token.content=content;if(title){attrs.push(["title",title])}}state.pos=pos;state.posMax=max;return true}},{"../common/utils":30,"../helpers/parse_link_destination":32,"../helpers/parse_link_label":33,"../helpers/parse_link_title":34}],71:[function(require,module,exports){"use strict";var parseLinkLabel=require("../helpers/parse_link_label");var parseLinkDestination=require("../helpers/parse_link_destination");var parseLinkTitle=require("../helpers/parse_link_title");var normalizeReference=require("../common/utils").normalizeReference;var isSpace=require("../common/utils").isSpace;module.exports=function link(state,silent){var attrs,code,label,labelEnd,labelStart,pos,res,ref,title,token,href="",oldPos=state.pos,max=state.posMax,start=state.pos;if(state.src.charCodeAt(state.pos)!==91){return false}labelStart=state.pos+1;labelEnd=parseLinkLabel(state,state.pos,true);if(labelEnd<0){return false}pos=labelEnd+1;if(pos<max&&state.src.charCodeAt(pos)===40){pos++;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}if(pos>=max){return false}start=pos;res=parseLinkDestination(state.src,pos,state.posMax);if(res.ok){href=state.md.normalizeLink(res.str);if(state.md.validateLink(href)){pos=res.pos}else{href=""}}start=pos;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}res=parseLinkTitle(state.src,pos,state.posMax);if(pos<max&&start!==pos&&res.ok){title=res.str;pos=res.pos;for(;pos<max;pos++){code=state.src.charCodeAt(pos);if(!isSpace(code)&&code!==10){break}}}else{title=""}if(pos>=max||state.src.charCodeAt(pos)!==41){state.pos=oldPos;return false}pos++}else{if(typeof state.env.references==="undefined"){return false}if(pos<max&&state.src.charCodeAt(pos)===91){start=pos+1;pos=parseLinkLabel(state,pos);if(pos>=0){label=state.src.slice(start,pos++)}else{pos=labelEnd+1}}else{pos=labelEnd+1}if(!label){label=state.src.slice(labelStart,labelEnd)}ref=state.env.references[normalizeReference(label)];if(!ref){state.pos=oldPos;return false}href=ref.href;title=ref.title}if(!silent){state.pos=labelStart;state.posMax=labelEnd;token=state.push("link_open","a",1);token.attrs=attrs=[["href",href]];if(title){attrs.push(["title",title])}state.md.inline.tokenize(state);token=state.push("link_close","a",-1)}state.pos=pos;state.posMax=max;return true}},{"../common/utils":30,"../helpers/parse_link_destination":32,"../helpers/parse_link_label":33,"../helpers/parse_link_title":34}],72:[function(require,module,exports){"use strict";module.exports=function newline(state,silent){var pmax,max,pos=state.pos;if(state.src.charCodeAt(pos)!==10){return false}pmax=state.pending.length-1;max=state.posMax;if(!silent){if(pmax>=0&&state.pending.charCodeAt(pmax)===32){if(pmax>=1&&state.pending.charCodeAt(pmax-1)===32){state.pending=state.pending.replace(/ +$/,"");state.push("hardbreak","br",0)}else{state.pending=state.pending.slice(0,-1);state.push("softbreak","br",0)}}else{state.push("softbreak","br",0)}}pos++;while(pos<max&&state.src.charCodeAt(pos)===32){pos++}state.pos=pos;return true}},{}],73:[function(require,module,exports){"use strict";var Token=require("../token");var isWhiteSpace=require("../common/utils").isWhiteSpace;var isPunctChar=require("../common/utils").isPunctChar;var isMdAsciiPunct=require("../common/utils").isMdAsciiPunct;function StateInline(src,md,env,outTokens){this.src=src;this.env=env;this.md=md;this.tokens=outTokens;this.pos=0;this.posMax=this.src.length;this.level=0;this.pending="";this.pendingLevel=0;this.cache={};this.delimiters=[]}StateInline.prototype.pushPending=function(){var token=new Token("text","",0);token.content=this.pending;token.level=this.pendingLevel;this.tokens.push(token);this.pending="";return token};StateInline.prototype.push=function(type,tag,nesting){if(this.pending){this.pushPending()}var token=new Token(type,tag,nesting);if(nesting<0){this.level--}token.level=this.level;if(nesting>0){this.level++}this.pendingLevel=this.level;this.tokens.push(token);return token};StateInline.prototype.scanDelims=function(start,canSplitWord){var pos=start,lastChar,nextChar,count,can_open,can_close,isLastWhiteSpace,isLastPunctChar,isNextWhiteSpace,isNextPunctChar,left_flanking=true,right_flanking=true,max=this.posMax,marker=this.src.charCodeAt(start);lastChar=start>0?this.src.charCodeAt(start-1):32;while(pos<max&&this.src.charCodeAt(pos)===marker){pos++}count=pos-start;nextChar=pos<max?this.src.charCodeAt(pos):32;isLastPunctChar=isMdAsciiPunct(lastChar)||isPunctChar(String.fromCharCode(lastChar));isNextPunctChar=isMdAsciiPunct(nextChar)||isPunctChar(String.fromCharCode(nextChar));isLastWhiteSpace=isWhiteSpace(lastChar);isNextWhiteSpace=isWhiteSpace(nextChar);if(isNextWhiteSpace){left_flanking=false}else if(isNextPunctChar){if(!(isLastWhiteSpace||isLastPunctChar)){left_flanking=false}}if(isLastWhiteSpace){right_flanking=false}else if(isLastPunctChar){if(!(isNextWhiteSpace||isNextPunctChar)){right_flanking=false}}if(!canSplitWord){can_open=left_flanking&&(!right_flanking||isLastPunctChar);can_close=right_flanking&&(!left_flanking||isNextPunctChar)}else{can_open=left_flanking;can_close=right_flanking}return{can_open:can_open,can_close:can_close,length:count}};StateInline.prototype.Token=Token;module.exports=StateInline},{"../common/utils":30,"../token":77}],74:[function(require,module,exports){"use strict";module.exports.tokenize=function strikethrough(state,silent){var i,scanned,token,len,ch,start=state.pos,marker=state.src.charCodeAt(start);if(silent){return false}if(marker!==126){return false}scanned=state.scanDelims(state.pos,true);len=scanned.length;ch=String.fromCharCode(marker);if(len<2){return false}if(len%2){token=state.push("text","",0);token.content=ch;len--}for(i=0;i<len;i+=2){token=state.push("text","",0);token.content=ch+ch;state.delimiters.push({marker:marker,jump:i,token:state.tokens.length-1,level:state.level,end:-1,open:scanned.can_open,close:scanned.can_close})}state.pos+=scanned.length;return true};module.exports.postProcess=function strikethrough(state){var i,j,startDelim,endDelim,token,loneMarkers=[],delimiters=state.delimiters,max=state.delimiters.length;for(i=0;i<max;i++){startDelim=delimiters[i];if(startDelim.marker!==126){continue}if(startDelim.end===-1){continue}endDelim=delimiters[startDelim.end];token=state.tokens[startDelim.token];token.type="s_open";token.tag="s";token.nesting=1;token.markup="~~";token.content="";token=state.tokens[endDelim.token];token.type="s_close";token.tag="s";token.nesting=-1;token.markup="~~";token.content="";if(state.tokens[endDelim.token-1].type==="text"&&state.tokens[endDelim.token-1].content==="~"){loneMarkers.push(endDelim.token-1)}}while(loneMarkers.length){i=loneMarkers.pop();j=i+1;while(j<state.tokens.length&&state.tokens[j].type==="s_close"){j++}j--;if(i!==j){token=state.tokens[j];state.tokens[j]=state.tokens[i];state.tokens[i]=token}}}},{}],75:[function(require,module,exports){"use strict";function isTerminatorChar(ch){switch(ch){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return true;default:return false}}module.exports=function text(state,silent){var pos=state.pos;while(pos<state.posMax&&!isTerminatorChar(state.src.charCodeAt(pos))){pos++}if(pos===state.pos){return false}if(!silent){state.pending+=state.src.slice(state.pos,pos)}state.pos=pos;return true}},{}],76:[function(require,module,exports){"use strict";module.exports=function text_collapse(state){var curr,last,level=0,tokens=state.tokens,max=state.tokens.length;for(curr=last=0;curr<max;curr++){level+=tokens[curr].nesting;tokens[curr].level=level;if(tokens[curr].type==="text"&&curr+1<max&&tokens[curr+1].type==="text"){tokens[curr+1].content=tokens[curr].content+tokens[curr+1].content}else{if(curr!==last){tokens[last]=tokens[curr]}last++}}if(curr!==last){tokens.length=last}}},{}],77:[function(require,module,exports){"use strict";function Token(type,tag,nesting){this.type=type;this.tag=tag;this.attrs=null;this.map=null;this.nesting=nesting;this.level=0;this.children=null;this.content="";this.markup="";this.info="";this.meta=null;this.block=false;this.hidden=false}Token.prototype.attrIndex=function attrIndex(name){var attrs,i,len;if(!this.attrs){return-1}attrs=this.attrs;for(i=0,len=attrs.length;i<len;i++){if(attrs[i][0]===name){return i}}return-1};Token.prototype.attrPush=function attrPush(attrData){if(this.attrs){this.attrs.push(attrData)}else{this.attrs=[attrData]}};Token.prototype.attrSet=function attrSet(name,value){var idx=this.attrIndex(name),attrData=[name,value];if(idx<0){this.attrPush(attrData)}else{this.attrs[idx]=attrData}};Token.prototype.attrGet=function attrGet(name){
var idx=this.attrIndex(name),value=null;if(idx>=0){value=this.attrs[idx][1]}return value};Token.prototype.attrJoin=function attrJoin(name,value){var idx=this.attrIndex(name);if(idx<0){this.attrPush([name,value])}else{this.attrs[idx][1]=this.attrs[idx][1]+" "+value}};module.exports=Token},{}],78:[function(require,module,exports){"use strict";var decodeCache={};function getDecodeCache(exclude){var i,ch,cache=decodeCache[exclude];if(cache){return cache}cache=decodeCache[exclude]=[];for(i=0;i<128;i++){ch=String.fromCharCode(i);cache.push(ch)}for(i=0;i<exclude.length;i++){ch=exclude.charCodeAt(i);cache[ch]="%"+("0"+ch.toString(16).toUpperCase()).slice(-2)}return cache}function decode(string,exclude){var cache;if(typeof exclude!=="string"){exclude=decode.defaultChars}cache=getDecodeCache(exclude);return string.replace(/(%[a-f0-9]{2})+/gi,function(seq){var i,l,b1,b2,b3,b4,chr,result="";for(i=0,l=seq.length;i<l;i+=3){b1=parseInt(seq.slice(i+1,i+3),16);if(b1<128){result+=cache[b1];continue}if((b1&224)===192&&i+3<l){b2=parseInt(seq.slice(i+4,i+6),16);if((b2&192)===128){chr=b1<<6&1984|b2&63;if(chr<128){result+=""}else{result+=String.fromCharCode(chr)}i+=3;continue}}if((b1&240)===224&&i+6<l){b2=parseInt(seq.slice(i+4,i+6),16);b3=parseInt(seq.slice(i+7,i+9),16);if((b2&192)===128&&(b3&192)===128){chr=b1<<12&61440|b2<<6&4032|b3&63;if(chr<2048||chr>=55296&&chr<=57343){result+=""}else{result+=String.fromCharCode(chr)}i+=6;continue}}if((b1&248)===240&&i+9<l){b2=parseInt(seq.slice(i+4,i+6),16);b3=parseInt(seq.slice(i+7,i+9),16);b4=parseInt(seq.slice(i+10,i+12),16);if((b2&192)===128&&(b3&192)===128&&(b4&192)===128){chr=b1<<18&1835008|b2<<12&258048|b3<<6&4032|b4&63;if(chr<65536||chr>1114111){result+=""}else{chr-=65536;result+=String.fromCharCode(55296+(chr>>10),56320+(chr&1023))}i+=9;continue}}result+=""}return result})}decode.defaultChars=";/?:@&=+$,#";decode.componentChars="";module.exports=decode},{}],79:[function(require,module,exports){"use strict";var encodeCache={};function getEncodeCache(exclude){var i,ch,cache=encodeCache[exclude];if(cache){return cache}cache=encodeCache[exclude]=[];for(i=0;i<128;i++){ch=String.fromCharCode(i);if(/^[0-9a-z]$/i.test(ch)){cache.push(ch)}else{cache.push("%"+("0"+i.toString(16).toUpperCase()).slice(-2))}}for(i=0;i<exclude.length;i++){cache[exclude.charCodeAt(i)]=exclude[i]}return cache}function encode(string,exclude,keepEscaped){var i,l,code,nextCode,cache,result="";if(typeof exclude!=="string"){keepEscaped=exclude;exclude=encode.defaultChars}if(typeof keepEscaped==="undefined"){keepEscaped=true}cache=getEncodeCache(exclude);for(i=0,l=string.length;i<l;i++){code=string.charCodeAt(i);if(keepEscaped&&code===37&&i+2<l){if(/^[0-9a-f]{2}$/i.test(string.slice(i+1,i+3))){result+=string.slice(i,i+3);i+=2;continue}}if(code<128){result+=cache[code];continue}if(code>=55296&&code<=57343){if(code>=55296&&code<=56319&&i+1<l){nextCode=string.charCodeAt(i+1);if(nextCode>=56320&&nextCode<=57343){result+=encodeURIComponent(string[i]+string[i+1]);i++;continue}}result+="%EF%BF%BD";continue}result+=encodeURIComponent(string[i])}return result}encode.defaultChars=";/?:@&=+$,-_.!~*'()#";encode.componentChars="-_.!~*'()";module.exports=encode},{}],80:[function(require,module,exports){"use strict";module.exports=function format(url){var result="";result+=url.protocol||"";result+=url.slashes?"//":"";result+=url.auth?url.auth+"@":"";if(url.hostname&&url.hostname.indexOf(":")!==-1){result+="["+url.hostname+"]"}else{result+=url.hostname||""}result+=url.port?":"+url.port:"";result+=url.pathname||"";result+=url.search||"";result+=url.hash||"";return result}},{}],81:[function(require,module,exports){"use strict";module.exports.encode=require("./encode");module.exports.decode=require("./decode");module.exports.format=require("./format");module.exports.parse=require("./parse")},{"./decode":78,"./encode":79,"./format":80,"./parse":82}],82:[function(require,module,exports){"use strict";function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.pathname=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true};function urlParse(url,slashesDenoteHost){if(url&&url instanceof Url){return url}var u=new Url;u.parse(url,slashesDenoteHost);return u}Url.prototype.parse=function(url,slashesDenoteHost){var i,l,lowerProto,hec,slashes,rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2]}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];lowerProto=proto.toLowerCase();this.protocol=proto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(i=0;i<hostEndingChars.length;i++){hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd)){hostEnd=hec}}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=auth}hostEnd=-1;for(i=0;i<nonHostChars.length;i++){hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd)){hostEnd=hec}}if(hostEnd===-1){hostEnd=rest.length}if(rest[hostEnd-1]===":"){hostEnd--}var host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost(host);this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part){continue}if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest=notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);rest=rest.slice(0,qm)}if(rest){this.pathname=rest}if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname=""}return this};Url.prototype.parseHost=function(host){var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host){this.hostname=host}};module.exports=urlParse},{}],83:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return input instanceof Array||Object.prototype.toString.call(input)==="[object Array]"}function isObject(input){return input!=null&&Object.prototype.toString.call(input)==="[object Object]"}function isObjectEmpty(obj){var k;for(k in obj){return false}return true}function isNumber(input){return typeof value==="number"||Object.prototype.toString.call(input)==="[object Number]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}var some;if(Array.prototype.some){some=Array.prototype.some}else{some=function(fun){var t=Object(this);var len=t.length>>>0;for(var i=0;i<len;i++){if(i in t&&fun.call(this,t[i],i,t)){return true}}return false}}var some$1=some;function isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);var parsedParts=some$1.call(flags.parsedDateParts,function(i){return i!=null});var isNowValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.invalidWeekday&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated&&(!flags.meridiem||flags.meridiem&&parsedParts);if(m._strict){isNowValid=isNowValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(m)){m._isValid=isNowValid}else{return isNowValid}}return m._isValid}function createInvalid(flags){var m=createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}function isUndefined(input){return input===void 0}var momentProperties=hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(!isUndefined(from._isAMomentObject)){to._isAMomentObject=from._isAMomentObject}if(!isUndefined(from._i)){to._i=from._i}if(!isUndefined(from._f)){to._f=from._f}if(!isUndefined(from._l)){to._l=from._l}if(!isUndefined(from._strict)){to._strict=from._strict}if(!isUndefined(from._tzm)){to._tzm=from._tzm}if(!isUndefined(from._isUTC)){to._isUTC=from._isUTC}if(!isUndefined(from._offset)){to._offset=from._offset}if(!isUndefined(from._pf)){to._pf=getParsingFlags(from)}if(!isUndefined(from._locale)){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(!isUndefined(val)){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(config._d!=null?config._d.getTime():NaN);if(updateInProgress===false){updateInProgress=true;hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function absFloor(number){if(number<0){return Math.ceil(number)||0}else{return Math.floor(number)}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){value=absFloor(coercedNumber)}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function warn(msg){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true;return extend(function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,msg)}if(firstTime){var args=[];var arg;for(var i=0;i<arguments.length;i++){arg="";if(typeof arguments[i]==="object"){arg+="\n["+i+"] ";for(var key in arguments[0]){arg+=key+": "+arguments[0][key]+", "}arg=arg.slice(0,-2)}else{arg=arguments[i]}args.push(arg)}warn(msg+"\nArguments: "+Array.prototype.slice.call(args).join("")+"\n"+(new Error).stack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(name,msg)}if(!deprecations[name]){warn(msg);deprecations[name]=true}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(input){return input instanceof Function||Object.prototype.toString.call(input)==="[object Function]"}function set(config){var prop,i;for(i in config){prop=config[i];if(isFunction(prop)){this[i]=prop}else{this["_"+i]=prop}}this._config=config;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mergeConfigs(parentConfig,childConfig){var res=extend({},parentConfig),prop;for(prop in childConfig){if(hasOwnProp(childConfig,prop)){if(isObject(parentConfig[prop])&&isObject(childConfig[prop])){res[prop]={};extend(res[prop],parentConfig[prop]);extend(res[prop],childConfig[prop])}else if(childConfig[prop]!=null){res[prop]=childConfig[prop]}else{delete res[prop]}}}for(prop in parentConfig){if(hasOwnProp(parentConfig,prop)&&!hasOwnProp(childConfig,prop)&&isObject(parentConfig[prop])){res[prop]=extend({},res[prop])}}return res}function Locale(config){if(config!=null){this.set(config)}}var keys;if(Object.keys){keys=Object.keys}else{keys=function(obj){var i,res=[];for(i in obj){if(hasOwnProp(obj,i)){res.push(i)}}return res}}var keys$1=keys;var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(key,mom,now){var output=this._calendar[key]||this._calendar["sameElse"];return isFunction(output)?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];if(format||!formatUpper){return format}this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});return this._longDateFormat[key]}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return isFunction(output)?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return isFunction(format)?format(output):format.replace(/%s/i,output)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}var priorities={};function addUnitPriority(unit,priority){priorities[unit]=priority}function getPrioritizedUnits(unitsObj){var units=[];for(var u in unitsObj){units.push({unit:u,priority:priorities[u]})}units.sort(function(a,b){return a.priority-b.priority});return units}function makeGetSet(unit,keepTime){return function(value){if(value!=null){set$1(this,unit,value);hooks.updateOffset(this,keepTime);return this}else{return get(this,unit)}}}function get(mom,unit){return mom.isValid()?mom._d["get"+(mom._isUTC?"UTC":"")+unit]():NaN}function set$1(mom,unit,value){if(mom.isValid()){mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}}function stringGet(units){units=normalizeUnits(units);if(isFunction(this[units])){return this[units]()}return this}function stringSet(units,value){if(typeof units==="object"){units=normalizeObjectUnits(units);var prioritized=getPrioritizedUnits(units);for(var i=0;i<prioritized.length;i++){this[prioritized[i].unit](units[prioritized[i].unit])}}else{units=normalizeUnits(units);if(isFunction(this[units])){return this[units](value)}}return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length,sign=number>=0;return(sign?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="",i;for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());formatFunctions[format]=formatFunctions[format]||makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match3to4=/\d\d\d\d?/;var match5to6=/\d\d\d\d\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchShortOffset=/Z|[+-]\d\d(?::?\d\d)?/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=isFunction(regex)?regex:function(isStrict,localeData){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return regexEscape(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}))}function regexEscape(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(isNumber(callback)){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;var WEEK=7;var WEEKDAY=8;var indexOf;if(Array.prototype.indexOf){indexOf=Array.prototype.indexOf}else{indexOf=function(o){var i;for(i=0;i<this.length;++i){if(this[i]===o){return i}}return-1}}var indexOf$1=indexOf;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",function(isStrict,locale){return locale.monthsShortRegex(isStrict)});addRegexToken("MMMM",function(isStrict,locale){return locale.monthsRegex(isStrict)});addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var MONTHS_IN_FORMAT=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m,format){if(!m){return this._months}return isArray(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||MONTHS_IN_FORMAT).test(format)?"format":"standalone"][m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m,format){if(!m){return this._monthsShort}return isArray(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[MONTHS_IN_FORMAT.test(format)?"format":"standalone"][m.month()]}function handleStrictParse(monthName,format,strict){var i,ii,mom,llc=monthName.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(i=0;i<12;++i){mom=createUTC([2e3,i]);this._shortMonthsParse[i]=this.monthsShort(mom,"").toLocaleLowerCase();this._longMonthsParse[i]=this.months(mom,"").toLocaleLowerCase()}}if(strict){if(format==="MMM"){ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null}}else{if(format==="MMM"){ii=indexOf$1.call(this._shortMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._longMonthsParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._longMonthsParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortMonthsParse,llc);return ii!==-1?ii:null}}}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(this._monthsParseExact){return handleStrictParse.call(this,monthName,format,strict)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(!mom.isValid()){return mom}if(typeof value==="string"){if(/^\d+$/.test(value)){value=toInt(value)}else{value=mom.localeData().monthsParse(value);if(!isNumber(value)){return mom}}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);hooks.updateOffset(this,true);return this}else{return get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}var defaultMonthsShortRegex=matchWord;function monthsShortRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=defaultMonthsShortRegex}return this._monthsShortStrictRegex&&isStrict?this._monthsShortStrictRegex:this._monthsShortRegex}}var defaultMonthsRegex=matchWord;function monthsRegex(isStrict){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(isStrict){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=defaultMonthsRegex}return this._monthsStrictRegex&&isStrict?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(a,b){return b.length-a.length}var shortPieces=[],longPieces=[],mixedPieces=[],i,mom;for(i=0;i<12;i++){mom=createUTC([2e3,i]);shortPieces.push(this.monthsShort(mom,""));longPieces.push(this.months(mom,""));mixedPieces.push(this.months(mom,""));mixedPieces.push(this.monthsShort(mom,""))}shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<12;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i])}for(i=0;i<24;i++){mixedPieces[i]=regexEscape(mixedPieces[i])}this._monthsRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i")}addFormatToken("Y",0,0,function(){var y=this.year();return y<=9999?""+y:"+"+y});addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYYY","YYYYYY"],YEAR);addParseToken("YYYY",function(input,array){array[YEAR]=input.length===2?hooks.parseTwoDigitYear(input):toInt(input)});addParseToken("YY",function(input,array){array[YEAR]=hooks.parseTwoDigitYear(input)});addParseToken("Y",function(input,array){array[YEAR]=parseInt(input,10)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<100&&y>=0&&isFinite(date.getFullYear())){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<100&&y>=0&&isFinite(date.getUTCFullYear())){date.setUTCFullYear(y)}return date}function firstWeekOffset(year,dow,doy){var fwd=7+dow-doy,fwdlw=(7+createUTCDate(year,0,fwd).getUTCDay()-dow)%7;return-fwdlw+fwd-1}function dayOfYearFromWeeks(year,week,weekday,dow,doy){var localWeekday=(7+weekday-dow)%7,weekOffset=firstWeekOffset(year,dow,doy),dayOfYear=1+7*(week-1)+localWeekday+weekOffset,resYear,resDayOfYear;if(dayOfYear<=0){resYear=year-1;resDayOfYear=daysInYear(resYear)+dayOfYear}else if(dayOfYear>daysInYear(year)){resYear=year+1;resDayOfYear=dayOfYear-daysInYear(year)}else{resYear=year;resDayOfYear=dayOfYear}return{year:resYear,dayOfYear:resDayOfYear}}function weekOfYear(mom,dow,doy){var weekOffset=firstWeekOffset(mom.year(),dow,doy),week=Math.floor((mom.dayOfYear()-weekOffset-1)/7)+1,resWeek,resYear;if(week<1){resYear=mom.year()-1;resWeek=week+weeksInYear(resYear,dow,doy)}else if(week>weeksInYear(mom.year(),dow,doy)){resWeek=week-weeksInYear(mom.year(),dow,doy);resYear=mom.year()+1}else{resYear=mom.year();resWeek=week}return{week:resWeek,year:resYear}}function weeksInYear(year,dow,doy){var weekOffset=firstWeekOffset(year,dow,doy),weekOffsetNext=firstWeekOffset(year+1,dow,doy);return(daysInYear(year)-weekOffset+weekOffsetNext)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",function(isStrict,locale){return locale.weekdaysMinRegex(isStrict)});addRegexToken("ddd",function(isStrict,locale){return locale.weekdaysShortRegex(isStrict)});addRegexToken("dddd",function(isStrict,locale){return locale.weekdaysRegex(isStrict)});addWeekParseToken(["dd","ddd","dddd"],function(input,week,config,token){var weekday=config._locale.weekdaysParse(input,token,config._strict);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input!=="string"){return input}if(!isNaN(input)){return parseInt(input,10)}input=locale.weekdaysParse(input);if(typeof input==="number"){return input}return null}function parseIsoWeekday(input,locale){if(typeof input==="string"){return locale.weekdaysParse(input)%7||7}return isNaN(input)?null:input}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m,format){
if(!m){return this._weekdays}return isArray(this._weekdays)?this._weekdays[m.day()]:this._weekdays[this._weekdays.isFormat.test(format)?"format":"standalone"][m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return m?this._weekdaysShort[m.day()]:this._weekdaysShort}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return m?this._weekdaysMin[m.day()]:this._weekdaysMin}function handleStrictParse$1(weekdayName,format,strict){var i,ii,mom,llc=weekdayName.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(i=0;i<7;++i){mom=createUTC([2e3,1]).day(i);this._minWeekdaysParse[i]=this.weekdaysMin(mom,"").toLocaleLowerCase();this._shortWeekdaysParse[i]=this.weekdaysShort(mom,"").toLocaleLowerCase();this._weekdaysParse[i]=this.weekdays(mom,"").toLocaleLowerCase()}}if(strict){if(format==="dddd"){ii=indexOf$1.call(this._weekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}}else{if(format==="dddd"){ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else if(format==="ddd"){ii=indexOf$1.call(this._shortWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._minWeekdaysParse,llc);return ii!==-1?ii:null}else{ii=indexOf$1.call(this._minWeekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._weekdaysParse,llc);if(ii!==-1){return ii}ii=indexOf$1.call(this._shortWeekdaysParse,llc);return ii!==-1?ii:null}}}function localeWeekdaysParse(weekdayName,format,strict){var i,mom,regex;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,weekdayName,format,strict)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);if(strict&&!this._fullWeekdaysParse[i]){this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(mom,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(mom,"").replace(".",".?")+"$","i");this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(mom,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[i]){regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="dddd"&&this._fullWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="ddd"&&this._shortWeekdaysParse[i].test(weekdayName)){return i}else if(strict&&format==="dd"&&this._minWeekdaysParse[i].test(weekdayName)){return i}else if(!strict&&this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){if(!this.isValid()){return input!=null?this:NaN}if(input!=null){var weekday=parseIsoWeekday(input,this.localeData());return this.day(this.day()%7?weekday:weekday-7)}else{return this.day()||7}}var defaultWeekdaysRegex=matchWord;function weekdaysRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=defaultWeekdaysRegex}return this._weekdaysStrictRegex&&isStrict?this._weekdaysStrictRegex:this._weekdaysRegex}}var defaultWeekdaysShortRegex=matchWord;function weekdaysShortRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=defaultWeekdaysShortRegex}return this._weekdaysShortStrictRegex&&isStrict?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var defaultWeekdaysMinRegex=matchWord;function weekdaysMinRegex(isStrict){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(isStrict){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=defaultWeekdaysMinRegex}return this._weekdaysMinStrictRegex&&isStrict?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(a,b){return b.length-a.length}var minPieces=[],shortPieces=[],longPieces=[],mixedPieces=[],i,mom,minp,shortp,longp;for(i=0;i<7;i++){mom=createUTC([2e3,1]).day(i);minp=this.weekdaysMin(mom,"");shortp=this.weekdaysShort(mom,"");longp=this.weekdays(mom,"");minPieces.push(minp);shortPieces.push(shortp);longPieces.push(longp);mixedPieces.push(minp);mixedPieces.push(shortp);mixedPieces.push(longp)}minPieces.sort(cmpLenRev);shortPieces.sort(cmpLenRev);longPieces.sort(cmpLenRev);mixedPieces.sort(cmpLenRev);for(i=0;i<7;i++){shortPieces[i]=regexEscape(shortPieces[i]);longPieces[i]=regexEscape(longPieces[i]);mixedPieces[i]=regexEscape(mixedPieces[i])}this._weekdaysRegex=new RegExp("^("+mixedPieces.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+longPieces.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+shortPieces.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+minPieces.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)});addFormatToken("hmmss",0,0,function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});addFormatToken("Hmm",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)});addFormatToken("Hmmss",0,0,function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addRegexToken("hmm",match3to4);addRegexToken("hmmss",match5to6);addRegexToken("Hmm",match3to4);addRegexToken("Hmmss",match5to6);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});addParseToken("hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos));getParsingFlags(config).bigHour=true});addParseToken("hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2));getParsingFlags(config).bigHour=true});addParseToken("Hmm",function(input,array,config){var pos=input.length-2;array[HOUR]=toInt(input.substr(0,pos));array[MINUTE]=toInt(input.substr(pos))});addParseToken("Hmmss",function(input,array,config){var pos1=input.length-4;var pos2=input.length-2;array[HOUR]=toInt(input.substr(0,pos1));array[MINUTE]=toInt(input.substr(pos1,2));array[SECOND]=toInt(input.substr(pos2))});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);var baseConfig={calendar:defaultCalendar,longDateFormat:defaultLongDateFormat,invalidDate:defaultInvalidDate,ordinal:defaultOrdinal,ordinalParse:defaultOrdinalParse,relativeTime:defaultRelativeTime,months:defaultLocaleMonths,monthsShort:defaultLocaleMonthsShort,week:defaultLocaleWeek,weekdays:defaultLocaleWeekdays,weekdaysMin:defaultLocaleWeekdaysMin,weekdaysShort:defaultLocaleWeekdaysShort,meridiemParse:defaultLocaleMeridiemParse};var locales={};var localeFamilies={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function getSetGlobalLocale(key,values){var data;if(key){if(isUndefined(values)){data=getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,config){if(config!==null){var parentConfig=baseConfig;config.abbr=name;if(locales[name]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");parentConfig=locales[name]._config}else if(config.parentLocale!=null){if(locales[config.parentLocale]!=null){parentConfig=locales[config.parentLocale]._config}else{if(!localeFamilies[config.parentLocale]){localeFamilies[config.parentLocale]=[]}localeFamilies[config.parentLocale].push({name:name,config:config});return null}}locales[name]=new Locale(mergeConfigs(parentConfig,config));if(localeFamilies[name]){localeFamilies[name].forEach(function(x){defineLocale(x.name,x.config)})}getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function updateLocale(name,config){if(config!=null){var locale,parentConfig=baseConfig;if(locales[name]!=null){parentConfig=locales[name]._config}config=mergeConfigs(parentConfig,config);locale=new Locale(config);locale.parentLocale=locales[name];locales[name]=locale;getSetGlobalLocale(name)}else{if(locales[name]!=null){if(locales[name].parentLocale!=null){locales[name]=locales[name].parentLocale}else if(locales[name]!=null){delete locales[name]}}}return locales[name]}function getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}function listLocales(){return keys$1(locales)}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}if(getParsingFlags(m)._overflowWeeks&&overflow===-1){overflow=WEEK}if(getParsingFlags(m)._overflowWeekday&&overflow===-1){overflow=WEEKDAY}getParsingFlags(m).overflow=overflow}return m}var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var tzRegex=/Z|[+-]\d\d(?::?\d\d)?/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=extendedIsoRegex.exec(string)||basicIsoRegex.exec(string),allowTime,dateFormat,timeFormat,tzFormat;if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(match[1])){dateFormat=isoDates[i][0];allowTime=isoDates[i][2]!==false;break}}if(dateFormat==null){config._isValid=false;return}if(match[3]){for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(match[3])){timeFormat=(match[2]||" ")+isoTimes[i][0];break}}if(timeFormat==null){config._isValid=false;return}}if(!allowTime&&timeFormat!=null){config._isValid=false;return}if(match[4]){if(tzRegex.exec(match[4])){tzFormat="Z"}else{config._isValid=false;return}}config._f=dateFormat+(timeFormat||"")+(tzFormat||"");configFromStringAndFormat(config)}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid;hooks.createFromInputFallback(config)}}hooks.createFromInputFallback=deprecate("value provided is not in a recognized ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var nowValue=new Date(hooks.now());if(config._useUTC){return[nowValue.getUTCFullYear(),nowValue.getUTCMonth(),nowValue.getUTCDate()]}return[nowValue.getFullYear(),nowValue.getMonth(),nowValue.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp,weekdayOverflow;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1);if(weekday<1||weekday>7){weekdayOverflow=true}}else{dow=config._locale._week.dow;doy=config._locale._week.doy;var curWeek=weekOfYear(createLocal(),dow,doy);weekYear=defaults(w.gg,config._a[YEAR],curWeek.year);week=defaults(w.w,curWeek.week);if(w.d!=null){weekday=w.d;if(weekday<0||weekday>6){weekdayOverflow=true}}else if(w.e!=null){weekday=w.e+dow;if(w.e<0||w.e>6){weekdayOverflow=true}}else{weekday=dow}}if(week<1||week>weeksInYear(weekYear,dow,doy)){getParsingFlags(config)._overflowWeeks=true}else if(weekdayOverflow!=null){getParsingFlags(config)._overflowWeekday=true}else{temp=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}}hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===hooks.ISO_8601){configFromISO(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(config._a[HOUR]<=12&&getParsingFlags(config).bigHour===true&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}getParsingFlags(config).parsedDateParts=config._a.slice(0);getParsingFlags(config).meridiem=config._meridiem;config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=map([i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],function(obj){return obj&&parseInt(obj,10)});configFromArray(config)}function createFromConfig(config){var res=new Moment(checkOverflow(prepareConfig(config)));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function prepareConfig(config){var input=config._i,format=config._f;config._locale=config._locale||getLocale(config._l);if(input===null||format===undefined&&input===""){return createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isDate(input)){config._d=input}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else{configFromInput(config)}if(!isValid(config)){config._d=null}return config}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date(hooks.now())}else if(isDate(input)){config._d=new Date(input.valueOf())}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(typeof input==="object"){configFromObject(config)}else if(isNumber(input)){config._d=new Date(input)}else{hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(locale===true||locale===false){strict=locale;locale=undefined}if(isObject(input)&&isObjectEmpty(input)||isArray(input)&&input.length===0){input=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other<this?this:other}else{return createInvalid()}});var prototypeMax=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var other=createLocal.apply(null,arguments);if(this.isValid()&&other.isValid()){return other>this?this:other}else{return createInvalid()}});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(!moments[i].isValid()||moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}var now=function(){return Date.now?Date.now():+new Date};function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*1e3*60*60;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function absRound(number){if(number<0){return Math.round(-1*number)*-1}else{return Math.round(number)}}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchShortOffset);addRegexToken("ZZ",matchShortOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(matchShortOffset,input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(matcher,string){var matches=(string||"").match(matcher);if(matches===null){return null}var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return minutes===0?0:parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?input.valueOf():createLocal(input).valueOf())-res.valueOf();res._d.setTime(res._d.valueOf()+diff);hooks.updateOffset(res,false);return res}else{return createLocal(input).local()}}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(!this.isValid()){return input!=null?this:NaN}if(input!=null){if(typeof input==="string"){input=offsetFromString(matchShortOffset,input);if(input===null){return this}}else if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){addSubtract(this,createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){var tZone=offsetFromString(matchOffset,this._i);if(tZone!=null){this.utcOffset(tZone)}else{this.utcOffset(0,true)}}return this}function hasAlignedHourOffset(input){if(!this.isValid()){return false}input=input?createLocal(input).utcOffset():0;return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var c={};copyConfig(c,this);c=prepareConfig(c);if(c._a){var other=c._isUTC?createUTC(c._a):createLocal(c._a);this._isDSTShifted=this.isValid()&&compareArrays(c._a,other.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var aspNetRegex=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var isoRegex=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(isNumber(input)){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(absRound(match[MILLISECOND]*1e3))*sign}}else if(!!(match=isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),w:parseIso(match[4],sign),d:parseIso(match[5],sign),h:parseIso(match[6],sign),m:parseIso(match[7],sign),s:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(createLocal(duration.from),createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;if(!(base.isValid()&&other.isValid())){return{milliseconds:0,months:0}}other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=createDuration(val,period);addSubtract(this,dur,direction);return this}}function addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=absRound(duration._days),months=absRound(duration._months);if(!mom.isValid()){return}updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(mom._d.valueOf()+milliseconds*isAdding)}if(days){set$1(mom,"Date",get(mom,"Date")+days*isAdding)}if(months){setMonth(mom,get(mom,"Month")+months*isAdding)}if(updateOffset){hooks.updateOffset(mom,days||months)}}var add=createAdder(1,"add");var subtract=createAdder(-1,"subtract");function getCalendarFormat(myMoment,now){var diff=myMoment.diff(now,"days",true);return diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse"}function calendar$1(time,formats){var now=time||createLocal(),sod=cloneWithOffset(now,this).startOf("day"),format=hooks.calendarFormat(this,sod)||"sameElse";var output=formats&&(isFunction(formats[format])?formats[format].call(this,now):formats[format]);return this.format(output||this.localeData().calendar(format,this,createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()>localInput.valueOf()}else{return localInput.valueOf()<this.clone().startOf(units).valueOf()}}function isBefore(input,units){var localInput=isMoment(input)?input:createLocal(input);if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(!isUndefined(units)?units:"millisecond");if(units==="millisecond"){return this.valueOf()<localInput.valueOf()}else{return this.clone().endOf(units).valueOf()<localInput.valueOf()}}function isBetween(from,to,units,inclusivity){inclusivity=inclusivity||"()";return(inclusivity[0]==="("?this.isAfter(from,units):!this.isBefore(from,units))&&(inclusivity[1]===")"?this.isBefore(to,units):!this.isAfter(to,units))}function isSame(input,units){var localInput=isMoment(input)?input:createLocal(input),inputMs;if(!(this.isValid()&&localInput.isValid())){return false}units=normalizeUnits(units||"millisecond");if(units==="millisecond"){return this.valueOf()===localInput.valueOf()}else{inputMs=localInput.valueOf();return this.clone().startOf(units).valueOf()<=inputMs&&inputMs<=this.clone().endOf(units).valueOf();

}}function isSameOrAfter(input,units){return this.isSame(input,units)||this.isAfter(input,units)}function isSameOrBefore(input,units){return this.isSame(input,units)||this.isBefore(input,units)}function diff(input,units,asFloat){var that,zoneDelta,delta,output;if(!this.isValid()){return NaN}that=cloneWithOffset(input,this);if(!that.isValid()){return NaN}zoneDelta=(that.utcOffset()-this.utcOffset())*6e4;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3}else if(units==="year"){output=output/12}}else{delta=this-that;output=units==="second"?delta/1e3:units==="minute"?delta/6e4:units==="hour"?delta/36e5:units==="day"?(delta-zoneDelta)/864e5:units==="week"?(delta-zoneDelta)/6048e5:delta}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if(isFunction(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var func="moment";var zone="";if(!this.isLocal()){func=this.utcOffset()===0?"moment.utc":"moment.parseZone";zone="Z"}var prefix="["+func+'("]';var year=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var datetime="-MM-DD[T]HH:mm:ss.SSS";var suffix=zone+'[")]';return this.format(prefix+year+datetime+suffix)}function format(inputString){if(!inputString){inputString=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat}var output=formatMoment(this,inputString);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function fromNow(withoutSuffix){return this.from(createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(this.isValid()&&(isMoment(time)&&time.isValid()||createLocal(time).isValid())){return createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}else{return this.localeData().invalidDate()}}function toNow(withoutSuffix){return this.to(createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}if(units==="date"){units="day"}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function toObject(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$1(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=hooks.parseTwoDigitYear(input)});function getSetWeekYear(input){return getSetWeekYearHelper.call(this,input,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(input){return getSetWeekYearHelper.call(this,input,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}function getSetWeekYearHelper(input,week,weekday,dow,doy){var weeksTarget;if(input==null){return weekOfYear(this,dow,doy).year}else{weeksTarget=weeksInYear(input,dow,doy);if(week>weeksTarget){week=weeksTarget}return setWeekAll.call(this,input,week,weekday,dow,doy)}}function setWeekAll(weekYear,week,weekday,dow,doy){var dayOfYearData=dayOfYearFromWeeks(weekYear,week,weekday,dow,doy),date=createUTCDate(dayOfYearData.year,0,dayOfYearData.dayOfYear);this.year(date.getUTCFullYear());this.month(date.getUTCMonth());this.date(date.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,function(){return this.millisecond()*10});addFormatToken(0,["SSSSS",5],0,function(){return this.millisecond()*100});addFormatToken(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});addFormatToken(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});addFormatToken(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});addFormatToken(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);var token;for(token="SSSS";token.length<=9;token+="S"){addRegexToken(token,matchUnsigned)}function parseMs(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)}for(token="S";token.length<=9;token+="S"){addParseToken(token,parseMs)}var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var proto=Moment.prototype;proto.add=add;proto.calendar=calendar$1;proto.clone=clone;proto.diff=diff;proto.endOf=endOf;proto.format=format;proto.from=from;proto.fromNow=fromNow;proto.to=to;proto.toNow=toNow;proto.get=stringGet;proto.invalidAt=invalidAt;proto.isAfter=isAfter;proto.isBefore=isBefore;proto.isBetween=isBetween;proto.isSame=isSame;proto.isSameOrAfter=isSameOrAfter;proto.isSameOrBefore=isSameOrBefore;proto.isValid=isValid$1;proto.lang=lang;proto.locale=locale;proto.localeData=localeData;proto.max=prototypeMax;proto.min=prototypeMin;proto.parsingFlags=parsingFlags;proto.set=stringSet;proto.startOf=startOf;proto.subtract=subtract;proto.toArray=toArray;proto.toObject=toObject;proto.toDate=toDate;proto.toISOString=toISOString;proto.inspect=inspect;proto.toJSON=toJSON;proto.toString=toString;proto.unix=unix;proto.valueOf=valueOf;proto.creationData=creationData;proto.year=getSetYear;proto.isLeapYear=getIsLeapYear;proto.weekYear=getSetWeekYear;proto.isoWeekYear=getSetISOWeekYear;proto.quarter=proto.quarters=getSetQuarter;proto.month=getSetMonth;proto.daysInMonth=getDaysInMonth;proto.week=proto.weeks=getSetWeek;proto.isoWeek=proto.isoWeeks=getSetISOWeek;proto.weeksInYear=getWeeksInYear;proto.isoWeeksInYear=getISOWeeksInYear;proto.date=getSetDayOfMonth;proto.day=proto.days=getSetDayOfWeek;proto.weekday=getSetLocaleDayOfWeek;proto.isoWeekday=getSetISODayOfWeek;proto.dayOfYear=getSetDayOfYear;proto.hour=proto.hours=getSetHour;proto.minute=proto.minutes=getSetMinute;proto.second=proto.seconds=getSetSecond;proto.millisecond=proto.milliseconds=getSetMillisecond;proto.utcOffset=getSetOffset;proto.utc=setOffsetToUTC;proto.local=setOffsetToLocal;proto.parseZone=setOffsetToParsedOffset;proto.hasAlignedHourOffset=hasAlignedHourOffset;proto.isDST=isDaylightSavingTime;proto.isLocal=isLocal;proto.isUtcOffset=isUtcOffset;proto.isUtc=isUtc;proto.isUTC=isUtc;proto.zoneAbbr=getZoneAbbr;proto.zoneName=getZoneName;proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);proto.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(input){return createLocal(input*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(string){return string}var proto$1=Locale.prototype;proto$1.calendar=calendar;proto$1.longDateFormat=longDateFormat;proto$1.invalidDate=invalidDate;proto$1.ordinal=ordinal;proto$1.preparse=preParsePostFormat;proto$1.postformat=preParsePostFormat;proto$1.relativeTime=relativeTime;proto$1.pastFuture=pastFuture;proto$1.set=set;proto$1.months=localeMonths;proto$1.monthsShort=localeMonthsShort;proto$1.monthsParse=localeMonthsParse;proto$1.monthsRegex=monthsRegex;proto$1.monthsShortRegex=monthsShortRegex;proto$1.week=localeWeek;proto$1.firstDayOfYear=localeFirstDayOfYear;proto$1.firstDayOfWeek=localeFirstDayOfWeek;proto$1.weekdays=localeWeekdays;proto$1.weekdaysMin=localeWeekdaysMin;proto$1.weekdaysShort=localeWeekdaysShort;proto$1.weekdaysParse=localeWeekdaysParse;proto$1.weekdaysRegex=weekdaysRegex;proto$1.weekdaysShortRegex=weekdaysShortRegex;proto$1.weekdaysMinRegex=weekdaysMinRegex;proto$1.isPM=localeIsPM;proto$1.meridiem=localeMeridiem;function get$1(format,index,field,setter){var locale=getLocale();var utc=createUTC().set(setter,index);return locale[field](utc,format)}function listMonthsImpl(format,index,field){if(isNumber(format)){index=format;format=undefined}format=format||"";if(index!=null){return get$1(format,index,field,"month")}var i;var out=[];for(i=0;i<12;i++){out[i]=get$1(format,i,field,"month")}return out}function listWeekdaysImpl(localeSorted,format,index,field){if(typeof localeSorted==="boolean"){if(isNumber(format)){index=format;format=undefined}format=format||""}else{format=localeSorted;index=format;localeSorted=false;if(isNumber(format)){index=format;format=undefined}format=format||""}var locale=getLocale(),shift=localeSorted?locale._week.dow:0;if(index!=null){return get$1(format,(index+shift)%7,field,"day")}var i;var out=[];for(i=0;i<7;i++){out[i]=get$1(format,(i+shift)%7,field,"day")}return out}function listMonths(format,index){return listMonthsImpl(format,index,"months")}function listMonthsShort(format,index){return listMonthsImpl(format,index,"monthsShort")}function listWeekdays(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdays")}function listWeekdaysShort(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysShort")}function listWeekdaysMin(localeSorted,format,index){return listWeekdaysImpl(localeSorted,format,index,"weekdaysMin")}getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var mathAbs=Math.abs;function abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function addSubtract$1(duration,input,value,direction){var other=createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function add$1(input,value){return addSubtract$1(this,input,value,1)}function subtract$1(input,value){return addSubtract$1(this,input,value,-1)}function absCeil(number){if(number<0){return Math.floor(number)}else{return Math.ceil(number)}}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years,monthsFromDays;if(!(milliseconds>=0&&days>=0&&months>=0||milliseconds<=0&&days<=0&&months<=0)){milliseconds+=absCeil(monthsToDays(months)+days)*864e5;days=0;months=0}data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);monthsFromDays=absFloor(daysToMonths(days));months+=monthsFromDays;days-=absCeil(monthsToDays(monthsFromDays));years=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToMonths(days){return days*4800/146097}function monthsToDays(months){return months*146097/4800}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToMonths(days);return units==="month"?months:months/12}else{days=this._days+Math.round(monthsToDays(this._months));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function valueOf$1(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function get$2(units){units=normalizeUnits(units);return this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime$1(posNegDuration,withoutSuffix,locale){var duration=createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes<=1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours<=1&&["h"]||hours<thresholds.h&&["hh",hours]||days<=1&&["d"]||days<thresholds.d&&["dd",days]||months<=1&&["M"]||months<thresholds.M&&["MM",months]||years<=1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function getSetRelativeTimeRounding(roundingFunction){if(roundingFunction===undefined){return round}if(typeof roundingFunction==="function"){round=roundingFunction;return true}return false}function getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;return true}function humanize(withSuffix){var locale=this.localeData();var output=relativeTime$1(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var abs$1=Math.abs;function toISOString$1(){var seconds=abs$1(this._milliseconds)/1e3;var days=abs$1(this._days);var months=abs$1(this._months);var minutes,hours,years;minutes=absFloor(seconds/60);hours=absFloor(minutes/60);seconds%=60;minutes%=60;years=absFloor(months/12);months%=12;var Y=years;var M=months;var D=days;var h=hours;var m=minutes;var s=seconds;var total=this.asSeconds();if(!total){return"P0D"}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"")}var proto$2=Duration.prototype;proto$2.abs=abs;proto$2.add=add$1;proto$2.subtract=subtract$1;proto$2.as=as;proto$2.asMilliseconds=asMilliseconds;proto$2.asSeconds=asSeconds;proto$2.asMinutes=asMinutes;proto$2.asHours=asHours;proto$2.asDays=asDays;proto$2.asWeeks=asWeeks;proto$2.asMonths=asMonths;proto$2.asYears=asYears;proto$2.valueOf=valueOf$1;proto$2._bubble=bubble;proto$2.get=get$2;proto$2.milliseconds=milliseconds;proto$2.seconds=seconds;proto$2.minutes=minutes;proto$2.hours=hours;proto$2.days=days;proto$2.weeks=weeks;proto$2.months=months;proto$2.years=years;proto$2.humanize=humanize;proto$2.toISOString=toISOString$1;proto$2.toString=toISOString$1;proto$2.toJSON=toISOString$1;proto$2.locale=locale;proto$2.localeData=localeData;proto$2.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);proto$2.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});hooks.version="2.16.0";setHookCallback(createLocal);hooks.fn=proto;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=proto;return hooks})},{}],84:[function(require,module,exports){"use strict";var Keymap=require("browserkeymap");var _require=require("./selection");var findSelectionFrom=_require.findSelectionFrom;var verticalMotionLeavesTextblock=_require.verticalMotionLeavesTextblock;var NodeSelection=_require.NodeSelection;var TextSelection=_require.TextSelection;var browser=require("../util/browser");function nothing(){}function moveSelectionBlock(pm,dir){var _pm$selection=pm.selection;var $from=_pm$selection.$from;var $to=_pm$selection.$to;var node=_pm$selection.node;var $side=dir>0?$to:$from;var $start=node&&node.isBlock?$side:$side.depth?pm.doc.resolve(dir>0?$side.after():$side.before()):null;return $start&&findSelectionFrom($start,dir)}function selectNodeHorizontally(pm,dir){var _pm$selection2=pm.selection;var empty=_pm$selection2.empty;var node=_pm$selection2.node;var $from=_pm$selection2.$from;var $to=_pm$selection2.$to;if(!empty&&!node)return false;if(node&&node.isInline){pm.setSelection(new TextSelection(dir>0?$to:$from));return true}if(!node){var _ref=dir>0?$from.parent.childAfter($from.parentOffset):$from.parent.childBefore($from.parentOffset);var nextNode=_ref.node;var offset=_ref.offset;if(nextNode){if(nextNode.type.selectable&&offset==$from.parentOffset-(dir>0?0:nextNode.nodeSize)){pm.setSelection(new NodeSelection(dir<0?pm.doc.resolve($from.pos-nextNode.nodeSize):$from));return true}return false}}var next=moveSelectionBlock(pm,dir);if(next&&(next instanceof NodeSelection||node)){pm.setSelection(next);return true}return false}function horiz(dir){return function(pm){var done=selectNodeHorizontally(pm,dir);if(done)pm.scrollIntoView();return done}}function selectNodeVertically(pm,dir){var _pm$selection3=pm.selection;var empty=_pm$selection3.empty;var node=_pm$selection3.node;var $from=_pm$selection3.$from;var $to=_pm$selection3.$to;if(!empty&&!node)return false;var leavingTextblock=true,$start=dir<0?$from:$to;if(!node||node.isInline){pm.flush();leavingTextblock=verticalMotionLeavesTextblock(pm,$start,dir)}if(leavingTextblock){var next=moveSelectionBlock(pm,dir);if(next&&next instanceof NodeSelection){pm.setSelection(next);return true}}if(!node||node.isInline)return false;var beyond=findSelectionFrom($start,dir);if(beyond)pm.setSelection(beyond);return true}function vert(dir){return function(pm){var done=selectNodeVertically(pm,dir);if(done!==false)pm.scrollIntoView();return done}}var keys={Esc:nothing,Enter:nothing,"Ctrl-Enter":nothing,"Mod-Enter":nothing,"Shift-Enter":nothing,Backspace:browser.ios?undefined:nothing,Delete:nothing,"Mod-B":nothing,"Mod-I":nothing,"Mod-Backspace":nothing,"Mod-Delete":nothing,"Shift-Backspace":nothing,"Shift-Delete":nothing,"Shift-Mod-Backspace":nothing,"Shift-Mod-Delete":nothing,"Mod-Z":nothing,"Mod-Y":nothing,"Shift-Mod-Z":nothing,"Ctrl-D":nothing,"Ctrl-H":nothing,"Ctrl-Alt-Backspace":nothing,"Alt-D":nothing,"Alt-Delete":nothing,"Alt-Backspace":nothing,Left:horiz(-1),"Mod-Left":horiz(-1),Right:horiz(1),"Mod-Right":horiz(1),Up:vert(-1),Down:vert(1)};if(browser.mac){keys["Alt-Left"]=horiz(-1);keys["Alt-Right"]=horiz(1);keys["Ctrl-Backspace"]=keys["Ctrl-Delete"]=nothing}var captureKeys=new Keymap(keys);exports.captureKeys=captureKeys},{"../util/browser":133,"./selection":99,browserkeymap:21}],85:[function(require,module,exports){"use strict";var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var extendingChar=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isWordChar(ch){return/\w/.test(ch)||ch>""&&(ch<""||ch>"")&&(isExtendingChar(ch)||ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}exports.isWordChar=isWordChar;function charCategory(ch){return/\s/.test(ch)?"space":isWordChar(ch)?"word":"other"}exports.charCategory=charCategory;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChar.test(ch)}exports.isExtendingChar=isExtendingChar},{}],86:[function(require,module,exports){"use strict";var _require=require("../transform");var joinPoint=_require.joinPoint;var joinable=_require.joinable;var findWrapping=_require.findWrapping;var liftTarget=_require.liftTarget;var canSplit=_require.canSplit;var ReplaceAroundStep=_require.ReplaceAroundStep;var _require2=require("../model");var Slice=_require2.Slice;var Fragment=_require2.Fragment;var NodeRange=_require2.NodeRange;var browser=require("../util/browser");var _require3=require("./char");var charCategory=_require3.charCategory;var isExtendingChar=_require3.isExtendingChar;var _require4=require("./selection");var findSelectionFrom=_require4.findSelectionFrom;var TextSelection=_require4.TextSelection;var NodeSelection=_require4.NodeSelection;var commands=Object.create(null);exports.commands=commands;commands.chainCommands=function(){for(var _len=arguments.length,commands=Array(_len),_key=0;_key<_len;_key++){commands[_key]=arguments[_key]}return function(pm,apply){for(var i=0;i<commands.length;i++){var val=commands[i](pm,apply);if(val!==false)return val}return false}};commands.deleteSelection=function(pm,apply){if(pm.selection.empty)return false;if(apply!==false)pm.tr.replaceSelection().applyAndScroll();return true};commands.joinBackward=function(pm,apply){var _pm$selection=pm.selection;var $head=_pm$selection.$head;var empty=_pm$selection.empty;if(!empty)return false;if($head.parentOffset>0)return false;var before=void 0,cut=void 0;for(var i=$head.depth-1;!before&&i>=0;i--){if($head.index(i)>0){cut=$head.before(i+1);before=$head.node(i).child($head.index(i)-1)}}if(!before){var range=$head.blockRange(),target=range&&liftTarget(range);if(target==null)return false;if(apply!==false)pm.tr.lift(range,target).applyAndScroll();return true}if(before.type.isLeaf&&before.type.selectable&&$head.parent.content.size==0){if(apply!==false){var tr=pm.tr.delete(cut,cut+$head.parent.nodeSize);tr.setSelection(new NodeSelection(tr.doc.resolve(cut-before.nodeSize)));tr.applyAndScroll()}return true}if(before.type.isLeaf){if(apply!==false)pm.tr.delete(cut-before.nodeSize,cut).applyAndScroll();return true}return deleteBarrier(pm,cut,apply)};commands.joinForward=function(pm,apply){var _pm$selection2=pm.selection;var $head=_pm$selection2.$head;var empty=_pm$selection2.empty;if(!empty||$head.parentOffset<$head.parent.content.size)return false;var after=void 0,cut=void 0;for(var i=$head.depth-1;!after&&i>=0;i--){var parent=$head.node(i);if($head.index(i)+1<parent.childCount){after=parent.child($head.index(i)+1);cut=$head.after(i+1)}}if(!after)return false;if(after.type.isLeaf){if(apply!==false)pm.tr.delete(cut,cut+after.nodeSize).applyAndScroll();return true}else{return deleteBarrier(pm,cut,true)}};commands.deleteCharBefore=function(pm,apply){if(browser.ios)return false;var _pm$selection3=pm.selection;var $head=_pm$selection3.$head;var empty=_pm$selection3.empty;if(!empty||$head.parentOffset==0)return false;if(apply!==false){var dest=moveBackward($head,"char");pm.tr.delete(dest,$head.pos).applyAndScroll()}return true};commands.deleteWordBefore=function(pm,apply){var _pm$selection4=pm.selection;var $head=_pm$selection4.$head;var empty=_pm$selection4.empty;if(!empty||$head.parentOffset==0)return false;if(apply!==false){var dest=moveBackward($head,"word");pm.tr.delete(dest,$head.pos).applyAndScroll()}return true};commands.deleteCharAfter=function(pm,apply){var _pm$selection5=pm.selection;var $head=_pm$selection5.$head;var empty=_pm$selection5.empty;if(!empty||$head.parentOffset==$head.parent.content.size)return false;if(apply!==false){var dest=moveForward($head,"char");

pm.tr.delete($head.pos,dest).applyAndScroll()}return true};commands.deleteWordAfter=function(pm,apply){var _pm$selection6=pm.selection;var $head=_pm$selection6.$head;var empty=_pm$selection6.empty;if(!empty||$head.parentOffset==$head.parent.content.size)return false;if(apply!==false){var dest=moveForward($head,"word");pm.tr.delete($head.pos,dest).applyAndScroll()}return true};commands.joinUp=function(pm,apply){var _pm$selection7=pm.selection;var node=_pm$selection7.node;var from=_pm$selection7.from;var point=void 0;if(node){if(node.isTextblock||!joinable(pm.doc,from))return false;point=from}else{point=joinPoint(pm.doc,from,-1);if(point==null)return false}if(apply!==false){var tr=pm.tr.join(point);if(pm.selection.node)tr.setSelection(new NodeSelection(tr.doc.resolve(point-pm.doc.resolve(point).nodeBefore.nodeSize)));tr.applyAndScroll()}return true};commands.joinDown=function(pm,apply){var node=pm.selection.node,nodeAt=pm.selection.from;var point=joinPointBelow(pm);if(!point)return false;if(apply!==false){var tr=pm.tr.join(point);if(node)tr.setSelection(new NodeSelection(tr.doc.resolve(nodeAt)));tr.applyAndScroll()}return true};commands.lift=function(pm,apply){var _pm$selection8=pm.selection;var $from=_pm$selection8.$from;var $to=_pm$selection8.$to;var range=$from.blockRange($to),target=range&&liftTarget(range);if(target==null)return false;if(apply!==false)pm.tr.lift(range,target).applyAndScroll();return true};commands.newlineInCode=function(pm,apply){var _pm$selection9=pm.selection;var $from=_pm$selection9.$from;var $to=_pm$selection9.$to;var node=_pm$selection9.node;if(node)return false;if(!$from.parent.type.isCode||$to.pos>=$from.end())return false;if(apply!==false)pm.tr.typeText("\n").applyAndScroll();return true};commands.createParagraphNear=function(pm,apply){var _pm$selection10=pm.selection;var $from=_pm$selection10.$from;var $to=_pm$selection10.$to;var node=_pm$selection10.node;if(!node||!node.isBlock)return false;var type=$from.parent.defaultContentType($to.indexAfter());if(!type||!type.isTextblock)return false;if(apply!==false){var side=($from.parentOffset?$to:$from).pos;var tr=pm.tr.insert(side,type.createAndFill());tr.setSelection(new TextSelection(tr.doc.resolve(side+1)));tr.applyAndScroll()}return true};commands.liftEmptyBlock=function(pm,apply){var _pm$selection11=pm.selection;var $head=_pm$selection11.$head;var empty=_pm$selection11.empty;if(!empty||$head.parent.content.size)return false;if($head.depth>1&&$head.after()!=$head.end(-1)){var before=$head.before();if(canSplit(pm.doc,before)){if(apply!==false)pm.tr.split(before).applyAndScroll();return true}}var range=$head.blockRange(),target=range&&liftTarget(range);if(target==null)return false;if(apply!==false)pm.tr.lift(range,target).applyAndScroll();return true};commands.splitBlock=function(pm,apply){var _pm$selection12=pm.selection;var $from=_pm$selection12.$from;var $to=_pm$selection12.$to;var node=_pm$selection12.node;if(node&&node.isBlock){if(!$from.parentOffset||!canSplit(pm.doc,$from.pos))return false;if(apply!==false)pm.tr.split($from.pos).applyAndScroll();return true}else{if(apply===false)return true;var atEnd=$to.parentOffset==$to.parent.content.size;var tr=pm.tr.delete($from.pos,$to.pos);var deflt=$from.depth==0?null:$from.node(-1).defaultContentType($from.indexAfter(-1));var type=atEnd?deflt:null;var can=canSplit(tr.doc,$from.pos,1,type);if(!type&&!can&&canSplit(tr.doc,$from.pos,1,deflt)){type=deflt;can=true}if(can){tr.split($from.pos,1,type);if(!atEnd&&!$from.parentOffset&&$from.parent.type!=deflt)tr.setNodeType($from.before(),deflt)}tr.applyAndScroll();return true}};commands.selectParentNode=function(pm,apply){var sel=pm.selection,pos=void 0;if(sel.node){if(!sel.$from.depth)return false;pos=sel.$from.before()}else{var same=sel.$head.sameDepth(sel.$anchor);if(same==0)return false;pos=sel.$head.before(same)}if(apply!==false)pm.setNodeSelection(pos);return true};commands.undo=function(pm,apply){if(pm.history.undoDepth==0)return false;if(apply!==false){pm.scrollIntoView();pm.history.undo()}return true};commands.redo=function(pm,apply){if(pm.history.redoDepth==0)return false;if(apply!==false){pm.scrollIntoView();pm.history.redo()}return true};function deleteBarrier(pm,cut,apply){var $cut=pm.doc.resolve(cut),before=$cut.nodeBefore,after=$cut.nodeAfter,conn=void 0;if(joinable(pm.doc,cut)){if(apply===false)return true;var tr=pm.tr.join(cut);if(tr.steps.length&&before.content.size==0&&!before.sameMarkup(after)&&$cut.parent.canReplace($cut.index()-1,$cut.index()))tr.setNodeType(cut-before.nodeSize,after.type,after.attrs);tr.applyAndScroll();return true}else if(after.isTextblock&&(conn=before.contentMatchAt($cut.index()).findWrapping(after.type,after.attrs))){if(apply===false)return true;var end=cut+after.nodeSize,wrap=Fragment.empty;for(var i=conn.length-1;i>=0;i--){wrap=Fragment.from(conn[i].type.create(conn[i].attrs,wrap))}wrap=Fragment.from(before.copy(wrap));pm.tr.step(new ReplaceAroundStep(cut-1,end,cut,end,new Slice(wrap,1,0),conn.length,true)).join(end+2*conn.length,1,true).applyAndScroll();return true}else{var selAfter=findSelectionFrom($cut,1);var range=selAfter.$from.blockRange(selAfter.$to),target=range&&liftTarget(range);if(target==null)return false;if(apply!==false)pm.tr.lift(range,target).applyAndScroll();return true}}function moveBackward($pos,by){if(by!="char"&&by!="word")throw new RangeError("Unknown motion unit: "+by);var parent=$pos.parent,offset=$pos.parentOffset;var cat=null,counted=0,pos=$pos.pos;for(;;){if(offset==0)return pos;var _parent$childBefore=parent.childBefore(offset);var start=_parent$childBefore.offset;var node=_parent$childBefore.node;if(!node)return pos;if(!node.isText)return cat?pos:pos-1;if(by=="char"){for(var i=offset-start;i>0;i--){if(!isExtendingChar(node.text.charAt(i-1)))return pos-1;offset--;pos--}}else if(by=="word"){for(var _i=offset-start;_i>0;_i--){var nextCharCat=charCategory(node.text.charAt(_i-1));if(cat==null||counted==1&&cat=="space")cat=nextCharCat;else if(cat!=nextCharCat)return pos;offset--;pos--;counted++}}}}function moveForward($pos,by){if(by!="char"&&by!="word")throw new RangeError("Unknown motion unit: "+by);var parent=$pos.parent,offset=$pos.parentOffset,pos=$pos.pos;var cat=null,counted=0;for(;;){if(offset==parent.content.size)return pos;var _parent$childAfter=parent.childAfter(offset);var start=_parent$childAfter.offset;var node=_parent$childAfter.node;if(!node)return pos;if(!node.isText)return cat?pos:pos+1;if(by=="char"){for(var i=offset-start;i<node.text.length;i++){if(!isExtendingChar(node.text.charAt(i+1)))return pos+1;offset++;pos++}}else if(by=="word"){for(var _i2=offset-start;_i2<node.text.length;_i2++){var nextCharCat=charCategory(node.text.charAt(_i2));if(cat==null||counted==1&&cat=="space")cat=nextCharCat;else if(cat!=nextCharCat)return pos;offset++;pos++;counted++}}}}function joinPointBelow(pm){var _pm$selection13=pm.selection;var node=_pm$selection13.node;var to=_pm$selection13.to;if(node)return joinable(pm.doc,to)?to:null;else return joinPoint(pm.doc,to,1)}commands.wrapIn=function(nodeType,attrs){return function(pm,apply){var _pm$selection14=pm.selection;var $from=_pm$selection14.$from;var $to=_pm$selection14.$to;var range=$from.blockRange($to),wrapping=range&&findWrapping(range,nodeType,attrs);if(!wrapping)return false;if(apply!==false)pm.tr.wrap(range,wrapping).applyAndScroll();return true}};commands.setBlockType=function(nodeType,attrs){return function(pm,apply){var _pm$selection15=pm.selection;var $from=_pm$selection15.$from;var $to=_pm$selection15.$to;var node=_pm$selection15.node;var depth=void 0;if(node){depth=$from.depth}else{if(!$from.depth||$to.pos>$from.end())return false;depth=$from.depth-1}var target=node||$from.parent;if(!target.isTextblock||target.hasMarkup(nodeType,attrs))return false;var index=$from.index(depth);if(!$from.node(depth).canReplaceWith(index,index+1,nodeType))return false;if(apply!==false){var where=$from.before(depth+1);pm.tr.clearMarkupFor(where,nodeType,attrs).setNodeType(where,nodeType,attrs).applyAndScroll()}return true}};commands.wrapInList=function(nodeType,attrs){return function(pm,apply){var _pm$selection16=pm.selection;var $from=_pm$selection16.$from;var $to=_pm$selection16.$to;var range=$from.blockRange($to),doJoin=false,outerRange=range;if(range.depth>=2&&$from.node(range.depth-1).type.compatibleContent(nodeType)&&range.startIndex==0){if($from.index(range.depth-1)==0)return false;var $insert=pm.doc.resolve(range.start-2);outerRange=new NodeRange($insert,$insert,range.depth);if(range.endIndex<range.parent.childCount)range=new NodeRange($from,pm.doc.resolve($to.end(range.depth)),range.depth);doJoin=true}var wrap=findWrapping(outerRange,nodeType,attrs,range);if(!wrap)return false;if(apply!==false)doWrapInList(pm.tr,range,wrap,doJoin,nodeType).applyAndScroll();return true}};function doWrapInList(tr,range,wrappers,joinBefore,nodeType){var content=Fragment.empty;for(var i=wrappers.length-1;i>=0;i--){content=Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content))}tr.step(new ReplaceAroundStep(range.start-(joinBefore?2:0),range.end,range.start,range.end,new Slice(content,0,0),wrappers.length,true));var found=0;for(var _i3=0;_i3<wrappers.length;_i3++){if(wrappers[_i3].type==nodeType)found=_i3+1}var splitDepth=wrappers.length-found;var splitPos=range.start+wrappers.length-(joinBefore?2:0),parent=range.parent;for(var _i4=range.startIndex,e=range.endIndex,first=true;_i4<e;_i4++,first=false){if(!first&&canSplit(tr.doc,splitPos,splitDepth))tr.split(splitPos,splitDepth);splitPos+=parent.child(_i4).nodeSize+(first?0:2*splitDepth)}return tr}commands.splitListItem=function(nodeType){return function(pm){var _pm$selection17=pm.selection;var $from=_pm$selection17.$from;var $to=_pm$selection17.$to;var node=_pm$selection17.node;if(node&&node.isBlock||!$from.parent.content.size||$from.depth<2||!$from.sameParent($to))return false;var grandParent=$from.node(-1);if(grandParent.type!=nodeType)return false;var nextType=$to.pos==$from.end()?grandParent.defaultContentType($from.indexAfter(-1)):null;var tr=pm.tr.delete($from.pos,$to.pos);if(!canSplit(tr.doc,$from.pos,2,nextType))return false;tr.split($from.pos,2,nextType).applyAndScroll();return true}};commands.liftListItem=function(nodeType){return function(pm,apply){var _pm$selection18=pm.selection;var $from=_pm$selection18.$from;var $to=_pm$selection18.$to;var range=$from.blockRange($to,function(node){return node.childCount&&node.firstChild.type==nodeType});if(!range||range.depth<2||$from.node(range.depth-1).type!=nodeType)return false;if(apply!==false){var tr=pm.tr,end=range.end,endOfList=$to.end(range.depth);if(end<endOfList){tr.step(new ReplaceAroundStep(end-1,endOfList,end,endOfList,new Slice(Fragment.from(nodeType.create(null,range.parent.copy())),1,0),1,true));range=new NodeRange(tr.doc.resolveNoCache($from.pos),tr.doc.resolveNoCache(endOfList),range.depth)}tr.lift(range,liftTarget(range)).applyAndScroll()}return true}};commands.sinkListItem=function(nodeType){return function(pm,apply){var _pm$selection19=pm.selection;var $from=_pm$selection19.$from;var $to=_pm$selection19.$to;var range=$from.blockRange($to,function(node){return node.childCount&&node.firstChild.type==nodeType});if(!range)return false;var startIndex=range.startIndex;if(startIndex==0)return false;var parent=range.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=nodeType)return false;if(apply!==false){var nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type;var inner=Fragment.from(nestedBefore?nodeType.create():null);var slice=new Slice(Fragment.from(nodeType.create(null,Fragment.from(parent.copy(inner)))),nestedBefore?3:1,0);var before=range.start,after=range.end;pm.tr.step(new ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,true)).applyAndScroll()}return true}};function markApplies(doc,from,to,type){var can=false;doc.nodesBetween(from,to,function(node){if(can)return false;can=node.isTextblock&&node.contentMatchAt(0).allowsMark(type)});return can}commands.toggleMark=function(markType,attrs){return function(pm,apply){var _pm$selection20=pm.selection;var empty=_pm$selection20.empty;var from=_pm$selection20.from;var to=_pm$selection20.to;if(!markApplies(pm.doc,from,to,markType))return false;if(apply===false)return true;if(empty){if(markType.isInSet(pm.activeMarks()))pm.removeActiveMark(markType);else pm.addActiveMark(markType.create(attrs))}else{if(pm.doc.rangeHasMark(from,to,markType))pm.tr.removeMark(from,to,markType).applyAndScroll();else pm.tr.addMark(from,to,markType.create(attrs)).applyAndScroll()}return true}}},{"../model":113,"../transform":121,"../util/browser":133,"./char":85,"./selection":99}],87:[function(require,module,exports){"use strict";var _require=require("../util/dom");var insertCSS=_require.insertCSS;insertCSS('\n\n.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror-content {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-drop-target {\n  position: absolute;\n  width: 1px;\n  background: #666;\n  pointer-events: none;\n}\n\n.ProseMirror-content ul, .ProseMirror-content ol {\n  padding-left: 30px;\n  cursor: default;\n}\n\n.ProseMirror-content blockquote {\n  padding-left: 1em;\n  border-left: 3px solid #eee;\n  margin-left: 0; margin-right: 0;\n}\n\n.ProseMirror-content pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-content li {\n  position: relative;\n  pointer-events: none; /* Don\'t do weird stuff with marker clicks */\n}\n.ProseMirror-content li > * {\n  pointer-events: auto;\n}\n\n.ProseMirror-nodeselection *::selection { background: transparent; }\n.ProseMirror-nodeselection *::-moz-selection { background: transparent; }\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n/* Make sure li selections wrap around markers */\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n')},{"../util/dom":135}],88:[function(require,module,exports){"use strict";var _require=require("../model");var Mark=_require.Mark;var _require2=require("../transform");var mapThroughResult=_require2.mapThroughResult;var _require3=require("./selection");var findSelectionFrom=_require3.findSelectionFrom;var findSelectionNear=_require3.findSelectionNear;var TextSelection=_require3.TextSelection;var isCollapsed=_require3.isCollapsed;var _require4=require("./dompos");var DOMFromPos=_require4.DOMFromPos;var DOMFromPosFromEnd=_require4.DOMFromPosFromEnd;function readInputChange(pm){pm.ensureOperation({readSelection:false});return readDOMChange(pm,rangeAroundSelection(pm))}exports.readInputChange=readInputChange;function readCompositionChange(pm,margin){return readDOMChange(pm,rangeAroundComposition(pm,margin))}exports.readCompositionChange=readCompositionChange;function parseBetween(pm,from,to){var _DOMFromPos=DOMFromPos(pm,from,true);var parent=_DOMFromPos.node;var startOff=_DOMFromPos.offset;var _DOMFromPosFromEnd=DOMFromPosFromEnd(pm,to);var parentRight=_DOMFromPosFromEnd.node;var endOff=_DOMFromPosFromEnd.offset;if(parent!=parentRight)return null;while(startOff){var prev=parent.childNodes[startOff-1];if(prev.nodeType!=1||!prev.hasAttribute("pm-offset"))--startOff;else break}while(endOff<parent.childNodes.length){var next=parent.childNodes[endOff];if(next.nodeType!=1||!next.hasAttribute("pm-offset"))++endOff;else break}var domSel=pm.root.getSelection(),find=null;if(domSel.anchorNode&&pm.content.contains(domSel.anchorNode)){find=[{node:domSel.anchorNode,offset:domSel.anchorOffset}];if(!isCollapsed(domSel))find.push({node:domSel.focusNode,offset:domSel.focusOffset})}var sel=null,doc=pm.schema.parseDOM(parent,{topNode:pm.operation.doc.resolve(from).parent.copy(),from:startOff,to:endOff,preserveWhitespace:true,editableContent:true,findPositions:find});if(find&&find[0].pos!=null){var anchor=find[0].pos,head=find[1]&&find[1].pos;if(head==null)head=anchor;sel={anchor:anchor,head:head}}return{doc:doc,sel:sel}}function isAtEnd($pos,depth){for(var i=depth||0;i<$pos.depth;i++){if($pos.index(i)+1<$pos.node(i).childCount)return false}return $pos.parentOffset==$pos.parent.content.size}function isAtStart($pos,depth){for(var i=depth||0;i<$pos.depth;i++){if($pos.index(0)>0)return false}return $pos.parentOffset==0}function rangeAroundSelection(pm){var _pm$operation$sel=pm.operation.sel;var $from=_pm$operation$sel.$from;var $to=_pm$operation$sel.$to;if($from.sameParent($to)&&$from.parent.isTextblock&&$from.parentOffset&&$to.parentOffset<$to.parent.content.size)return rangeAroundComposition(pm,0);for(var depth=0;;depth++){var fromStart=isAtStart($from,depth+1),toEnd=isAtEnd($to,depth+1);if(fromStart||toEnd||$from.index(depth)!=$to.index(depth)||$to.node(depth).isTextblock){var from=$from.before(depth+1),to=$to.after(depth+1);if(fromStart&&$from.index(depth)>0)from-=$from.node(depth).child($from.index(depth)-1).nodeSize;if(toEnd&&$to.index(depth)+1<$to.node(depth).childCount)to+=$to.node(depth).child($to.index(depth)+1).nodeSize;return{from:from,to:to}}}}function rangeAroundComposition(pm,margin){var _pm$operation$sel2=pm.operation.sel;var $from=_pm$operation$sel2.$from;var $to=_pm$operation$sel2.$to;if(!$from.sameParent($to))return rangeAroundSelection(pm);var startOff=Math.max(0,$from.parentOffset-margin);var size=$from.parent.content.size;var endOff=Math.min(size,$to.parentOffset+margin);if(startOff>0)startOff=$from.parent.childBefore(startOff).offset;if(endOff<size){var after=$from.parent.childAfter(endOff);endOff=after.offset+after.node.nodeSize}var nodeStart=$from.start();return{from:nodeStart+startOff,to:nodeStart+endOff}}function readDOMChange(pm,range){var op=pm.operation;if(op.docSet){pm.markAllDirty();return false}var parseResult=void 0;for(;;){parseResult=parseBetween(pm,range.from,range.to);if(parseResult)break;range={from:op.doc.resolve(range.from).before(),to:op.doc.resolve(range.to).after()}}var _parseResult=parseResult;var parsed=_parseResult.doc;var parsedSel=_parseResult.sel;var compare=op.doc.slice(range.from,range.to);var change=findDiff(compare.content,parsed.content,range.from,op.sel.from);if(!change)return false;var fromMapped=mapThroughResult(op.mappings,change.start);var toMapped=mapThroughResult(op.mappings,change.endA);if(fromMapped.deleted&&toMapped.deleted)return false;markDirtyFor(pm,op.doc,change.start,change.endA);function newSelection(doc){if(!parsedSel)return false;var newSel=findSelectionNear(doc.resolve(range.from+parsedSel.head));if(parsedSel.anchor!=parsedSel.head&&newSel.$head){var $anchor=doc.resolve(range.from+parsedSel.anchor);if($anchor.parent.isTextblock)newSel=new TextSelection($anchor,newSel.$head)}return newSel}var $from=parsed.resolveNoCache(change.start-range.from);var $to=parsed.resolveNoCache(change.endB-range.from);var nextSel=void 0,text=void 0;if(!$from.sameParent($to)&&$from.pos<parsed.content.size&&(nextSel=findSelectionFrom(parsed.resolve($from.pos+1),1,true))&&nextSel.head==$to.pos){pm.input.dispatchKey("Enter")}else if($from.sameParent($to)&&$from.parent.isTextblock&&(text=uniformTextBetween(parsed,$from.pos,$to.pos))!=null){pm.input.insertText(fromMapped.pos,toMapped.pos,text,newSelection)}else{var slice=parsed.slice(change.start-range.from,change.endB-range.from);var tr=pm.tr.replace(fromMapped.pos,toMapped.pos,slice);var sel=newSelection(tr.doc);if(sel)tr.setSelection(sel);tr.applyAndScroll()}return true}function uniformTextBetween(node,from,to){var result="",valid=true,marks=null;node.nodesBetween(from,to,function(node,pos){if(!node.isInline&&pos<from)return;if(!node.isText)return valid=false;if(!marks)marks=node.marks;else if(!Mark.sameSet(marks,node.marks))valid=false;result+=node.text.slice(Math.max(0,from-pos),to-pos)});return valid?result:null}function findDiff(a,b,pos,preferedStart){var start=a.findDiffStart(b,pos);if(!start)return null;var _a$findDiffEnd=a.findDiffEnd(b,pos+a.size,pos+b.size);var endA=_a$findDiffEnd.a;var endB=_a$findDiffEnd.b;if(endA<start){var move=preferedStart<=start&&preferedStart>=endA?start-preferedStart:0;start-=move;endB=start+(endB-endA);endA=start}else if(endB<start){var _move=preferedStart<=start&&preferedStart>=endB?start-preferedStart:0;start-=_move;endA=start+(endA-endB);endB=start}return{start:start,endA:endA,endB:endB}}function markDirtyFor(pm,doc,start,end){var $start=doc.resolve(start),$end=doc.resolve(end),same=$start.sameDepth($end);if(same==0)pm.markAllDirty();else pm.markRangeDirty($start.before(same),$start.after(same),doc)}},{"../model":113,"../transform":121,"./dompos":89,"./selection":99}],89:[function(require,module,exports){"use strict";var _require=require("../util/dom");var contains=_require.contains;function isEditorContent(dom){return dom.classList.contains("ProseMirror-content")}function posBeforeFromDOM(node){var pos=0,add=0;for(var cur=node;!isEditorContent(cur);cur=cur.parentNode){var attr=cur.getAttribute("pm-offset");if(attr){pos+=+attr+add;add=1}}return pos}var posFromDOMResult={pos:0,inLeaf:-1};function posFromDOM(dom,domOffset){var bias=arguments.length<=2||arguments[2]===undefined?0:arguments[2];if(domOffset==null){domOffset=Array.prototype.indexOf.call(dom.parentNode.childNodes,dom);dom=dom.parentNode}var innerOffset=0,tag=void 0;for(;;){var adjust=0;if(dom.nodeType==3){innerOffset+=domOffset}else if(tag=dom.getAttribute("pm-offset")&&!childContainer(dom)){var size=+dom.getAttribute("pm-size");if(dom.nodeType==1&&!dom.firstChild)innerOffset=bias>0?size:0;else if(domOffset==dom.childNodes.length)innerOffset=size;else innerOffset=Math.min(innerOffset,size);var inLeaf=posFromDOMResult.inLeaf=posBeforeFromDOM(dom);posFromDOMResult.pos=inLeaf+innerOffset;return posFromDOMResult}else if(dom.hasAttribute("pm-container")){break}else if(domOffset==dom.childNodes.length){if(domOffset)adjust=1;else adjust=bias>0?1:0}var parent=dom.parentNode;domOffset=adjust<0?0:Array.prototype.indexOf.call(parent.childNodes,dom)+adjust;dom=parent;bias=0}var start=isEditorContent(dom)?0:posBeforeFromDOM(dom)+1,before=0;for(var child=dom.childNodes[domOffset-1];child;child=child.previousSibling){if(child.nodeType==1&&(tag=child.getAttribute("pm-offset"))){before+=+tag+ +child.getAttribute("pm-size");break}}posFromDOMResult.inLeaf=-1;posFromDOMResult.pos=start+before+innerOffset;return posFromDOMResult}exports.posFromDOM=posFromDOM;function childContainer(dom){return dom.hasAttribute("pm-container")?dom:dom.querySelector("[pm-container]")}exports.childContainer=childContainer;function DOMFromPos(pm,pos,loose){if(!loose&&pm.operation&&pm.doc!=pm.operation.doc)throw new RangeError("Resolving a position in an outdated DOM structure");var container=pm.content,offset=pos;for(;;){for(var child=container.firstChild,i=0;;child=child.nextSibling,i++){if(!child){if(offset&&!loose)throw new RangeError("Failed to find node at "+pos);return{node:container,offset:i}}var size=child.nodeType==1&&child.getAttribute("pm-size");if(size){if(!offset)return{node:container,offset:i};size=+size;if(offset<size){container=childContainer(child);if(!container){return leafAt(child,offset)}else{offset--;break}}else{offset-=size}}}}}exports.DOMFromPos=DOMFromPos;function DOMFromPosFromEnd(pm,pos){var container=pm.content,dist=(pm.operation?pm.operation.doc:pm.doc).content.size-pos;for(;;){for(var child=container.lastChild,i=container.childNodes.length;;child=child.previousSibling,i--){if(!child)return{node:container,offset:i};var size=child.nodeType==1&&child.getAttribute("pm-size");if(size){if(!dist)return{node:container,offset:i};size=+size;if(dist<size){container=childContainer(child);if(!container){return leafAt(child,size-dist)}else{dist--;break}}else{dist-=size}}}}}exports.DOMFromPosFromEnd=DOMFromPosFromEnd;function DOMAfterPos(pm,pos){var _DOMFromPos=DOMFromPos(pm,pos);var node=_DOMFromPos.node;var offset=_DOMFromPos.offset;if(node.nodeType!=1||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]}exports.DOMAfterPos=DOMAfterPos;function leafAt(node,offset){for(;;){var child=node.firstChild;if(!child)return{node:node,offset:offset};if(child.nodeType!=1)return{node:child,offset:offset};node=child}}function windowRect(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function parentNode(node){var parent=node.parentNode;return parent.nodeType==11?parent.host:parent}function scrollIntoView(pm,pos){if(!pos)pos=pm.sel.range.head||pm.sel.range.from;var coords=coordsAtPos(pm,pos);for(var parent=pm.content;;parent=parentNode(parent)){var _pm$options=pm.options;var scrollThreshold=_pm$options.scrollThreshold;var scrollMargin=_pm$options.scrollMargin;var atBody=parent==document.body;var rect=atBody?windowRect():parent.getBoundingClientRect();var moveX=0,moveY=0;if(coords.top<rect.top+scrollThreshold)moveY=-(rect.top-coords.top+scrollMargin);else if(coords.bottom>rect.bottom-scrollThreshold)moveY=coords.bottom-rect.bottom+scrollMargin;if(coords.left<rect.left+scrollThreshold)moveX=-(rect.left-coords.left+scrollMargin);else if(coords.right>rect.right-scrollThreshold)moveX=coords.right-rect.right+scrollMargin;if(moveX||moveY){if(atBody){window.scrollBy(moveX,moveY)}else{if(moveY)parent.scrollTop+=moveY;if(moveX)parent.scrollLeft+=moveX}}if(atBody)break}}exports.scrollIntoView=scrollIntoView;function findOffsetInNode(node,coords){var closest=void 0,dxClosest=2e8,coordsClosest=void 0,offset=0;for(var child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){var rects=void 0;if(child.nodeType==1)rects=child.getClientRects();else if(child.nodeType==3)rects=textRange(child).getClientRects();else continue;for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.top<=coords.top&&rect.bottom>=coords.top){var dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child;dxClosest=dx;coordsClosest=dx&&closest.nodeType==3?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords;if(child.nodeType==1&&dx)offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0);continue}}if(!closest&&(coords.left>=rect.right||coords.left>=rect.left&&coords.top>=rect.bottom))offset=i+1}}if(closest&&closest.nodeType==3)return findOffsetInText(closest,coordsClosest);if(!closest||dxClosest&&closest.nodeType==1)return{node:node,offset:offset};return findOffsetInNode(closest,coordsClosest)}function findOffsetInText(node,coords){var len=node.nodeValue.length;var range=document.createRange();for(var i=0;i<len;i++){range.setEnd(node,i+1);range.setStart(node,i);var rect=singleRect(range,1);if(rect.top==rect.bottom)continue;if(rect.left-1<=coords.left&&rect.right+1>=coords.left&&rect.top-1<=coords.top&&rect.bottom+1>=coords.top)return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}function targetKludge(dom,coords){if(/^[uo]l$/i.test(dom.nodeName)){for(var child=dom.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||!child.hasAttribute("pm-offset")||!/^li$/i.test(child.nodeName))continue;var childBox=child.getBoundingClientRect();if(coords.left>childBox.left-2)break;if(childBox.top<=coords.top&&childBox.bottom>=coords.top)return child}}return dom}function posAtCoords(pm,coords){var elt=targetKludge(pm.root.elementFromPoint(coords.left,coords.top+1),coords);if(!contains(pm.content,elt))return null;var _findOffsetInNode=findOffsetInNode(elt,coords);var node=_findOffsetInNode.node;var offset=_findOffsetInNode.offset;var bias=-1;if(node.nodeType==1&&!node.firstChild){var rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return posFromDOM(node,offset,bias)}exports.posAtCoords=posAtCoords;function textRange(node,from,to){var range=document.createRange();range.setEnd(node,to==null?node.nodeValue.length:to);range.setStart(node,from||0);return range}function singleRect(object,bias){var rects=object.getClientRects();return!rects.length?object.getBoundingClientRect():rects[bias<0?0:rects.length-1]}function coordsAtPos(pm,pos){var _DOMFromPos2=DOMFromPos(pm,pos);var node=_DOMFromPos2.node;var offset=_DOMFromPos2.offset;var side=void 0,rect=void 0;if(node.nodeType==3){if(offset<node.nodeValue.length){rect=singleRect(textRange(node,offset,offset+1),-1);side="left"}if((!rect||rect.left==rect.right)&&offset){rect=singleRect(textRange(node,offset-1,offset),1);side="right"}}else if(node.firstChild){if(offset<node.childNodes.length){var child=node.childNodes[offset];rect=singleRect(child.nodeType==3?textRange(child):child,-1);side="left"}if((!rect||rect.top==rect.bottom)&&offset){var _child=node.childNodes[offset-1];rect=singleRect(_child.nodeType==3?textRange(_child):_child,1);side="right"}}else{rect=node.getBoundingClientRect();side="left"}var x=rect[side];return{top:rect.top,bottom:rect.bottom,left:x,right:x}}exports.coordsAtPos=coordsAtPos},{"../util/dom":135}],90:[function(require,module,exports){"use strict";var _require=require("../util/dom");var elt=_require.elt;var browser=require("../util/browser");var _require2=require("./dompos");var childContainer=_require2.childContainer;var DIRTY_RESCAN=1,DIRTY_REDRAW=2;exports.DIRTY_RESCAN=DIRTY_RESCAN;exports.DIRTY_REDRAW=DIRTY_REDRAW;function options(ranges){return{pos:0,onRender:function onRender(node,dom,_pos,offset){if(node.isBlock){if(offset!=null)dom.setAttribute("pm-offset",offset);dom.setAttribute("pm-size",node.nodeSize);if(node.isTextblock)adjustTrailingHacks(dom,node);if(dom.contentEditable=="false")dom=elt("div",null,dom)}return dom},onContainer:function onContainer(dom){dom.setAttribute("pm-container",true)},renderInlineFlat:function renderInlineFlat(node,dom,pos,offset){if(dom.nodeType!=1)dom=elt("span",null,dom);var end=pos+node.nodeSize,fragment=void 0;for(;;){ranges.advanceTo(pos);var nextCut=ranges.nextChangeBefore(end),nextDOM=void 0,size=void 0;if(nextCut>-1){size=nextCut-pos;nextDOM=splitTextNode(dom,size)}else{size=end-pos}dom.setAttribute("pm-offset",offset);dom.setAttribute("pm-size",size);if(ranges.current.length)dom.className=ranges.current.join(" ");if(!fragment&&(nextCut>-1||ranges.element))fragment=document.createDocumentFragment();if(ranges.element)fragment.appendChild(elt("span",{contenteditable:false,"pm-ignore":true},ranges.element));if(fragment)fragment.appendChild(dom);if(nextCut==-1)break;offset+=size;pos+=size;dom=nextDOM}return fragment||dom},document:document}}function splitTextNode(dom,at){if(dom.nodeType==3){var text=document.createTextNode(dom.nodeValue.slice(at));dom.nodeValue=dom.nodeValue.slice(0,at);return text}else{var clone=dom.cloneNode(false);clone.appendChild(splitTextNode(dom.firstChild,at));return clone}}function draw(pm,doc){pm.content.textContent="";pm.content.appendChild(doc.content.toDOM(options(pm.ranges.activeRangeTracker())))}exports.draw=draw;function adjustTrailingHacks(dom,node){var needs=node.content.size==0||node.lastChild.type.isBR||node.type.isCode&&node.lastChild.isText&&/\n$/.test(node.lastChild.text)?"br":!node.lastChild.isText&&node.lastChild.type.isLeaf?"text":null;var last=dom.lastChild;var has=!last||last.nodeType!=1||!last.hasAttribute("pm-ignore")?null:last.nodeName=="BR"?"br":"text";if(needs!=has){if(has)dom.removeChild(last);if(needs)dom.appendChild(needs=="br"?elt("br",{"pm-ignore":"trailing-break"}):elt("span",{"pm-ignore":"cursor-text"},""))}}function findNodeIn(parent,i,node){for(;i<parent.childCount;i++){var child=parent.child(i);if(child==node)return i}return-1}function movePast(dom){var next=dom.nextSibling;dom.parentNode.removeChild(dom);return next}function redraw(pm,dirty,doc,prev){if(dirty.get(prev)==DIRTY_REDRAW)return draw(pm,doc);var opts=options(pm.ranges.activeRangeTracker());function scan(dom,node,prev,pos){var iPrev=0,oPrev=0,pChild=prev.firstChild;var domPos=dom.firstChild;function syncDOM(){while(domPos){var curOff=domPos.nodeType==1&&domPos.getAttribute("pm-offset");if(!curOff||+curOff<oPrev)domPos=movePast(domPos);
else return+curOff==oPrev}return false}for(var iNode=0,offset=0;iNode<node.childCount;iNode++){var child=node.child(iNode),matching=void 0,reuseDOM=void 0;var found=pChild==child?iPrev:findNodeIn(prev,iPrev+1,child);if(found>-1){matching=child;while(iPrev!=found){oPrev+=pChild.nodeSize;pChild=prev.maybeChild(++iPrev)}}if(matching&&!dirty.get(matching)&&syncDOM()){reuseDOM=true}else if(pChild&&!child.isText&&child.sameMarkup(pChild)&&dirty.get(pChild)!=DIRTY_REDRAW&&syncDOM()){reuseDOM=true;if(!pChild.type.isLeaf)scan(childContainer(domPos),child,pChild,pos+offset+1);domPos.setAttribute("pm-size",child.nodeSize)}else{opts.pos=pos+offset;opts.offset=offset;var rendered=child.toDOM(opts);dom.insertBefore(rendered,domPos);reuseDOM=false}if(reuseDOM){if(child.isText){for(var off=offset,end=off+child.nodeSize;off<end;){if(offset!=oPrev)domPos.setAttribute("pm-offset",off);off+=+domPos.getAttribute("pm-size");domPos=domPos.nextSibling}}else{if(offset!=oPrev)domPos.setAttribute("pm-offset",offset);domPos=domPos.nextSibling}oPrev+=pChild.nodeSize;pChild=prev.maybeChild(++iPrev)}offset+=child.nodeSize}while(domPos){domPos=movePast(domPos)}if(node.isTextblock)adjustTrailingHacks(dom,node);if(browser.ios)iosHacks(dom)}scan(pm.content,doc,prev,0)}exports.redraw=redraw;function iosHacks(dom){if(dom.nodeName=="UL"||dom.nodeName=="OL"){var oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important";window.getComputedStyle(dom).listStyle;dom.style.cssText=oldCSS}}},{"../util/browser":133,"../util/dom":135,"./dompos":89}],91:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../transform");var Transform=_require.Transform;var Remapping=_require.Remapping;var max_empty_items=500;var Branch=function(){function Branch(maxEvents){_classCallCheck(this,Branch);this.events=0;this.maxEvents=maxEvents;this.items=[new Item]}_createClass(Branch,[{key:"popEvent",value:function popEvent(doc,preserveItems,upto){var preserve=preserveItems,transform=new Transform(doc);var remap=new BranchRemapping;var selection=void 0,ids=[],i=this.items.length;for(;;){var cur=this.items[--i];if(upto&&cur==upto)break;if(!cur.map)return null;if(!cur.step){remap.add(cur);preserve=true;continue}if(preserve){var step=cur.step.map(remap.remap),map=void 0;this.items[i]=new MapItem(cur.map);if(step&&transform.maybeStep(step).doc){map=transform.maps[transform.maps.length-1];this.items.push(new MapItem(map,this.items[i].id))}remap.movePastStep(cur,map)}else{this.items.pop();transform.maybeStep(cur.step)}ids.push(cur.id);if(cur.selection){this.events--;if(!upto){selection=cur.selection.type.mapToken(cur.selection,remap.remap);break}}}return{transform:transform,selection:selection,ids:ids}}},{key:"clear",value:function clear(){this.items.length=1;this.events=0}},{key:"addTransform",value:function addTransform(transform,selection,ids){for(var i=0;i<transform.steps.length;i++){var step=transform.steps[i].invert(transform.docs[i]);this.items.push(new StepItem(transform.maps[i],ids&&ids[i],step,selection));if(selection){this.events++;selection=null}}if(this.events>this.maxEvents)this.clip()}},{key:"clip",value:function clip(){var seen=0,toClip=this.events-this.maxEvents;for(var i=0;;i++){var cur=this.items[i];if(cur.selection){if(seen<toClip){++seen}else{this.items.splice(0,i,new Item(null,this.events[toClip-1]));this.events=this.maxEvents;return}}}}},{key:"addMaps",value:function addMaps(array){if(this.events==0)return;for(var i=0;i<array.length;i++){this.items.push(new MapItem(array[i]))}}},{key:"findChangeID",value:function findChangeID(id){if(id==this.items[0].id)return this.items[0];for(var i=this.items.length-1;i>=0;i--){var cur=this.items[i];if(cur.step){if(cur.id==id)return cur;if(cur.id<id)return null}}}},{key:"rebased",value:function rebased(newMaps,rebasedTransform,positions){if(this.events==0)return;var rebasedItems=[],start=this.items.length-positions.length,startPos=0;if(start<1){startPos=1-start;start=1;this.items[0]=new Item}if(positions.length){var remap=new Remapping([],newMaps.slice());for(var iItem=start,iPosition=startPos;iItem<this.items.length;iItem++){var item=this.items[iItem],pos=positions[iPosition++],id=void 0;if(pos!=-1){var map=rebasedTransform.maps[pos];if(item.step){var step=rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]);var selection=item.selection&&item.selection.type.mapToken(item.selection,remap);rebasedItems.push(new StepItem(map,item.id,step,selection))}else{rebasedItems.push(new MapItem(map))}id=remap.addToBack(map)}remap.addToFront(item.map.invert(),id)}this.items.length=start}for(var i=0;i<newMaps.length;i++){this.items.push(new MapItem(newMaps[i]))}for(var _i=0;_i<rebasedItems.length;_i++){this.items.push(rebasedItems[_i])}if(!this.compressing&&this.emptyItems(start)+newMaps.length>max_empty_items)this.compress(start+newMaps.length)}},{key:"emptyItems",value:function emptyItems(upto){var count=0;for(var i=1;i<upto;i++){if(!this.items[i].step)count++}return count}},{key:"compress",value:function compress(upto){var remap=new BranchRemapping;var items=[],events=0;for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(i>=upto){items.push(item)}else if(item.step){var step=item.step.map(remap.remap),map=step&&step.posMap();remap.movePastStep(item,map);if(step){var selection=item.selection&&item.selection.type.mapToken(item.selection,remap.remap);items.push(new StepItem(map.invert(),item.id,step,selection));if(selection)events++}}else if(item.map){remap.add(item)}else{items.push(item)}}this.items=items.reverse();this.events=events}},{key:"toString",value:function toString(){return this.items.join("\n")}},{key:"changeID",get:function get(){for(var i=this.items.length-1;i>0;i--){if(this.items[i].step)return this.items[i].id}return this.items[0].id}}]);return Branch}();var nextID=1;var Item=function(){function Item(map,id){_classCallCheck(this,Item);this.map=map;this.id=id||nextID++}_createClass(Item,[{key:"toString",value:function toString(){return this.id+":"+(this.map||"")+(this.step?":"+this.step:"")+(this.mirror!=null?"->"+this.mirror:"")}}]);return Item}();var StepItem=function(_Item){_inherits(StepItem,_Item);function StepItem(map,id,step,selection){_classCallCheck(this,StepItem);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(StepItem).call(this,map,id));_this.step=step;_this.selection=selection;return _this}return StepItem}(Item);var MapItem=function(_Item2){_inherits(MapItem,_Item2);function MapItem(map,mirror){_classCallCheck(this,MapItem);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(MapItem).call(this,map));_this2.mirror=mirror;return _this2}return MapItem}(Item);var BranchRemapping=function(){function BranchRemapping(){_classCallCheck(this,BranchRemapping);this.remap=new Remapping;this.mirrorBuffer=Object.create(null)}_createClass(BranchRemapping,[{key:"add",value:function add(item){var id=this.remap.addToFront(item.map,this.mirrorBuffer[item.id]);if(item.mirror!=null)this.mirrorBuffer[item.mirror]=id;return id}},{key:"movePastStep",value:function movePastStep(item,map){var id=this.add(item);if(map)this.remap.addToBack(map,id)}}]);return BranchRemapping}();var History=function(){function History(pm){_classCallCheck(this,History);this.pm=pm;this.done=new Branch(pm.options.historyDepth);this.undone=new Branch(pm.options.historyDepth);this.lastAddedAt=0;this.ignoreTransform=false;this.preserveItems=0;pm.on.transform.add(this.recordTransform.bind(this))}_createClass(History,[{key:"recordTransform",value:function recordTransform(transform,selection,options){if(this.ignoreTransform)return;if(options.addToHistory==false){this.done.addMaps(transform.maps);this.undone.addMaps(transform.maps)}else{var now=Date.now();var newGroup=now>this.lastAddedAt+this.pm.options.historyEventDelay;this.done.addTransform(transform,newGroup?selection.token:null);this.undone.clear();this.lastAddedAt=now}}},{key:"undo",value:function undo(){return this.shift(this.done,this.undone)}},{key:"redo",value:function redo(){return this.shift(this.undone,this.done)}},{key:"shift",value:function shift(from,to){var pop=from.popEvent(this.pm.doc,this.preserveItems>0);if(!pop)return false;var selectionBeforeTransform=this.pm.selection;if(!pop.transform.steps.length)return this.shift(from,to);var selection=pop.selection.type.fromToken(pop.selection,pop.transform.doc);this.applyIgnoring(pop.transform,selection);to.addTransform(pop.transform,selectionBeforeTransform.token,pop.ids);this.lastAddedAt=0;return true}},{key:"applyIgnoring",value:function applyIgnoring(transform,selection){this.ignoreTransform=true;this.pm.apply(transform,{selection:selection,filter:false});this.ignoreTransform=false}},{key:"getVersion",value:function getVersion(){return this.done.changeID}},{key:"isAtVersion",value:function isAtVersion(version){return this.done.changeID==version}},{key:"backToVersion",value:function backToVersion(version){var found=this.done.findChangeID(version);if(!found)return false;var _done$popEvent=this.done.popEvent(this.pm.doc,this.preserveItems>0,found);var transform=_done$popEvent.transform;this.applyIgnoring(transform);this.undone.clear();return true}},{key:"rebased",value:function rebased(newMaps,rebasedTransform,positions){this.done.rebased(newMaps,rebasedTransform,positions);this.undone.rebased(newMaps,rebasedTransform,positions)}},{key:"undoDepth",get:function get(){return this.done.events}},{key:"redoDepth",get:function get(){return this.undone.events}}]);return History}();exports.History=History},{"../transform":121}],92:[function(require,module,exports){"use strict";exports.ProseMirror=require("./main").ProseMirror;var _require=require("./selection");exports.Selection=_require.Selection;exports.TextSelection=_require.TextSelection;exports.NodeSelection=_require.NodeSelection;var _require2=require("./range");exports.MarkedRange=_require2.MarkedRange;exports.baseKeymap=require("./keymap").baseKeymap;var _require3=require("./plugin");exports.Plugin=_require3.Plugin;exports.commands=require("./commands").commands;exports.Keymap=require("browserkeymap")},{"./commands":86,"./keymap":94,"./main":95,"./plugin":97,"./range":98,"./selection":99,browserkeymap:21}],93:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Keymap=require("browserkeymap");var browser=require("../util/browser");var _require=require("../model");var Slice=_require.Slice;var Fragment=_require.Fragment;var parseDOMInContext=_require.parseDOMInContext;var _require2=require("./capturekeys");var captureKeys=_require2.captureKeys;var _require3=require("../util/dom");var elt=_require3.elt;var contains=_require3.contains;var _require4=require("./domchange");var readInputChange=_require4.readInputChange;var readCompositionChange=_require4.readCompositionChange;var _require5=require("./selection");var findSelectionNear=_require5.findSelectionNear;var hasFocus=_require5.hasFocus;var stopSeq=null;var handlers={};var Input=function(){function Input(pm){var _this=this;_classCallCheck(this,Input);this.pm=pm;this.keySeq=null;this.mouseDown=null;this.dragging=null;this.dropTarget=null;this.shiftKey=false;this.finishComposing=null;this.keymaps=[];this.storedMarks=null;var _loop=function _loop(event){var handler=handlers[event];pm.content.addEventListener(event,function(e){return handler(pm,e)})};for(var event in handlers){_loop(event)}pm.on.selectionChange.add(function(){return _this.storedMarks=null})}_createClass(Input,[{key:"dispatchKey",value:function dispatchKey(name,e){var pm=this.pm,seq=pm.input.keySeq;if(seq){if(Keymap.isModifierKey(name))return true;clearTimeout(stopSeq);stopSeq=setTimeout(function(){if(pm.input.keySeq==seq)pm.input.keySeq=null},50);name=seq+" "+name}var handle=function handle(bound){if(bound===false)return"nothing";if(bound=="...")return"multi";if(bound==null)return false;return bound(pm)==false?false:"handled"};var result=void 0;for(var i=0;!result&&i<pm.input.keymaps.length;i++){result=handle(pm.input.keymaps[i].map.lookup(name,pm))}if(!result)result=handle(captureKeys.lookup(name));if(result=="multi")pm.input.keySeq=name;if((result=="handled"||result=="multi")&&e)e.preventDefault();if(seq&&!result&&/\'$/.test(name)){if(e)e.preventDefault();return true}return!!result}},{key:"insertText",value:function insertText(from,to,text,findSelection){if(from==to&&!text)return;var pm=this.pm,marks=pm.input.storedMarks||pm.doc.marksAt(from);var tr=pm.tr.replaceWith(from,to,text?pm.schema.text(text,marks):null);tr.setSelection(findSelection&&findSelection(tr.doc)||findSelectionNear(tr.doc.resolve(tr.map(to)),-1,true));tr.applyAndScroll();if(text)pm.on.textInput.dispatch(text)}},{key:"startComposition",value:function startComposition(dataLen,realStart){this.pm.ensureOperation({noFlush:true,readSelection:realStart}).composing={ended:false,applied:false,margin:dataLen};this.pm.unscheduleFlush()}},{key:"applyComposition",value:function applyComposition(andFlush){var composing=this.composing;if(composing.applied)return;readCompositionChange(this.pm,composing.margin);composing.applied=true;if(andFlush)this.pm.flush()}},{key:"composing",get:function get(){return this.pm.operation&&this.pm.operation.composing}}]);return Input}();exports.Input=Input;handlers.keydown=function(pm,e){if(!hasFocus(pm))return;pm.on.interaction.dispatch();if(e.keyCode==16)pm.input.shiftKey=true;if(pm.input.composing)return;var name=Keymap.keyName(e);if(name&&pm.input.dispatchKey(name,e))return;pm.sel.fastPoll()};handlers.keyup=function(pm,e){if(e.keyCode==16)pm.input.shiftKey=false};handlers.keypress=function(pm,e){if(!hasFocus(pm)||pm.input.composing||!e.charCode||e.ctrlKey&&!e.altKey||browser.mac&&e.metaKey)return;if(pm.input.dispatchKey(Keymap.keyName(e),e))return;var sel=pm.selection;if(!browser.ios){pm.input.insertText(sel.from,sel.to,String.fromCharCode(e.charCode));e.preventDefault()}};function contextFromEvent(pm,event){return pm.contextAtCoords({left:event.clientX,top:event.clientY})}function selectClickedNode(pm,context){var _pm$selection=pm.selection;var selectedNode=_pm$selection.node;var $from=_pm$selection.$from;var selectAt=void 0;for(var i=context.inside.length-1;i>=0;i--){var _context$inside$i=context.inside[i];var pos=_context$inside$i.pos;var node=_context$inside$i.node;if(node.type.selectable){selectAt=pos;if(selectedNode&&$from.depth>0){var $pos=pm.doc.resolve(pos);if($pos.depth>=$from.depth&&$pos.before($from.depth+1)==$from.pos)selectAt=$pos.before($from.depth)}break}}if(selectAt!=null){pm.setNodeSelection(selectAt);pm.focus();return true}else{return false}}var lastClick={time:0,x:0,y:0},oneButLastClick=lastClick;function isNear(event,click){var dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}function handleTripleClick(pm,context){for(var i=context.inside.length-1;i>=0;i--){var _context$inside$i2=context.inside[i];var pos=_context$inside$i2.pos;var node=_context$inside$i2.node;if(node.isTextblock)pm.setTextSelection(pos+1,pos+1+node.content.size);else if(node.type.selectable)pm.setNodeSelection(pos);else continue;pm.focus();break}}function runHandlerOnContext(handler,context,event){for(var i=context.inside.length-1;i>=0;i--){if(handler.dispatch(context.pos,context.inside[i].node,context.inside[i].pos,event))return true}}handlers.mousedown=function(pm,e){pm.on.interaction.dispatch();var now=Date.now();var doubleClick=now-lastClick.time<500&&isNear(e,lastClick);var tripleClick=doubleClick&&now-oneButLastClick.time<600&&isNear(e,oneButLastClick);oneButLastClick=lastClick;lastClick={time:now,x:e.clientX,y:e.clientY};var context=contextFromEvent(pm,e);if(context==null)return;if(tripleClick){e.preventDefault();handleTripleClick(pm,context)}else if(doubleClick){if(runHandlerOnContext(pm.on.doubleClickOn,context,e)||pm.on.doubleClick.dispatch(context.pos,e))e.preventDefault();else pm.sel.fastPoll()}else{pm.input.mouseDown=new MouseDown(pm,e,context,doubleClick)}};var MouseDown=function(){function MouseDown(pm,event,context,doubleClick){_classCallCheck(this,MouseDown);this.pm=pm;this.event=event;this.context=context;this.leaveToBrowser=pm.input.shiftKey||doubleClick;this.x=event.clientX;this.y=event.clientY;var inner=context.inside[context.inside.length-1];this.mightDrag=inner&&(inner.node.type.draggable||inner.node==pm.sel.range.node)?inner:null;this.target=event.target;if(this.mightDrag){if(!contains(pm.content,this.target))this.target=pm.root.elementFromPoint(this.x,this.y);this.target.draggable=true;if(browser.gecko&&(this.setContentEditable=!this.target.hasAttribute("contentEditable")))this.target.setAttribute("contentEditable","false")}window.addEventListener("mouseup",this.up=this.up.bind(this));window.addEventListener("mousemove",this.move=this.move.bind(this));pm.sel.fastPoll()}_createClass(MouseDown,[{key:"done",value:function done(){window.removeEventListener("mouseup",this.up);window.removeEventListener("mousemove",this.move);if(this.mightDrag){this.target.draggable=false;if(browser.gecko&&this.setContentEditable)this.target.removeAttribute("contentEditable")}}},{key:"up",value:function up(event){this.done();if(this.leaveToBrowser||!contains(this.pm.content,event.target))return this.pm.sel.fastPoll();var context=contextFromEvent(this.pm,event);if(this.event.ctrlKey&&selectClickedNode(this.pm,context)){event.preventDefault()}else if(runHandlerOnContext(this.pm.on.clickOn,this.context,event)||this.pm.on.click.dispatch(this.context.pos,event)){event.preventDefault()}else{var inner=this.context.inside[this.context.inside.length-1];if(inner&&inner.node.type.isLeaf&&inner.node.type.selectable){this.pm.setNodeSelection(inner.pos);this.pm.focus()}else{this.pm.sel.fastPoll()}}}},{key:"move",value:function move(event){if(!this.leaveToBrowser&&(Math.abs(this.x-event.clientX)>4||Math.abs(this.y-event.clientY)>4))this.leaveToBrowser=true;this.pm.sel.fastPoll()}}]);return MouseDown}();handlers.touchdown=function(pm){pm.sel.fastPoll()};handlers.contextmenu=function(pm,e){var context=contextFromEvent(pm,e);if(context){var inner=context.inside[context.inside.length-1];if(pm.on.contextMenu.dispatch(context.pos,inner?inner.node:pm.doc,e))e.preventDefault()}};handlers.compositionstart=function(pm,e){if(!pm.input.composing&&hasFocus(pm))pm.input.startComposition(e.data?e.data.length:0,true)};handlers.compositionupdate=function(pm){if(!pm.input.composing&&hasFocus(pm))pm.input.startComposition(0,false)};handlers.compositionend=function(pm,e){if(!hasFocus(pm))return;var composing=pm.input.composing;if(!composing){if(e.data)pm.input.startComposition(e.data.length,false);else return}else if(composing.applied){return}clearTimeout(pm.input.finishComposing);pm.operation.composing.ended=true;pm.input.finishComposing=window.setTimeout(function(){var composing=pm.input.composing;if(composing&&composing.ended)pm.input.applyComposition(true)},20)};function readInput(pm){var composing=pm.input.composing;if(composing){if(composing.ended)pm.input.applyComposition(true);return true}var result=readInputChange(pm);pm.flush();return result}function readInputSoon(pm){window.setTimeout(function(){if(!readInput(pm))window.setTimeout(function(){return readInput(pm)},80)},20)}handlers.input=function(pm){if(hasFocus(pm))readInput(pm)};function toClipboard(doc,from,to,dataTransfer){var $from=doc.resolve(from),start=from;for(var d=$from.depth;d>0&&$from.end(d)==start;d--){start++}var slice=doc.slice(start,to);if(slice.possibleParent.type!=doc.type.schema.nodes.doc)slice=new Slice(Fragment.from(slice.possibleParent.copy(slice.content)),slice.openLeft+1,slice.openRight+1);var dom=slice.content.toDOM(),wrap=document.createElement("div");if(dom.firstChild&&dom.firstChild.nodeType==1)dom.firstChild.setAttribute("pm-open-left",slice.openLeft);wrap.appendChild(dom);dataTransfer.clearData();dataTransfer.setData("text/html",wrap.innerHTML);dataTransfer.setData("text/plain",slice.content.textBetween(0,slice.content.size,"\n\n"));return slice}var cachedCanUpdateClipboard=null;function canUpdateClipboard(dataTransfer){if(cachedCanUpdateClipboard!=null)return cachedCanUpdateClipboard;dataTransfer.setData("text/html","<hr>");return cachedCanUpdateClipboard=dataTransfer.getData("text/html")=="<hr>"}function fromClipboard(pm,dataTransfer,plainText,$target){var txt=dataTransfer.getData("text/plain");var html=dataTransfer.getData("text/html");if(!html&&!txt)return null;var dom=void 0;if((plainText||!html)&&txt){dom=document.createElement("div");pm.on.transformPastedText.dispatch(txt).split(/(?:\r\n?|\n){2,}/).forEach(function(block){var para=dom.appendChild(document.createElement("p"));block.split(/\r\n?|\n/).forEach(function(line,i){if(i)para.appendChild(document.createElement("br"));para.appendChild(document.createTextNode(line))})})}else{dom=readHTML(pm.on.transformPastedHTML.dispatch(html))}var openLeft=null,m=void 0;var foundLeft=dom.querySelector("[pm-open-left]");if(foundLeft&&(m=/^\d+$/.exec(foundLeft.getAttribute("pm-open-left"))))openLeft=+m[0];var slice=parseDOMInContext($target,dom,{openLeft:openLeft,preserveWhiteSpace:true});return pm.on.transformPasted.dispatch(slice)}function insertRange($from,$to){var from=$from.pos,to=$to.pos;for(var d=$to.depth;d>0&&$to.end(d)==to;d--){to++}for(var _d=$from.depth;_d>0&&$from.start(_d)==from&&$from.end(_d)<=to;_d--){from--}return{from:from,to:to}}var wrapMap={thead:"table",colgroup:"table",col:"table colgroup",tr:"table tbody",td:"table tbody tr",th:"table tbody tr"};function readHTML(html){var metas=/(\s*<meta [^>]*>)*/.exec(html);if(metas)html=html.slice(metas[0].length);var elt=document.createElement("div");var firstTag=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(html),wrap=void 0,depth=0;if(wrap=firstTag&&wrapMap[firstTag[1].toLowerCase()]){var nodes=wrap.split(" ");html=nodes.map(function(n){return"<"+n+">"}).join("")+html+nodes.map(function(n){return"</"+n+">"}).reverse().join("");depth=nodes.length}elt.innerHTML=html;for(var i=0;i<depth;i++){elt=elt.firstChild}return elt}handlers.copy=handlers.cut=function(pm,e){var _pm$selection2=pm.selection;var from=_pm$selection2.from;var to=_pm$selection2.to;var empty=_pm$selection2.empty;var cut=e.type=="cut";if(empty)return;if(!e.clipboardData||!canUpdateClipboard(e.clipboardData)){if(cut&&browser.ie&&browser.ie_version<=11)readInputSoon(pm);return}toClipboard(pm.doc,from,to,e.clipboardData);e.preventDefault();if(cut)pm.tr.delete(from,to).apply()};handlers.paste=function(pm,e){if(!hasFocus(pm)||pm.on.domPaste.dispatch(e))return;if(!e.clipboardData){if(browser.ie&&browser.ie_version<=11)readInputSoon(pm);return}var sel=pm.selection,range=insertRange(sel.$from,sel.$to);var slice=fromClipboard(pm,e.clipboardData,pm.input.shiftKey,pm.doc.resolve(range.from));if(slice){e.preventDefault();var tr=pm.tr.replace(range.from,range.to,slice);tr.setSelection(findSelectionNear(tr.doc.resolve(tr.map(range.to)),-1));tr.applyAndScroll()}};var Dragging=function Dragging(slice,from,to){_classCallCheck(this,Dragging);this.slice=slice;this.from=from;this.to=to};function dropPos(slice,$pos){if(!slice||!slice.content.size)return $pos.pos;var content=slice.content;for(var i=0;i<slice.openLeft;i++){content=content.firstChild.content}for(var d=$pos.depth;d>=0;d--){var bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1;var insertPos=$pos.index(d)+(bias>0?1:0);if($pos.node(d).canReplace(insertPos,insertPos,content))return bias==0?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return $pos.pos}function removeDropTarget(pm){if(pm.input.dropTarget){pm.wrapper.removeChild(pm.input.dropTarget);pm.input.dropTarget=null}}handlers.dragstart=function(pm,e){var mouseDown=pm.input.mouseDown;if(mouseDown)mouseDown.done();if(!e.dataTransfer)return;var _pm$selection3=pm.selection;var from=_pm$selection3.from;var to=_pm$selection3.to;var empty=_pm$selection3.empty;var dragging=void 0;var pos=!empty&&pm.posAtCoords({left:e.clientX,top:e.clientY});if(pos!=null&&pos>=from&&pos<=to){dragging={from:from,to:to}}else if(mouseDown&&mouseDown.mightDrag){var _pos=mouseDown.mightDrag.pos;dragging={from:_pos,to:_pos+mouseDown.mightDrag.node.nodeSize}}if(dragging){var slice=toClipboard(pm.doc,dragging.from,dragging.to,e.dataTransfer);pm.input.dragging=new Dragging(slice,dragging.from,dragging.to)}};handlers.dragend=function(pm){removeDropTarget(pm);window.setTimeout(function(){return pm.input.dragging=null},50)};handlers.dragover=handlers.dragenter=function(pm,e){e.preventDefault();var target=pm.input.dropTarget;if(!target)target=pm.input.dropTarget=pm.wrapper.appendChild(elt("div",{"class":"ProseMirror-drop-target"}));var mousePos=pm.posAtCoords({left:e.clientX,top:e.clientY});var pos=mousePos==null?null:dropPos(pm.input.dragging&&pm.input.dragging.slice,pm.doc.resolve(mousePos));if(pos==null)return;var coords=pm.coordsAtPos(pos);var rect=pm.wrapper.getBoundingClientRect();coords.top-=rect.top;coords.right-=rect.left;coords.bottom-=rect.top;coords.left-=rect.left;target.style.left=coords.left-1+"px";target.style.top=coords.top+"px";target.style.height=coords.bottom-coords.top+"px"};handlers.dragleave=function(pm,e){if(e.target==pm.content)removeDropTarget(pm)};handlers.drop=function(pm,e){var dragging=pm.input.dragging;pm.input.dragging=null;removeDropTarget(pm);if(!e.dataTransfer||pm.on.domDrop.dispatch(e))return;var $mouse=pm.doc.resolve(pm.posAtCoords({left:e.clientX,top:e.clientY}));if(!$mouse)return;var range=insertRange($mouse,$mouse);var slice=dragging&&dragging.slice||fromClipboard(pm,e.dataTransfer,pm.doc.resolve(range.from));if(!slice)return;var insertPos=dropPos(slice,pm.doc.resolve(range.from));e.preventDefault();var tr=pm.tr;if(dragging&&!e.ctrlKey&&dragging.from!=null)tr.delete(dragging.from,dragging.to);var start=tr.map(insertPos),found=void 0;tr.replace(start,tr.map(insertPos),slice).apply();if(slice.content.childCount==1&&slice.openLeft==0&&slice.openRight==0&&slice.content.child(0).type.selectable&&(found=pm.doc.nodeAt(start))&&found.sameMarkup(slice.content.child(0))){pm.setNodeSelection(start)}else{var left=findSelectionNear(pm.doc.resolve(start),1,true).from;var right=findSelectionNear(pm.doc.resolve(tr.map(insertPos)),-1,true).to;pm.setTextSelection(left,right)}pm.focus()};handlers.focus=function(pm){pm.wrapper.classList.add("ProseMirror-focused");pm.on.focus.dispatch()};handlers.blur=function(pm){pm.wrapper.classList.remove("ProseMirror-focused");pm.on.blur.dispatch()}},{"../model":113,"../util/browser":133,"../util/dom":135,"./capturekeys":84,"./domchange":88,"./selection":99,browserkeymap:21}],94:[function(require,module,exports){"use strict";var Keymap=require("browserkeymap");var browser=require("../util/browser");var c=require("./commands").commands;var baseKeymap=new Keymap({Enter:c.chainCommands(c.newlineInCode,c.createParagraphNear,c.liftEmptyBlock,c.splitBlock),Backspace:c.chainCommands(c.deleteSelection,c.joinBackward,c.deleteCharBefore),"Mod-Backspace":c.chainCommands(c.deleteSelection,c.joinBackward,c.deleteWordBefore),Delete:c.chainCommands(c.deleteSelection,c.joinForward,c.deleteCharAfter),"Mod-Delete":c.chainCommands(c.deleteSelection,c.joinForward,c.deleteWordAfter),"Alt-Up":c.joinUp,"Alt-Down":c.joinDown,"Mod-[":c.lift,Esc:c.selectParentNode,"Mod-Z":c.undo,"Mod-Y":c.redo,"Shift-Mod-Z":c.redo});exports.baseKeymap=baseKeymap;if(browser.mac)baseKeymap.addBindings({"Ctrl-H":baseKeymap.lookup("Backspace"),"Alt-Backspace":baseKeymap.lookup("Cmd-Backspace"),"Ctrl-D":baseKeymap.lookup("Delete"),"Ctrl-Alt-Backspace":baseKeymap.lookup("Cmd-Delete"),"Alt-Delete":baseKeymap.lookup("Cmd-Delete"),"Alt-D":baseKeymap.lookup("Cmd-Delete")})},{"../util/browser":133,"./commands":86,browserkeymap:21}],95:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}require("./css");var _require=require("../util/map");var Map=_require.Map;var _require2=require("subscription");var Subscription=_require2.Subscription;var PipelineSubscription=_require2.PipelineSubscription;var StoppableSubscription=_require2.StoppableSubscription;var DOMSubscription=_require2.DOMSubscription;var _require3=require("../util/dom");var requestAnimationFrame=_require3.requestAnimationFrame;var cancelAnimationFrame=_require3.cancelAnimationFrame;var elt=_require3.elt;var ensureCSSAdded=_require3.ensureCSSAdded;var _require4=require("../transform");var mapThrough=_require4.mapThrough;var _require5=require("../model");var Mark=_require5.Mark;var _require6=require("./options");var parseOptions=_require6.parseOptions;var _require7=require("./selection");var SelectionState=_require7.SelectionState;var TextSelection=_require7.TextSelection;var NodeSelection=_require7.NodeSelection;var findSelectionAtStart=_require7.findSelectionAtStart;var _hasFocus=_require7.hasFocus;var _require8=require("./dompos");var scrollIntoView=_require8.scrollIntoView;var posAtCoords=_require8.posAtCoords;var _coordsAtPos=_require8.coordsAtPos;var _require9=require("./draw");var draw=_require9.draw;var redraw=_require9.redraw;var DIRTY_REDRAW=_require9.DIRTY_REDRAW;var DIRTY_RESCAN=_require9.DIRTY_RESCAN;var _require10=require("./input");var Input=_require10.Input;var _require11=require("./history");var History=_require11.History;var _require12=require("./range");var RangeStore=_require12.RangeStore;var MarkedRange=_require12.MarkedRange;var _require13=require("./transform");var EditorTransform=_require13.EditorTransform;var _require14=require("./update");var EditorScheduler=_require14.EditorScheduler;var UpdateScheduler=_require14.UpdateScheduler;

var ProseMirror=function(){function ProseMirror(opts){var _this=this;_classCallCheck(this,ProseMirror);ensureCSSAdded();opts=this.options=parseOptions(opts);this.schema=opts.schema||opts.doc&&opts.doc.type.schema;if(!this.schema)throw new RangeError("You must specify a schema option");if(opts.doc==null)opts.doc=this.schema.nodes.doc.createAndFill();if(opts.doc.type.schema!=this.schema)throw new RangeError("Schema option does not correspond to schema used in doc option");this.content=elt("div",{"class":"ProseMirror-content","pm-container":true});this.wrapper=elt("div",{"class":"ProseMirror"},this.content);this.wrapper.ProseMirror=this;this.on={change:new Subscription,selectionChange:new Subscription,textInput:new Subscription,beforeSetDoc:new Subscription,setDoc:new Subscription,interaction:new Subscription,focus:new Subscription,blur:new Subscription,click:new StoppableSubscription,clickOn:new StoppableSubscription,doubleClick:new StoppableSubscription,doubleClickOn:new StoppableSubscription,contextMenu:new StoppableSubscription,transformPasted:new PipelineSubscription,transformPastedText:new PipelineSubscription,transformPastedHTML:new PipelineSubscription,transform:new Subscription,beforeTransform:new Subscription,filterTransform:new StoppableSubscription,flushing:new Subscription,flush:new Subscription,draw:new Subscription,activeMarkChange:new Subscription,domPaste:new DOMSubscription,domDrop:new DOMSubscription};if(opts.place&&opts.place.appendChild)opts.place.appendChild(this.wrapper);else if(opts.place)opts.place(this.wrapper);this._root=null;this.setDocInner(opts.doc);draw(this,this.doc);this.content.contentEditable=true;if(opts.label)this.content.setAttribute("aria-label",opts.label);this.plugin=Object.create(null);this.cached=Object.create(null);this.operation=null;this.dirtyNodes=new Map;this.flushScheduled=null;this.centralScheduler=new EditorScheduler(this);this.sel=new SelectionState(this,findSelectionAtStart(this.doc));this.accurateSelection=false;this.input=new Input(this);this.addKeymap(this.options.keymap,-100);this.options.plugins.forEach(function(plugin){return plugin.attach(_this)})}_createClass(ProseMirror,[{key:"getOption",value:function getOption(name){return this.options[name]}},{key:"setTextSelection",value:function setTextSelection(anchor){var head=arguments.length<=1||arguments[1]===undefined?anchor:arguments[1];var $anchor=this.doc.resolve(anchor),$head=this.doc.resolve(head);if(!$anchor.parent.isTextblock||!$head.parent.isTextblock)throw new RangeError("Setting text selection with an end not in a textblock");this.setSelection(new TextSelection($anchor,$head))}},{key:"setNodeSelection",value:function setNodeSelection(pos){var $pos=this.doc.resolve(pos),node=$pos.nodeAfter;if(!node||!node.type.selectable)throw new RangeError("Trying to create a node selection that doesn't point at a selectable node");this.setSelection(new NodeSelection($pos))}},{key:"setSelection",value:function setSelection(selection){this.ensureOperation();if(!selection.eq(this.sel.range))this.sel.setAndSignal(selection)}},{key:"setDocInner",value:function setDocInner(doc){if(doc.type!=this.schema.nodes.doc)throw new RangeError("Trying to set a document with a different schema");this.doc=doc;this.ranges=new RangeStore(this);this.history=new History(this)}},{key:"setDoc",value:function setDoc(doc,sel){if(!sel)sel=findSelectionAtStart(doc);this.on.beforeSetDoc.dispatch(doc,sel);this.ensureOperation();this.setDocInner(doc);this.operation.docSet=true;this.sel.set(sel,true);this.on.setDoc.dispatch(doc,sel)}},{key:"updateDoc",value:function updateDoc(doc,mapping,selection){this.ensureOperation();this.ranges.transform(mapping);this.operation.mappings.push(mapping);this.doc=doc;this.sel.setAndSignal(selection||this.sel.range.map(doc,mapping));this.on.change.dispatch()}},{key:"apply",value:function apply(transform){var options=arguments.length<=1||arguments[1]===undefined?nullOptions:arguments[1];if(!transform.steps.length)return transform;if(!transform.docs[0].eq(this.doc))throw new RangeError("Applying a transform that does not start with the current document");if(options.filter!==false&&this.on.filterTransform.dispatch(transform))return transform;var selectionBeforeTransform=this.selection;this.on.beforeTransform.dispatch(transform,options);this.updateDoc(transform.doc,transform,options.selection||transform.selection);this.on.transform.dispatch(transform,selectionBeforeTransform,options);if(options.scrollIntoView)this.scrollIntoView();return transform}},{key:"ensureOperation",value:function ensureOperation(options){return this.operation||this.startOperation(options)}},{key:"startOperation",value:function startOperation(options){var _this2=this;this.operation=new Operation(this,options);if(!(options&&options.readSelection===false)&&this.sel.readFromDOM())this.operation.sel=this.sel.range;if(this.flushScheduled==null)this.flushScheduled=requestAnimationFrame(function(){return _this2.flush()});return this.operation}},{key:"unscheduleFlush",value:function unscheduleFlush(){if(this.flushScheduled!=null){cancelAnimationFrame(this.flushScheduled);this.flushScheduled=null}}},{key:"flush",value:function flush(){this.unscheduleFlush();var root=this.root.body||this.root;if(!root.contains(this.wrapper)||!this.operation)return false;this.on.flushing.dispatch();var op=this.operation,redrawn=false;if(!op)return false;if(op.composing)this.input.applyComposition();this.operation=null;this.accurateSelection=true;if(op.doc!=this.doc||this.dirtyNodes.size){redraw(this,this.dirtyNodes,this.doc,op.doc);this.dirtyNodes.clear();redrawn=true}if(redrawn||!op.sel.eq(this.sel.range)||op.focus)this.sel.toDOM(op.focus);if(op.scrollIntoView!==false)scrollIntoView(this,op.scrollIntoView);if(redrawn)this.on.draw.dispatch();this.on.flush.dispatch();this.accurateSelection=false;return redrawn}},{key:"addKeymap",value:function addKeymap(map){var priority=arguments.length<=1||arguments[1]===undefined?0:arguments[1];var i=0,maps=this.input.keymaps;for(;i<maps.length;i++){if(maps[i].priority<priority)break}maps.splice(i,0,{map:map,priority:priority})}},{key:"removeKeymap",value:function removeKeymap(map){var maps=this.input.keymaps;for(var i=0;i<maps.length;++i){if(maps[i].map==map||maps[i].map.options.name==map){maps.splice(i,1);return true}}}},{key:"markRange",value:function markRange(from,to,options){var range=new MarkedRange(from,to,options);this.ranges.addRange(range);return range}},{key:"removeRange",value:function removeRange(range){this.ranges.removeRange(range)}},{key:"activeMarks",value:function activeMarks(){return this.input.storedMarks||currentMarks(this)}},{key:"addActiveMark",value:function addActiveMark(mark){if(this.selection.empty){this.input.storedMarks=mark.addToSet(this.input.storedMarks||currentMarks(this));this.on.activeMarkChange.dispatch()}}},{key:"removeActiveMark",value:function removeActiveMark(markType){if(this.selection.empty){this.input.storedMarks=markType.removeFromSet(this.input.storedMarks||currentMarks(this));this.on.activeMarkChange.dispatch()}}},{key:"focus",value:function focus(){if(this.operation)this.operation.focus=true;else this.sel.toDOM(true)}},{key:"hasFocus",value:function hasFocus(){if(this.sel.range instanceof NodeSelection)return this.root.activeElement==this.content;else return _hasFocus(this)}},{key:"posAtCoords",value:function posAtCoords(coords){var result=mappedPosAtCoords(this,coords);return result&&result.pos}},{key:"contextAtCoords",value:function contextAtCoords(coords){var result=mappedPosAtCoords(this,coords);if(!result)return null;var $pos=this.doc.resolve(result.inLeaf==-1?result.pos:result.inLeaf),inside=[];for(var i=1;i<=$pos.depth;i++){inside.push({pos:$pos.before(i),node:$pos.node(i)})}if(result.inLeaf>-1){var after=$pos.nodeAfter;if(after&&!after.isText&&after.type.isLeaf)inside.push({pos:result.inLeaf,node:after})}return{pos:result.pos,inside:inside}}},{key:"coordsAtPos",value:function coordsAtPos(pos){this.flush();return _coordsAtPos(this,pos)}},{key:"scrollIntoView",value:function scrollIntoView(){var pos=arguments.length<=0||arguments[0]===undefined?null:arguments[0];this.ensureOperation();this.operation.scrollIntoView=pos}},{key:"markRangeDirty",value:function markRangeDirty(from,to){var doc=arguments.length<=2||arguments[2]===undefined?this.doc:arguments[2];this.ensureOperation();var dirty=this.dirtyNodes;var $from=doc.resolve(from),$to=doc.resolve(to);var same=$from.sameDepth($to);for(var depth=0;depth<=same;depth++){var child=$from.node(depth);if(!dirty.has(child))dirty.set(child,DIRTY_RESCAN)}var start=$from.index(same),end=$to.index(same)+(same==$to.depth&&$to.atNodeBoundary?0:1);var parent=$from.node(same);for(var i=start;i<end;i++){dirty.set(parent.child(i),DIRTY_REDRAW)}}},{key:"markAllDirty",value:function markAllDirty(){this.dirtyNodes.set(this.doc,DIRTY_REDRAW)}},{key:"translate",value:function translate(string){var trans=this.options.translate;return trans?trans(string):string}},{key:"scheduleDOMUpdate",value:function scheduleDOMUpdate(f){this.centralScheduler.set(f)}},{key:"unscheduleDOMUpdate",value:function unscheduleDOMUpdate(f){this.centralScheduler.unset(f)}},{key:"updateScheduler",value:function updateScheduler(subscriptions,start){return new UpdateScheduler(this,subscriptions,start)}},{key:"root",get:function get(){var cached=this._root;if(cached==null)for(var search=this.wrapper.parentNode;search;search=search.parentNode){if(search.nodeType==9||search.nodeType==11&&search.host)return this._root=search}return cached||document}},{key:"selection",get:function get(){if(!this.accurateSelection)this.ensureOperation();return this.sel.range}},{key:"tr",get:function get(){return new EditorTransform(this)}}]);return ProseMirror}();exports.ProseMirror=ProseMirror;function mappedPosAtCoords(pm,coords){if(pm.operation&&(pm.dirtyNodes.size>0||pm.operation.composing||pm.operation.docSet))pm.flush();var result=posAtCoords(pm,coords);if(!result)return null;if(pm.operation)return{pos:mapThrough(pm.operation.mappings,result.pos),inLeaf:result.inLeaf<0?null:mapThrough(pm.operation.mappings,result.inLeaf)};else return result}function currentMarks(pm){var head=pm.selection.head;return head==null?Mark.none:pm.doc.marksAt(head)}var nullOptions={};var Operation=function Operation(pm,options){_classCallCheck(this,Operation);this.doc=pm.doc;this.docSet=false;this.sel=options&&options.selection||pm.sel.range;this.scrollIntoView=false;this.focus=false;this.mappings=[];this.composing=null}},{"../model":113,"../transform":121,"../util/dom":135,"../util/map":137,"./css":87,"./dompos":89,"./draw":90,"./history":91,"./input":93,"./options":96,"./range":98,"./selection":99,"./transform":100,"./update":101,subscription:141}],96:[function(require,module,exports){"use strict";var _require=require("./keymap");var baseKeymap=_require.baseKeymap;var options=Object.create(null);options.schema=null;options.doc=null;options.place=null;options.historyDepth=100;options.historyEventDelay=500;options.scrollThreshold=0;options.scrollMargin=5;options.keymap=baseKeymap;options.label=null;options.translate=null;options.plugins=[];function parseOptions(obj){var result=Object.create(null);for(var option in options){result[option]=Object.prototype.hasOwnProperty.call(obj,option)?obj[option]:options[option]}return result}exports.parseOptions=parseOptions},{"./keymap":94}],97:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var pluginProps=Object.create(null);function registerProp(){var name=arguments.length<=0||arguments[0]===undefined?"plugin":arguments[0];for(var i=1;;i++){var prop=name+(i>1?"_"+i:"");if(!(prop in pluginProps))return pluginProps[prop]=prop}}var Plugin=function(){function Plugin(State,options,prop){_classCallCheck(this,Plugin);this.State=State;this.options=options||Object.create(null);this.prop=prop||registerProp(State.name)}_createClass(Plugin,[{key:"get",value:function get(pm){return pm.plugin[this.prop]}},{key:"attach",value:function attach(pm){if(this.get(pm))throw new RangeError("Attaching plugin multiple times");return pm.plugin[this.prop]=new this.State(pm,this.options)}},{key:"detach",value:function detach(pm){var found=this.get(pm);if(found){if(found.detach)found.detach(pm);delete pm.plugin[this.prop]}}},{key:"ensure",value:function ensure(pm){return this.get(pm)||this.attach(pm)}},{key:"config",value:function config(options){if(!options)return this;var result=Object.create(null);for(var prop in this.options){result[prop]=this.options[prop]}for(var _prop in options){result[_prop]=options[_prop]}return new Plugin(this.State,result,this.prop)}}]);return Plugin}();exports.Plugin=Plugin},{}],98:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var MarkedRange=function(){function MarkedRange(from,to,options){_classCallCheck(this,MarkedRange);this.options=options||{};this.from=from;this.to=to}_createClass(MarkedRange,[{key:"remove",value:function remove(){if(this.options.onRemove)this.options.onRemove(this.from,Math.max(this.to,this.from));this.from=this.to=null}}]);return MarkedRange}();exports.MarkedRange=MarkedRange;var RangeSorter=function(){function RangeSorter(){_classCallCheck(this,RangeSorter);this.sorted=[]}_createClass(RangeSorter,[{key:"find",value:function find(at){var min=0,max=this.sorted.length;for(;;){if(max<min+10){for(var i=min;i<max;i++){if(this.sorted[i].at>=at)return i}return max}var mid=min+max>>1;if(this.sorted[mid].at>at)max=mid;else min=mid}}},{key:"insert",value:function insert(obj){this.sorted.splice(this.find(obj.at),0,obj)}},{key:"remove",value:function remove(at,range){var pos=this.find(at);for(var dist=0;;dist++){var leftPos=pos-dist-1,rightPos=pos+dist;if(leftPos>=0&&this.sorted[leftPos].range==range){this.sorted.splice(leftPos,1);return}else if(rightPos<this.sorted.length&&this.sorted[rightPos].range==range){this.sorted.splice(rightPos,1);return}}}},{key:"resort",value:function resort(){for(var i=0;i<this.sorted.length;i++){var cur=this.sorted[i];var at=cur.at=cur.type=="open"?cur.range.from:cur.range.to;var pos=i;while(pos>0&&this.sorted[pos-1].at>at){this.sorted[pos]=this.sorted[pos-1];this.sorted[--pos]=cur}}}}]);return RangeSorter}();var RangeStore=function(){function RangeStore(pm){_classCallCheck(this,RangeStore);this.pm=pm;this.ranges=[];this.sorted=new RangeSorter}_createClass(RangeStore,[{key:"addRange",value:function addRange(range){this.ranges.push(range);this.sorted.insert({type:"open",at:range.from,range:range});this.sorted.insert({type:"close",at:range.to,range:range});if(range.options.className)this.pm.markRangeDirty(range.from,range.to)}},{key:"removeRange",value:function removeRange(range){var found=this.ranges.indexOf(range);if(found>-1){this.ranges.splice(found,1);this.sorted.remove(range.from,range);this.sorted.remove(range.to,range);if(range.options.className)this.pm.markRangeDirty(range.from,range.to);range.remove()}}},{key:"transform",value:function transform(mapping){for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];range.from=mapping.map(range.from,range.options.inclusiveLeft?-1:1);range.to=mapping.map(range.to,range.options.inclusiveRight?1:-1);if(range.options.removeWhenEmpty!==false&&range.from>=range.to){this.removeRange(range);i--}else if(range.from>range.to){range.to=range.from}}this.sorted.resort()}},{key:"activeRangeTracker",value:function activeRangeTracker(){return new RangeTracker(this.sorted.sorted)}}]);return RangeStore}();exports.RangeStore=RangeStore;function significant(obj){var range=obj.range;return range.options.className&&range.from!=range.to||range.options.elementBefore&&obj.type=="open"||range.options.elementAfter&&obj.type=="close"}var RangeTracker=function(){function RangeTracker(sorted){_classCallCheck(this,RangeTracker);this.sorted=sorted;this.pos=0;this.current=[];this.element=null}_createClass(RangeTracker,[{key:"advanceTo",value:function advanceTo(pos){var next=void 0;this.element=null;while(this.pos<this.sorted.length&&(next=this.sorted[this.pos]).at<=pos){if(significant(next)){var className=next.range.options.className,element=next.range.options.elementBefore;if(className){if(next.type=="open")this.current.push(className);else this.current.splice(this.current.indexOf(className),1)}if(element&&next.type=="open"&&next.at==pos)this.element=element}this.pos++}}},{key:"nextChangeBefore",value:function nextChangeBefore(pos){for(;;){if(this.pos==this.sorted.length)return-1;var next=this.sorted[this.pos];if(!significant(next))this.pos++;else if(next.at>=pos)return-1;else return next.at}}}]);return RangeTracker}()},{}],99:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../util/dom");var contains=_require.contains;var browser=require("../util/browser");var _require2=require("./dompos");var posFromDOM=_require2.posFromDOM;var DOMAfterPos=_require2.DOMAfterPos;var DOMFromPos=_require2.DOMFromPos;var coordsAtPos=_require2.coordsAtPos;var SelectionState=function(){function SelectionState(pm,range){var _this=this;_classCallCheck(this,SelectionState);this.pm=pm;this.range=range;this.polling=null;this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null;this.lastNode=null;pm.content.addEventListener("focus",function(){return _this.receivedFocus()});this.poller=this.poller.bind(this)}_createClass(SelectionState,[{key:"setAndSignal",value:function setAndSignal(range,clearLast){this.set(range,clearLast);this.pm.on.selectionChange.dispatch()}},{key:"set",value:function set(range,clearLast){this.pm.ensureOperation({readSelection:false,selection:range});this.range=range;if(clearLast!==false)this.lastAnchorNode=null}},{key:"poller",value:function poller(){if(hasFocus(this.pm)){if(!this.pm.operation)this.readFromDOM();this.polling=setTimeout(this.poller,100)}else{this.polling=null}}},{key:"startPolling",value:function startPolling(){clearTimeout(this.polling);this.polling=setTimeout(this.poller,50)}},{key:"fastPoll",value:function fastPoll(){this.startPolling()}},{key:"stopPolling",value:function stopPolling(){clearTimeout(this.polling);this.polling=null}},{key:"domChanged",value:function domChanged(){var sel=this.pm.root.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastHeadNode||sel.focusOffset!=this.lastHeadOffset}},{key:"storeDOMState",value:function storeDOMState(){var sel=this.pm.root.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastHeadNode=sel.focusNode;this.lastHeadOffset=sel.focusOffset}},{key:"readFromDOM",value:function readFromDOM(){if(!hasFocus(this.pm)||!this.domChanged())return false;var _selectionFromDOM=selectionFromDOM(this.pm,this.range.head);var range=_selectionFromDOM.range;var adjusted=_selectionFromDOM.adjusted;this.setAndSignal(range);if(range instanceof NodeSelection||adjusted){this.toDOM()}else{this.clearNode();this.storeDOMState()}return true}},{key:"toDOM",value:function toDOM(takeFocus){if(!hasFocus(this.pm)){if(!takeFocus)return;else if(browser.gecko)this.pm.content.focus()}if(this.range instanceof NodeSelection)this.nodeToDOM();else this.rangeToDOM()}},{key:"nodeToDOM",value:function nodeToDOM(){var dom=DOMAfterPos(this.pm,this.range.from);if(dom!=this.lastNode){this.clearNode();dom.classList.add("ProseMirror-selectednode");this.pm.content.classList.add("ProseMirror-nodeselection");this.lastNode=dom}var range=document.createRange(),sel=this.pm.root.getSelection();range.selectNode(dom);sel.removeAllRanges();sel.addRange(range);this.storeDOMState()}},{key:"rangeToDOM",value:function rangeToDOM(){this.clearNode();var anchor=DOMFromPos(this.pm,this.range.anchor);var head=DOMFromPos(this.pm,this.range.head);var sel=this.pm.root.getSelection(),range=document.createRange();if(sel.extend){range.setEnd(anchor.node,anchor.offset);range.collapse(false)}else{if(this.range.anchor>this.range.head){var tmp=anchor;anchor=head;head=tmp}range.setEnd(head.node,head.offset);range.setStart(anchor.node,anchor.offset)}sel.removeAllRanges();sel.addRange(range);if(sel.extend)sel.extend(head.node,head.offset);this.storeDOMState()}},{key:"clearNode",value:function clearNode(){if(this.lastNode){this.lastNode.classList.remove("ProseMirror-selectednode");this.pm.content.classList.remove("ProseMirror-nodeselection");this.lastNode=null;return true}}},{key:"receivedFocus",value:function receivedFocus(){if(this.polling==null)this.startPolling()}}]);return SelectionState}();exports.SelectionState=SelectionState;var Selection=function(){_createClass(Selection,[{key:"from",get:function get(){return this.$from.pos}},{key:"to",get:function get(){return this.$to.pos}}]);function Selection($from,$to){_classCallCheck(this,Selection);this.$from=$from;this.$to=$to}_createClass(Selection,[{key:"empty",get:function get(){return this.from==this.to}}]);return Selection}();exports.Selection=Selection;var TextSelection=function(_Selection){_inherits(TextSelection,_Selection);_createClass(TextSelection,[{key:"anchor",get:function get(){return this.$anchor.pos}},{key:"head",get:function get(){return this.$head.pos}}]);function TextSelection($anchor){var $head=arguments.length<=1||arguments[1]===undefined?$anchor:arguments[1];_classCallCheck(this,TextSelection);var inv=$anchor.pos>$head.pos;var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(TextSelection).call(this,inv?$head:$anchor,inv?$anchor:$head));_this2.$anchor=$anchor;_this2.$head=$head;return _this2}_createClass(TextSelection,[{key:"eq",value:function eq(other){return other instanceof TextSelection&&other.head==this.head&&other.anchor==this.anchor}},{key:"map",value:function map(doc,mapping){var $head=doc.resolve(mapping.map(this.head));if(!$head.parent.isTextblock)return findSelectionNear($head);var $anchor=doc.resolve(mapping.map(this.anchor));return new TextSelection($anchor.parent.isTextblock?$anchor:$head,$head)}},{key:"inverted",get:function get(){return this.anchor>this.head}},{key:"token",get:function get(){return new SelectionToken(TextSelection,this.anchor,this.head)}}],[{key:"mapToken",value:function mapToken(token,mapping){return new SelectionToken(TextSelection,mapping.map(token.a),mapping.map(token.b))}},{key:"fromToken",value:function fromToken(token,doc){var $head=doc.resolve(token.b);if(!$head.parent.isTextblock)return findSelectionNear($head);var $anchor=doc.resolve(token.a);return new TextSelection($anchor.parent.isTextblock?$anchor:$head,$head)}}]);return TextSelection}(Selection);exports.TextSelection=TextSelection;var NodeSelection=function(_Selection2){_inherits(NodeSelection,_Selection2);function NodeSelection($from){_classCallCheck(this,NodeSelection);var $to=$from.plusOne();var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(NodeSelection).call(this,$from,$to));_this3.node=$from.nodeAfter;return _this3}_createClass(NodeSelection,[{key:"eq",value:function eq(other){return other instanceof NodeSelection&&this.from==other.from}},{key:"map",value:function map(doc,mapping){var $from=doc.resolve(mapping.map(this.from,1));var to=mapping.map(this.to,-1);var node=$from.nodeAfter;if(node&&to==$from.pos+node.nodeSize&&node.type.selectable)return new NodeSelection($from);return findSelectionNear($from)}},{key:"token",get:function get(){return new SelectionToken(NodeSelection,this.from,this.to)}}],[{key:"mapToken",value:function mapToken(token,mapping){return new SelectionToken(NodeSelection,mapping.map(token.a,1),mapping.map(token.b,-1))}},{key:"fromToken",value:function fromToken(token,doc){var $from=doc.resolve(token.a),node=$from.nodeAfter;if(node&&token.b==token.a+node.nodeSize&&node.type.selectable)return new NodeSelection($from);return findSelectionNear($from)}}]);return NodeSelection}(Selection);exports.NodeSelection=NodeSelection;var SelectionToken=function SelectionToken(type,a,b){_classCallCheck(this,SelectionToken);this.type=type;this.a=a;this.b=b};function isCollapsed(sel){return sel.focusNode===sel.anchorNode&&sel.focusOffset===sel.anchorOffset}exports.isCollapsed=isCollapsed;function selectionFromDOM(pm,oldHead){var sel=pm.root.getSelection();var doc=pm.doc;var _posFromDOM=posFromDOM(sel.focusNode,sel.focusOffset);var head=_posFromDOM.pos;var headLeaf=_posFromDOM.inLeaf;if(headLeaf>-1&&isCollapsed(sel)){var $leaf=doc.resolve(headLeaf),node=$leaf.nodeAfter;if(node.type.selectable&&!node.type.isInline)return{range:new NodeSelection($leaf),adjusted:true}}var anchor=isCollapsed(sel)?head:posFromDOM(sel.anchorNode,sel.anchorOffset).pos;var range=findSelectionNear(doc.resolve(head),oldHead!=null&&oldHead<head?1:-1);if(range instanceof TextSelection){var selNearAnchor=findSelectionNear(doc.resolve(anchor),anchor>range.to?-1:1,true);range=new TextSelection(selNearAnchor.$anchor,range.$head)}else if(anchor<range.from||anchor>range.to){var inv=anchor>range.to;range=new TextSelection(findSelectionNear(doc.resolve(anchor),inv?-1:1,true).$anchor,findSelectionNear(inv?range.$from:range.$to,inv?1:-1,true).$head)}return{range:range,adjusted:head!=range.head||anchor!=range.anchor}}function hasFocus(pm){if(pm.root.activeElement!=pm.content)return false;var sel=pm.root.getSelection();return sel.rangeCount&&contains(pm.content,sel.anchorNode)}exports.hasFocus=hasFocus;function findSelectionIn(doc,node,pos,index,dir,text){if(node.isTextblock)return new TextSelection(doc.resolve(pos));for(var i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){var child=node.child(i);if(!child.type.isLeaf){var inner=findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}else if(!text&&child.type.selectable){return new NodeSelection(doc.resolve(pos-(dir<0?child.nodeSize:0)))}pos+=child.nodeSize*dir}}function findSelectionFrom($pos,dir,text){var inner=$pos.parent.isTextblock?new TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,text);if(inner)return inner;for(var depth=$pos.depth-1;depth>=0;depth--){var found=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,text):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,text);if(found)return found}}exports.findSelectionFrom=findSelectionFrom;function findSelectionNear($pos){var bias=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var text=arguments[2];var result=findSelectionFrom($pos,bias,text)||findSelectionFrom($pos,-bias,text);if(!result)throw new RangeError("Searching for selection in invalid document "+$pos.node(0));return result}exports.findSelectionNear=findSelectionNear;function findSelectionAtStart(doc,text){return findSelectionIn(doc,doc,0,0,1,text)}exports.findSelectionAtStart=findSelectionAtStart;function findSelectionAtEnd(doc,text){return findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1,text)}exports.findSelectionAtEnd=findSelectionAtEnd;function verticalMotionLeavesTextblock(pm,$pos,dir){var dom=$pos.depth?DOMAfterPos(pm,$pos.before()):pm.content;var coords=coordsAtPos(pm,$pos.pos);for(var child=dom.firstChild;child;child=child.nextSibling){if(child.nodeType!=1)continue;var boxes=child.getClientRects();for(var i=0;i<boxes.length;i++){var box=boxes[i];if(dir<0?box.bottom<coords.top:box.top>coords.bottom)return false}}return true}exports.verticalMotionLeavesTextblock=verticalMotionLeavesTextblock},{"../util/browser":133,"../util/dom":135,"./dompos":89}],100:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../model");var Fragment=_require.Fragment;var _require2=require("../transform");var Transform=_require2.Transform;var insertPoint=_require2.insertPoint;var _require3=require("./selection");var findSelectionNear=_require3.findSelectionNear;var _applyAndScroll={scrollIntoView:true};var EditorTransform=function(_Transform){_inherits(EditorTransform,_Transform);function EditorTransform(pm){_classCallCheck(this,EditorTransform);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(EditorTransform).call(this,pm.doc));_this.pm=pm;_this.curSelection=pm.selection;_this.curSelectionAt=0;return _this}_createClass(EditorTransform,[{key:"apply",value:function apply(options){
return this.pm.apply(this,options)}},{key:"applyAndScroll",value:function applyAndScroll(){return this.pm.apply(this,_applyAndScroll)}},{key:"setSelection",value:function setSelection(selection){this.curSelection=selection;this.curSelectionAt=this.steps.length;return this}},{key:"replaceSelection",value:function replaceSelection(node,inheritMarks){var _selection=this.selection;var empty=_selection.empty;var $from=_selection.$from;var $to=_selection.$to;var from=_selection.from;var to=_selection.to;var selNode=_selection.node;if(node&&node.isInline&&inheritMarks!==false)node=node.mark(empty?this.pm.input.storedMarks:this.doc.marksAt(from));var fragment=Fragment.from(node);if(selNode&&selNode.isTextblock&&node&&node.isInline){from++;to--}else if(selNode){var depth=$from.depth;while(depth&&$from.node(depth).childCount==1&&!$from.node(depth).canReplace($from.index(depth),$to.indexAfter(depth),fragment)){depth--}if(depth<$from.depth){from=$from.before(depth+1);to=$from.after(depth+1)}}else if(node&&from==to){var point=insertPoint(this.doc,from,node.type,node.attrs);if(point!=null)from=to=point}this.replaceWith(from,to,fragment);var map=this.maps[this.maps.length-1];this.setSelection(findSelectionNear(this.doc.resolve(map.map(to))));return this}},{key:"deleteSelection",value:function deleteSelection(){return this.replaceSelection()}},{key:"typeText",value:function typeText(text){return this.replaceSelection(this.pm.schema.text(text),true)}},{key:"selection",get:function get(){if(this.curSelectionAt<this.steps.length){if(this.curSelectionAt){for(var i=this.curSelectionAt;i<this.steps.length;i++){this.curSelection=this.curSelection.map(i==this.steps.length-1?this.doc:this.docs[i+1],this.maps[i])}}else{this.curSelection=this.curSelection.map(this.doc,this)}this.curSelectionAt=this.steps.length}return this.curSelection}}]);return EditorTransform}(Transform);exports.EditorTransform=EditorTransform},{"../model":113,"../transform":121,"./selection":99}],101:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var UPDATE_TIMEOUT=50;var MIN_FLUSH_DELAY=100;var EditorScheduler=function(){function EditorScheduler(pm){var _this=this;_classCallCheck(this,EditorScheduler);this.waiting=[];this.timeout=null;this.lastForce=0;this.pm=pm;this.timedOut=function(){if(_this.pm.operation)_this.timeout=setTimeout(_this.timedOut,UPDATE_TIMEOUT);else _this.force()};pm.on.flush.add(this.onFlush.bind(this))}_createClass(EditorScheduler,[{key:"set",value:function set(f){if(this.waiting.length==0)this.timeout=setTimeout(this.timedOut,UPDATE_TIMEOUT);if(this.waiting.indexOf(f)==-1)this.waiting.push(f)}},{key:"unset",value:function unset(f){var index=this.waiting.indexOf(f);if(index>-1)this.waiting.splice(index,1)}},{key:"force",value:function force(){clearTimeout(this.timeout);this.lastForce=Date.now();while(this.waiting.length){for(var i=0;i<this.waiting.length;i++){var result=this.waiting[i]();if(result)this.waiting[i]=result;else this.waiting.splice(i--,1)}}}},{key:"onFlush",value:function onFlush(){if(this.waiting.length&&Date.now()-this.lastForce>MIN_FLUSH_DELAY)this.force()}}]);return EditorScheduler}();exports.EditorScheduler=EditorScheduler;var UpdateScheduler=function(){function UpdateScheduler(pm,subscriptions,start){var _this2=this;_classCallCheck(this,UpdateScheduler);this.pm=pm;this.start=start;this.subscriptions=subscriptions;this.onEvent=this.onEvent.bind(this);this.subscriptions.forEach(function(sub){return sub.add(_this2.onEvent)})}_createClass(UpdateScheduler,[{key:"detach",value:function detach(){var _this3=this;this.pm.unscheduleDOMUpdate(this.start);this.subscriptions.forEach(function(sub){return sub.remove(_this3.onEvent)})}},{key:"onEvent",value:function onEvent(){this.pm.scheduleDOMUpdate(this.start)}},{key:"force",value:function force(){if(this.pm.operation){this.onEvent()}else{this.pm.unscheduleDOMUpdate(this.start);for(var run=this.start;run;run=run()){}}}}]);return UpdateScheduler}();exports.UpdateScheduler=UpdateScheduler},{}],102:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var markdownit=require("markdown-it");var _require=require("../schema-basic");var schema=_require.schema;var _require2=require("../model");var Mark=_require2.Mark;function maybeMerge(a,b){if(a.isText&&b.isText&&Mark.sameSet(a.marks,b.marks))return a.copy(a.text+b.text)}var MarkdownParseState=function(){function MarkdownParseState(schema,tokenHandlers){_classCallCheck(this,MarkdownParseState);this.schema=schema;this.stack=[{type:schema.nodes.doc,content:[]}];this.marks=Mark.none;this.tokenHandlers=tokenHandlers}_createClass(MarkdownParseState,[{key:"top",value:function top(){return this.stack[this.stack.length-1]}},{key:"push",value:function push(elt){if(this.stack.length)this.top().content.push(elt)}},{key:"addText",value:function addText(text){if(!text)return;var nodes=this.top().content,last=nodes[nodes.length-1];var node=this.schema.text(text,this.marks),merged=void 0;if(last&&(merged=maybeMerge(last,node)))nodes[nodes.length-1]=merged;else nodes.push(node)}},{key:"openMark",value:function openMark(mark){this.marks=mark.addToSet(this.marks)}},{key:"closeMark",value:function closeMark(mark){this.marks=mark.removeFromSet(this.marks)}},{key:"parseTokens",value:function parseTokens(toks){for(var i=0;i<toks.length;i++){var tok=toks[i];var handler=this.tokenHandlers[tok.type];if(!handler)throw new Error("Token type `"+tok.type+"` not supported by Markdown parser");handler(this,tok)}}},{key:"addNode",value:function addNode(type,attrs,content){var node=type.createAndFill(attrs,content,this.marks);if(!node)return null;this.push(node);return node}},{key:"openNode",value:function openNode(type,attrs){this.stack.push({type:type,attrs:attrs,content:[]})}},{key:"closeNode",value:function closeNode(){if(this.marks.length)this.marks=Mark.none;var info=this.stack.pop();return this.addNode(info.type,info.attrs,info.content)}}]);return MarkdownParseState}();function attrs(given,token){return given instanceof Function?given(token):given}function noOpenClose(type){return type=="code_inline"||type=="code_block"||type=="fence"}function withoutTrailingNewline(str){return str[str.length-1]=="\n"?str.slice(0,str.length-1):str}function tokenHandlers(schema,tokens){var handlers=Object.create(null);var _loop=function _loop(type){var spec=tokens[type];if(spec.block){(function(){var nodeType=schema.nodeType(spec.block);if(noOpenClose(type)){handlers[type]=function(state,tok){state.openNode(nodeType,attrs(spec.attrs,tok));state.addText(withoutTrailingNewline(tok.content));state.closeNode()}}else{handlers[type+"_open"]=function(state,tok){return state.openNode(nodeType,attrs(spec.attrs,tok))};handlers[type+"_close"]=function(state){return state.closeNode()}}})()}else if(spec.node){(function(){var nodeType=schema.nodeType(spec.node);handlers[type]=function(state,tok){return state.addNode(nodeType,attrs(spec.attrs,tok))}})()}else if(spec.mark){(function(){var markType=schema.marks[spec.mark];if(noOpenClose(type)){handlers[type]=function(state,tok){state.openMark(markType.create(attrs(spec.attrs,tok)));state.addText(withoutTrailingNewline(tok.content));state.closeMark(markType)}}else{handlers[type+"_open"]=function(state,tok){return state.openMark(markType.create(attrs(spec.attrs,tok)))};handlers[type+"_close"]=function(state){return state.closeMark(markType)}}})()}else{throw new RangeError("Unrecognized parsing spec "+JSON.stringify(spec))}};for(var type in tokens){_loop(type)}handlers.text=function(state,tok){return state.addText(tok.content)};handlers.inline=function(state,tok){return state.parseTokens(tok.children)};handlers.softbreak=function(state){return state.addText("\n")};return handlers}var MarkdownParser=function(){function MarkdownParser(schema,tokenizer,tokens){_classCallCheck(this,MarkdownParser);this.tokens=tokens;this.schema=schema;this.tokenizer=tokenizer;this.tokenHandlers=tokenHandlers(schema,tokens)}_createClass(MarkdownParser,[{key:"parse",value:function parse(text){var state=new MarkdownParseState(this.schema,this.tokenHandlers),doc=void 0;state.parseTokens(this.tokenizer.parse(text,{}));do{doc=state.closeNode()}while(state.stack.length);return doc}}]);return MarkdownParser}();exports.MarkdownParser=MarkdownParser;var defaultMarkdownParser=new MarkdownParser(schema,markdownit("commonmark",{html:false}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list"},ordered_list:{block:"ordered_list",attrs:function attrs(tok){return{order:+tok.attrGet("order")||1}}},heading:{block:"heading",attrs:function attrs(tok){return{level:+tok.tag.slice(1)}}},code_block:{block:"code_block"},fence:{block:"code_block"},hr:{node:"horizontal_rule"},image:{node:"image",attrs:function attrs(tok){return{src:tok.attrGet("src"),title:tok.attrGet("title")||null,alt:tok.children[0]&&tok.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",attrs:function attrs(tok){return{href:tok.attrGet("href"),title:tok.attrGet("title")||null}}},code_inline:{mark:"code"}});exports.defaultMarkdownParser=defaultMarkdownParser},{"../model":113,"../schema-basic":120,"markdown-it":26}],103:[function(require,module,exports){"use strict";var _require=require("./from_markdown");exports.defaultMarkdownParser=_require.defaultMarkdownParser;exports.MarkdownParser=_require.MarkdownParser;var _require2=require("./to_markdown");exports.MarkdownSerializer=_require2.MarkdownSerializer;exports.defaultMarkdownSerializer=_require2.defaultMarkdownSerializer;exports.MarkdownSerializerState=_require2.MarkdownSerializerState;_require2},{"./from_markdown":102,"./to_markdown":104}],104:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var MarkdownSerializer=function(){function MarkdownSerializer(nodes,marks){_classCallCheck(this,MarkdownSerializer);this.nodes=nodes;this.marks=marks}_createClass(MarkdownSerializer,[{key:"serialize",value:function serialize(content,options){var state=new MarkdownSerializerState(this.nodes,this.marks,options);state.renderContent(content);return state.out}}]);return MarkdownSerializer}();exports.MarkdownSerializer=MarkdownSerializer;var defaultMarkdownSerializer=new MarkdownSerializer({blockquote:function blockquote(state,node){state.wrapBlock("> ",null,node,function(){return state.renderContent(node)})},code_block:function code_block(state,node){if(node.attrs.params==null){state.wrapBlock("    ",null,node,function(){return state.text(node.textContent,false)})}else{state.write("```"+node.attrs.params+"\n");state.text(node.textContent,false);state.ensureNewLine();state.write("```");state.closeBlock(node)}},heading:function heading(state,node){state.write(state.repeat("#",node.attrs.level)+" ");state.renderInline(node);state.closeBlock(node)},horizontal_rule:function horizontal_rule(state,node){state.write(node.attrs.markup||"---");state.closeBlock(node)},bullet_list:function bullet_list(state,node){state.renderList(node,"  ",function(){return(node.attrs.bullet||"*")+" "})},ordered_list:function ordered_list(state,node){var start=node.attrs.order||1;var maxW=String(start+node.childCount-1).length;var space=state.repeat(" ",maxW+2);state.renderList(node,space,function(i){var nStr=String(start+i);return state.repeat(" ",maxW-nStr.length)+nStr+". "})},list_item:function list_item(state,node){state.renderContent(node)},paragraph:function paragraph(state,node){state.renderInline(node);state.closeBlock(node)},image:function image(state,node){state.write("!["+state.esc(node.attrs.alt||"")+"]("+state.esc(node.attrs.src)+(node.attrs.title?" "+state.quote(node.attrs.title):"")+")")},hard_break:function hard_break(state){state.write("\\\n")},text:function text(state,node){state.text(node.text)}},{em:{open:"*",close:"*",mixable:true},strong:{open:"**",close:"**",mixable:true},link:{open:"[",close:function close(state,mark){return"]("+state.esc(mark.attrs.href)+(mark.attrs.title?" "+state.quote(mark.attrs.title):"")+")"}},code:{open:"`",close:"`"}});exports.defaultMarkdownSerializer=defaultMarkdownSerializer;var MarkdownSerializerState=function(){function MarkdownSerializerState(nodes,marks,options){_classCallCheck(this,MarkdownSerializerState);this.nodes=nodes;this.marks=marks;this.delim=this.out="";this.closed=false;this.inTightList=false;this.options=options||{}}_createClass(MarkdownSerializerState,[{key:"flushClose",value:function flushClose(size){if(this.closed){if(!this.atBlank())this.out+="\n";if(size==null)size=2;if(size>1){var delimMin=this.delim;var trim=/\s+$/.exec(delimMin);if(trim)delimMin=delimMin.slice(0,delimMin.length-trim[0].length);for(var i=1;i<size;i++){this.out+=delimMin+"\n"}}this.closed=false}}},{key:"wrapBlock",value:function wrapBlock(delim,firstDelim,node,f){var old=this.delim;this.write(firstDelim||delim);this.delim+=delim;f();this.delim=old;this.closeBlock(node)}},{key:"atBlank",value:function atBlank(){return/(^|\n)$/.test(this.out)}},{key:"ensureNewLine",value:function ensureNewLine(){if(!this.atBlank())this.out+="\n"}},{key:"write",value:function write(content){this.flushClose();if(this.delim&&this.atBlank())this.out+=this.delim;if(content)this.out+=content}},{key:"closeBlock",value:function closeBlock(node){this.closed=node}},{key:"text",value:function text(_text,escape){var lines=_text.split("\n");for(var i=0;i<lines.length;i++){var startOfLine=this.atBlank()||this.closed;this.write();this.out+=escape!==false?this.esc(lines[i],startOfLine):lines[i];if(i!=lines.length-1)this.out+="\n"}}},{key:"render",value:function render(node){this.nodes[node.type.name](this,node)}},{key:"renderContent",value:function renderContent(parent){var _this=this;parent.forEach(function(child){return _this.render(child)})}},{key:"renderInline",value:function renderInline(parent){var _this2=this;var active=[];var progress=function progress(node){var marks=node?node.marks:[];var code=marks.length&&marks[marks.length-1].type.isCode&&marks[marks.length-1];var len=marks.length-(code?1:0);outer:for(var i=0;i<len;i++){var mark=marks[i];if(!_this2.marks[mark.type.name].mixable)break;for(var j=0;j<active.length;j++){var other=active[j];if(!_this2.marks[other.type.name].mixable)break;if(mark.eq(other)){if(i>j)marks=marks.slice(0,j).concat(mark).concat(marks.slice(j,i)).concat(marks.slice(i+1,len));else if(j>i)marks=marks.slice(0,i).concat(marks.slice(i+1,j)).concat(mark).concat(marks.slice(j,len));continue outer}}}var keep=0;while(keep<Math.min(active.length,len)&&marks[keep].eq(active[keep])){++keep}while(keep<active.length){_this2.text(_this2.markString(active.pop(),false),false)}while(active.length<len){var add=marks[active.length];active.push(add);_this2.text(_this2.markString(add,true),false)}if(node){if(code&&node.isText)_this2.text(_this2.markString(code,false)+node.text+_this2.markString(code,true),false);else _this2.render(node)}};parent.forEach(progress);progress(null)}},{key:"renderList",value:function renderList(node,delim,firstDelim){var _this3=this;if(this.closed&&this.closed.type==node.type)this.flushClose(3);else if(this.inTightList)this.flushClose(1);var prevTight=this.inTightList;this.inTightList=node.attrs.tight;var _loop=function _loop(i){if(i&&node.attrs.tight)_this3.flushClose(1);_this3.wrapBlock(delim,firstDelim(i),node,function(){return _this3.render(node.child(i))})};for(var i=0;i<node.childCount;i++){_loop(i)}this.inTightList=prevTight}},{key:"esc",value:function esc(str,startOfLine){str=str.replace(/[`*\\~+\[\]]/g,"\\$&");if(startOfLine)str=str.replace(/^[:#-*]/,"\\$&").replace(/^(\d+)\./,"$1\\.");return str}},{key:"quote",value:function quote(str){var wrap=str.indexOf('"')==-1?'""':str.indexOf("'")==-1?"''":"()";return wrap[0]+str+wrap[1]}},{key:"repeat",value:function repeat(str,n){var out="";for(var i=0;i<n;i++){out+=str}return out}},{key:"markString",value:function markString(mark,open){var info=this.marks[mark.type.name];var value=open?info.open:info.close;return typeof value=="string"?value:value(this,mark)}}]);return MarkdownSerializerState}();exports.MarkdownSerializerState=MarkdownSerializerState},{}],105:[function(require,module,exports){"use strict";var _require=require("../util/dom");var insertCSS=_require.insertCSS;var SVG="http://www.w3.org/2000/svg";var XLINK="http://www.w3.org/1999/xlink";var prefix="ProseMirror-icon";function hashPath(path){var hash=0;for(var i=0;i<path.length;i++){hash=(hash<<5)-hash+path.charCodeAt(i)|0}return hash}function getIcon(icon){var node=document.createElement("div");node.className=prefix;if(icon.path){var name="pm-icon-"+hashPath(icon.path).toString(16);if(!document.getElementById(name))buildSVG(name,icon);var svg=node.appendChild(document.createElementNS(SVG,"svg"));svg.style.width=icon.width/icon.height+"em";var use=svg.appendChild(document.createElementNS(SVG,"use"));use.setAttributeNS(XLINK,"href",/([^#]*)/.exec(document.location)[1]+"#"+name)}else if(icon.dom){node.appendChild(icon.dom.cloneNode(true))}else{node.appendChild(document.createElement("span")).textContent=icon.text||"";if(icon.css)node.firstChild.style.cssText=icon.css}return node}exports.getIcon=getIcon;function buildSVG(name,data){var collection=document.getElementById(prefix+"-collection");if(!collection){collection=document.createElementNS(SVG,"svg");collection.id=prefix+"-collection";collection.style.display="none";document.body.insertBefore(collection,document.body.firstChild)}var sym=document.createElementNS(SVG,"symbol");sym.id=name;sym.setAttribute("viewBox","0 0 "+data.width+" "+data.height);var path=sym.appendChild(document.createElementNS(SVG,"path"));path.setAttribute("d",data.path);collection.appendChild(sym)}insertCSS("\n."+prefix+" {\n  display: inline-block;\n  line-height: .8;\n  vertical-align: -2px; /* Compensate for padding */\n  padding: 2px 8px;\n  cursor: pointer;\n}\n\n."+prefix+" svg {\n  fill: currentColor;\n  height: 1em;\n}\n\n."+prefix+" span {\n  vertical-align: text-top;\n}")},{"../util/dom":135}],106:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../util/dom");var elt=_require.elt;var insertCSS=_require.insertCSS;var _require$commands=require("../edit").commands;var undo=_require$commands.undo;var redo=_require$commands.redo;var lift=_require$commands.lift;var joinUp=_require$commands.joinUp;var selectParentNode=_require$commands.selectParentNode;var wrapIn=_require$commands.wrapIn;var setBlockType=_require$commands.setBlockType;var wrapInList=_require$commands.wrapInList;var toggleMark=_require$commands.toggleMark;var _require2=require("../util/obj");var copyObj=_require2.copyObj;var _require3=require("./icons");var getIcon=_require3.getIcon;var prefix="ProseMirror-menu";var MenuItem=function(){function MenuItem(spec){_classCallCheck(this,MenuItem);this.spec=spec}_createClass(MenuItem,[{key:"render",value:function render(pm){var disabled=false,spec=this.spec;if(spec.select&&!spec.select(pm)){if(spec.onDeselected=="disable")disabled=true;else return null}var active=spec.active&&!disabled&&spec.active(pm);var dom=void 0;if(spec.render){dom=spec.render(pm)}else if(spec.icon){dom=getIcon(spec.icon);if(active)dom.classList.add(prefix+"-active")}else if(spec.label){dom=elt("div",null,pm.translate(spec.label))}else{throw new RangeError("MenuItem without render, icon, or label property")}if(spec.title)dom.setAttribute("title",pm.translate(spec.title));if(spec.class)dom.classList.add(spec.class);if(disabled)dom.classList.add(prefix+"-disabled");if(spec.css)dom.style.cssText+=spec.css;if(!disabled)dom.addEventListener(spec.execEvent||"mousedown",function(e){e.preventDefault();e.stopPropagation();pm.on.interaction.dispatch();spec.run(pm)});return dom}}]);return MenuItem}();exports.MenuItem=MenuItem;var Dropdown=function(){function Dropdown(content,options){_classCallCheck(this,Dropdown);this.options=options||{};this.content=Array.isArray(content)?content:[content]}_createClass(Dropdown,[{key:"render",value:function render(pm){var _this=this;var items=renderDropdownItems(this.content,pm);if(!items.length)return null;var dom=elt("div",{"class":prefix+"-dropdown "+(this.options.class||""),style:this.options.css,title:this.options.title&&pm.translate(this.options.title)},pm.translate(this.options.label));var open=null;dom.addEventListener("mousedown",function(e){e.preventDefault();e.stopPropagation();if(open&&open())open=null;else open=_this.expand(pm,dom,items)});return dom}},{key:"expand",value:function expand(pm,dom,items){var box=dom.getBoundingClientRect(),outer=pm.wrapper.getBoundingClientRect();var menuDOM=elt("div",{"class":prefix+"-dropdown-menu "+(this.options.class||""),style:"left: "+(box.left-outer.left)+"px; top: "+(box.bottom-outer.top)+"px"},items);var done=false;function finish(){if(done)return;done=true;pm.on.interaction.remove(finish);pm.wrapper.removeChild(menuDOM);return true}pm.on.interaction.dispatch();pm.wrapper.appendChild(menuDOM);pm.on.interaction.add(finish);return finish}}]);return Dropdown}();exports.Dropdown=Dropdown;function renderDropdownItems(items,pm){var rendered=[];for(var i=0;i<items.length;i++){var inner=items[i].render(pm);if(inner)rendered.push(elt("div",{"class":prefix+"-dropdown-item"},inner))}return rendered}var DropdownSubmenu=function(){function DropdownSubmenu(content,options){_classCallCheck(this,DropdownSubmenu);this.options=options||{};this.content=Array.isArray(content)?content:[content]}_createClass(DropdownSubmenu,[{key:"render",value:function render(pm){var items=renderDropdownItems(this.content,pm);if(!items.length)return null;var label=elt("div",{"class":prefix+"-submenu-label"},pm.translate(this.options.label));var wrap=elt("div",{"class":prefix+"-submenu-wrap"},label,elt("div",{"class":prefix+"-submenu"},items));label.addEventListener("mousedown",function(e){e.preventDefault();e.stopPropagation();wrap.classList.toggle(prefix+"-submenu-wrap-active")});return wrap}}]);return DropdownSubmenu}();exports.DropdownSubmenu=DropdownSubmenu;function renderGrouped(pm,content){var result=document.createDocumentFragment(),needSep=false;for(var i=0;i<content.length;i++){var items=content[i],added=false;for(var j=0;j<items.length;j++){var rendered=items[j].render(pm);if(rendered){if(!added&&needSep)result.appendChild(separator());result.appendChild(elt("span",{"class":prefix+"item"},rendered));added=true}}if(added)needSep=true}return result}exports.renderGrouped=renderGrouped;function separator(){return elt("span",{"class":prefix+"separator"})}var icons={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}};exports.icons=icons;var joinUpItem=new MenuItem({title:"Join with above block",run:joinUp,select:function select(pm){return joinUp(pm,false)},icon:icons.join});exports.joinUpItem=joinUpItem;var liftItem=new MenuItem({title:"Lift out of enclosing block",run:lift,select:function select(pm){return lift(pm,false)},icon:icons.lift});exports.liftItem=liftItem;var selectParentNodeItem=new MenuItem({title:"Select parent node",run:selectParentNode,select:function select(pm){return selectParentNode(pm,false)},icon:icons.selectParentNode});exports.selectParentNodeItem=selectParentNodeItem;var undoItem=new MenuItem({title:"Undo last change",run:undo,select:function select(pm){return undo(pm,false)},icon:icons.undo});exports.undoItem=undoItem;var redoItem=new MenuItem({title:"Redo last undone change",run:redo,select:function select(pm){return redo(pm,false)},icon:icons.redo});exports.redoItem=redoItem;function markActive(pm,type){var _pm$selection=pm.selection;var from=_pm$selection.from;var to=_pm$selection.to;var empty=_pm$selection.empty;if(empty)return type.isInSet(pm.activeMarks());else return pm.doc.rangeHasMark(from,to,type)}function toggleMarkItem(markType,options){var command=toggleMark(markType,options.attrs);var base={run:function run(pm){command(pm)},active:function active(pm){return markActive(pm,markType)},select:function select(pm){return command(pm,false)}};if(options.attrs instanceof Function)base.run=function(pm){if(markActive(pm,markType))command(pm);else options.attrs(pm,function(attrs){return toggleMark(markType,attrs)(pm)})};return new MenuItem(copyObj(options,base))}exports.toggleMarkItem=toggleMarkItem;function insertItem(nodeType,options){return new MenuItem(copyObj(options,{select:function select(pm){var $from=pm.selection.$from;for(var d=$from.depth;d>=0;d--){var index=$from.index(d);if($from.node(d).canReplaceWith(index,index,nodeType,options.attrs instanceof Function?null:options.attrs))return true}},run:function run(pm){function done(attrs){pm.tr.replaceSelection(nodeType.createAndFill(attrs)).apply()}if(options.attrs instanceof Function)options.attrs(pm,done);else done(options.attrs)}}))}exports.insertItem=insertItem;function wrapItem(nodeType,options){return new MenuItem(copyObj(options,{run:function run(pm){if(options.attrs instanceof Function)options.attrs(pm,function(attrs){return wrapIn(nodeType,attrs)(pm)});else wrapIn(nodeType,options.attrs)(pm)},select:function select(pm){return wrapIn(nodeType,options.attrs instanceof Function?null:options.attrs)(pm,false)}}))}exports.wrapItem=wrapItem;function blockTypeItem(nodeType,options){var command=setBlockType(nodeType,options.attrs);return new MenuItem(copyObj(options,{run:command,select:function select(pm){return command(pm,false)},active:function active(pm){var _pm$selection2=pm.selection;var $from=_pm$selection2.$from;var to=_pm$selection2.to;var node=_pm$selection2.node;if(node)return node.hasMarkup(nodeType,options.attrs);return to<=$from.end()&&$from.parent.hasMarkup(nodeType,options.attrs)}}))}exports.blockTypeItem=blockTypeItem;function wrapListItem(nodeType,options){var command=wrapInList(nodeType,options.attrs);return new MenuItem(copyObj(options,{run:command,select:function select(pm){return command(pm,false)}}))}exports.wrapListItem=wrapListItem;insertCSS("\n\n.ProseMirror-textblock-dropdown {\n  min-width: 3em;\n}\n\n."+prefix+" {\n  margin: 0 -4px;\n  line-height: 1;\n}\n\n.ProseMirror-tooltip ."+prefix+" {\n  width: -webkit-fit-content;\n  width: fit-content;\n  white-space: pre;\n}\n\n."+prefix+"item {\n  margin-right: 3px;\n  display: inline-block;\n}\n\n."+prefix+"separator {\n  border-right: 1px solid #ddd;\n  margin-right: 3px;\n}\n\n."+prefix+"-dropdown, ."+prefix+"-dropdown-menu {\n  font-size: 90%;\n  white-space: nowrap;\n}\n\n."+prefix+"-dropdown {\n  padding: 1px 14px 1px 4px;\n  display: inline-block;\n  vertical-align: 1px;\n  position: relative;\n  cursor: pointer;\n}\n\n."+prefix+'-dropdown:after {\n  content: "";\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 2px;\n  top: calc(50% - 2px);\n}\n\n.'+prefix+"-dropdown-menu, ."+prefix+"-submenu {\n  position: absolute;\n  background: white;\n  color: #666;\n  border: 1px solid #aaa;\n  padding: 2px;\n}\n\n."+prefix+"-dropdown-menu {\n  z-index: 15;\n  min-width: 6em;\n}\n\n."+prefix+"-dropdown-item {\n  cursor: pointer;\n  padding: 2px 8px 2px 4px;\n}\n\n."+prefix+"-dropdown-item:hover {\n  background: #f2f2f2;\n}\n\n."+prefix+"-submenu-wrap {\n  position: relative;\n  margin-right: -4px;\n}\n\n."+prefix+'-submenu-label:after {\n  content: "";\n  border-top: 4px solid transparent;\n  border-bottom: 4px solid transparent;\n  border-left: 4px solid currentColor;\n  opacity: .6;\n  position: absolute;\n  right: 4px;\n  top: calc(50% - 4px);\n}\n\n.'+prefix+"-submenu {\n  display: none;\n  min-width: 4em;\n  left: 100%;\n  top: -3px;\n}\n\n."+prefix+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+prefix+"-active {\n  background: #eee;\n  border-radius: 4px;\n}\n\n."+prefix+"-disabled {\n  opacity: .3;\n}\n\n."+prefix+"-submenu-wrap:hover ."+prefix+"-submenu, ."+prefix+"-submenu-wrap-active ."+prefix+"-submenu {\n  display: block;\n}\n");

},{"../edit":92,"../util/dom":135,"../util/obj":138,"./icons":105}],107:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../edit");var Plugin=_require.Plugin;var _require2=require("../util/dom");var elt=_require2.elt;var insertCSS=_require2.insertCSS;var _require3=require("./menu");var renderGrouped=_require3.renderGrouped;var prefix="ProseMirror-menubar";var MenuBar=function(){function MenuBar(pm,config){var _this=this;_classCallCheck(this,MenuBar);this.pm=pm;this.wrapper=pm.wrapper.insertBefore(elt("div",{"class":prefix}),pm.wrapper.firstChild);this.spacer=null;this.maxHeight=0;this.widthForMaxHeight=0;this.updater=pm.updateScheduler([pm.on.selectionChange,pm.on.change,pm.on.activeMarkChange],function(){return _this.update()});this.content=config.content;this.updater.force();this.floating=false;if(config.float){this.updateFloat();this.scrollFunc=function(){if(!document.body.contains(_this.pm.wrapper))window.removeEventListener("scroll",_this.scrollFunc);else _this.updateFloat()};window.addEventListener("scroll",this.scrollFunc)}}_createClass(MenuBar,[{key:"detach",value:function detach(){this.updater.detach();this.wrapper.parentNode.removeChild(this.wrapper);if(this.spacer)this.spacer.parentNode.removeChild(this.spacer);if(this.scrollFunc)window.removeEventListener("scroll",this.scrollFunc)}},{key:"update",value:function update(){var _this2=this;this.wrapper.textContent="";this.wrapper.appendChild(renderGrouped(this.pm,this.content));return this.floating?this.updateScrollCursor():function(){if(_this2.wrapper.offsetWidth!=_this2.widthForMaxHeight){_this2.widthForMaxHeight=_this2.wrapper.offsetWidth;_this2.maxHeight=0}if(_this2.wrapper.offsetHeight>_this2.maxHeight){_this2.maxHeight=_this2.wrapper.offsetHeight;return function(){_this2.wrapper.style.minHeight=_this2.maxHeight+"px"}}}}},{key:"updateFloat",value:function updateFloat(){var editorRect=this.pm.wrapper.getBoundingClientRect();if(this.floating){if(editorRect.top>=0||editorRect.bottom<this.wrapper.offsetHeight+10){this.floating=false;this.wrapper.style.position=this.wrapper.style.left=this.wrapper.style.width="";this.wrapper.style.display="";this.spacer.parentNode.removeChild(this.spacer);this.spacer=null}else{var border=(this.pm.wrapper.offsetWidth-this.pm.wrapper.clientWidth)/2;this.wrapper.style.left=editorRect.left+border+"px";this.wrapper.style.display=editorRect.top>window.innerHeight?"none":""}}else{if(editorRect.top<0&&editorRect.bottom>=this.wrapper.offsetHeight+10){this.floating=true;var menuRect=this.wrapper.getBoundingClientRect();this.wrapper.style.left=menuRect.left+"px";this.wrapper.style.width=menuRect.width+"px";this.wrapper.style.position="fixed";this.spacer=elt("div",{"class":prefix+"-spacer",style:"height: "+menuRect.height+"px"});this.pm.wrapper.insertBefore(this.spacer,this.wrapper)}}}},{key:"updateScrollCursor",value:function updateScrollCursor(){var _this3=this;if(!this.floating)return null;var head=this.pm.selection.head;if(!head)return null;return function(){var cursorPos=_this3.pm.coordsAtPos(head);var menuRect=_this3.wrapper.getBoundingClientRect();if(cursorPos.top<menuRect.bottom&&cursorPos.bottom>menuRect.top){var _ret=function(){var scrollable=findWrappingScrollable(_this3.pm.wrapper);if(scrollable)return{v:function v(){scrollable.scrollTop-=menuRect.bottom-cursorPos.top}}}();if((typeof _ret==="undefined"?"undefined":_typeof(_ret))==="object")return _ret.v}}}}]);return MenuBar}();function findWrappingScrollable(node){for(var cur=node.parentNode;cur;cur=cur.parentNode){if(cur.scrollHeight>cur.clientHeight)return cur}}var menuBar=new Plugin(MenuBar,{content:[],"float":false});exports.menuBar=menuBar;insertCSS("\n."+prefix+" {\n  border-top-left-radius: inherit;\n  border-top-right-radius: inherit;\n  position: relative;\n  min-height: 1em;\n  color: #666;\n  padding: 1px 6px;\n  top: 0; left: 0; right: 0;\n  border-bottom: 1px solid silver;\n  background: white;\n  z-index: 10;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: visible;\n}\n")},{"../edit":92,"../util/dom":135,"./menu":106}],108:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../edit");var Plugin=_require.Plugin;var _require2=require("../util/dom");var elt=_require2.elt;var insertCSS=_require2.insertCSS;var _require3=require("../ui");var Tooltip=_require3.Tooltip;var _require4=require("./menu");var renderGrouped=_require4.renderGrouped;var classPrefix="ProseMirror-tooltipmenu";var TooltipMenu=function(){function TooltipMenu(pm,config){var _this=this;_classCallCheck(this,TooltipMenu);this.pm=pm;this.config=config;this.selectedBlockMenu=this.config.selectedBlockMenu;this.updater=pm.updateScheduler([pm.on.change,pm.on.selectionChange,pm.on.blur,pm.on.focus],function(){return _this.update()});this.onContextMenu=this.onContextMenu.bind(this);pm.content.addEventListener("contextmenu",this.onContextMenu);this.tooltip=new Tooltip(pm.wrapper,this.config.position);this.selectedBlockContent=this.config.selectedBlockContent||this.config.inlineContent.concat(this.config.blockContent)}_createClass(TooltipMenu,[{key:"detach",value:function detach(){this.updater.detach();this.tooltip.detach();this.pm.content.removeEventListener("contextmenu",this.onContextMenu)}},{key:"show",value:function show(content,coords){var rendered=renderGrouped(this.pm,content);if(rendered.childNodes.length)this.tooltip.open(elt("div",null,rendered),coords);else this.tooltip.close()}},{key:"update",value:function update(){var _this2=this;var _pm$selection=this.pm.selection;var empty=_pm$selection.empty;var node=_pm$selection.node;var $from=_pm$selection.$from;var to=_pm$selection.to;var link=void 0;if(!this.pm.hasFocus()){this.tooltip.close()}else if(node&&node.isBlock){return function(){var coords=_this2.nodeSelectionCoords();return function(){return _this2.show(_this2.config.blockContent,coords)}}}else if(!empty){return function(){var coords=node?_this2.nodeSelectionCoords():_this2.selectionCoords();var showBlock=_this2.selectedBlockMenu&&$from.parentOffset==0&&$from.end()==to;return function(){return _this2.show(showBlock?_this2.selectedBlockContent:_this2.config.inlineContent,coords)}}}else if(this.selectedBlockMenu&&$from.parent.content.size==0){return function(){var coords=_this2.selectionCoords();return function(){return _this2.show(_this2.config.blockContent,coords)}}}else if(this.config.showLinks&&(link=this.linkUnderCursor())){return function(){var coords=_this2.selectionCoords();return function(){return _this2.showLink(link,coords)}}}else{this.tooltip.close()}}},{key:"selectionCoords",value:function selectionCoords(){var pos=this.config.position=="above"?topCenterOfSelection(this.pm.root):bottomCenterOfSelection(this.pm.root);if(pos.top!=0)return pos;var realPos=this.pm.coordsAtPos(this.pm.selection.from);return{left:realPos.left,top:this.config.position=="above"?realPos.top:realPos.bottom}}},{key:"nodeSelectionCoords",value:function nodeSelectionCoords(){var selected=this.pm.content.querySelector(".ProseMirror-selectednode");if(!selected)return{left:0,top:0};var box=selected.getBoundingClientRect();return{left:Math.min((box.left+box.right)/2,box.left+20),top:this.config.position=="above"?box.top:box.bottom}}},{key:"linkUnderCursor",value:function linkUnderCursor(){var head=this.pm.selection.head;if(!head)return null;var marks=this.pm.doc.marksAt(head);return marks.reduce(function(found,m){return found||m.type.name=="link"&&m},null)}},{key:"showLink",value:function showLink(link,pos){var node=elt("div",{"class":classPrefix+"-linktext"},elt("a",{href:link.attrs.href,title:link.attrs.title,rel:"noreferrer noopener",target:"_blank"},link.attrs.href));this.tooltip.open(node,pos)}},{key:"onContextMenu",value:function onContextMenu(e){if(!this.pm.selection.empty)return;var pos=this.pm.posAtCoords({left:e.clientX,top:e.clientY});if(!pos||!this.pm.doc.resolve(pos).parent.isTextblock)return;this.pm.setTextSelection(pos,pos);this.pm.flush();this.show(this.config.inlineContent,this.selectionCoords())}}]);return TooltipMenu}();function topCenterOfSelection(root){var range=root.getSelection().getRangeAt(0),rects=range.getClientRects();if(!rects.length)return range.getBoundingClientRect();var left=void 0,right=void 0,top=void 0,bottom=void 0;for(var i=0;i<rects.length;i++){var rect=rects[i];if(left==right){left=rect.left;right=rect.right;top=rect.top;bottom=rect.bottom}else if(rect.top<bottom-1&&(i==rects.length-1||Math.abs(rects[i+1].left-rect.left)>1)){left=Math.min(left,rect.left);right=Math.max(right,rect.right);top=Math.min(top,rect.top)}}return{top:top,left:(left+right)/2}}function bottomCenterOfSelection(root){var range=root.getSelection().getRangeAt(0),rects=range.getClientRects();if(!rects.length){var rect=range.getBoundingClientRect();return{left:rect.left,top:rect.bottom}}var left=void 0,right=void 0,bottom=void 0,top=void 0;for(var i=rects.length-1;i>=0;i--){var _rect=rects[i];if(left==right){left=_rect.left;right=_rect.right;bottom=_rect.bottom;top=_rect.top}else if(_rect.bottom>top+1&&(i==0||Math.abs(rects[i-1].left-_rect.left)>1)){left=Math.min(left,_rect.left);right=Math.max(right,_rect.right);bottom=Math.min(bottom,_rect.bottom)}}return{top:bottom,left:(left+right)/2}}var tooltipMenu=new Plugin(TooltipMenu,{showLinks:true,selectedBlockMenu:false,inlineContent:[],blockContent:[],selectedBlockContent:null,position:"above"});exports.tooltipMenu=tooltipMenu;insertCSS("\n\n."+classPrefix+"-linktext a {\n  color: #444;\n  text-decoration: none;\n  padding: 0 5px;\n}\n\n."+classPrefix+"-linktext a:hover {\n  text-decoration: underline;\n}\n\n")},{"../edit":92,"../ui":130,"../util/dom":135,"./menu":106}],109:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("./fragment");var Fragment=_require.Fragment;var _require2=require("./mark");var Mark=_require2.Mark;var ContentExpr=function(){function ContentExpr(nodeType,elements,inlineContent){_classCallCheck(this,ContentExpr);this.nodeType=nodeType;this.elements=elements;this.inlineContent=inlineContent}_createClass(ContentExpr,[{key:"start",value:function start(attrs){return new ContentMatch(this,attrs,0,0)}},{key:"matches",value:function matches(attrs,fragment,from,to){return this.start(attrs).matchToEnd(fragment,from,to)}},{key:"getMatchAt",value:function getMatchAt(attrs,fragment){var index=arguments.length<=2||arguments[2]===undefined?fragment.childCount:arguments[2];if(this.elements.length==1)return new ContentMatch(this,attrs,0,index);else return this.start(attrs).matchFragment(fragment,0,index)}},{key:"checkReplace",value:function checkReplace(attrs,content,from,to){var replacement=arguments.length<=4||arguments[4]===undefined?Fragment.empty:arguments[4];var start=arguments.length<=5||arguments[5]===undefined?0:arguments[5];var end=arguments.length<=6||arguments[6]===undefined?replacement.childCount:arguments[6];if(this.elements.length==1){var elt=this.elements[0];if(!checkCount(elt,content.childCount-(to-from)+(end-start),attrs,this))return false;for(var i=start;i<end;i++){if(!elt.matches(replacement.child(i),attrs,this))return false}return true}var match=this.getMatchAt(attrs,content,from).matchFragment(replacement,start,end);return match?match.matchToEnd(content,to):false}},{key:"checkReplaceWith",value:function checkReplaceWith(attrs,content,from,to,type,typeAttrs,marks){if(this.elements.length==1){var elt=this.elements[0];if(!checkCount(elt,content.childCount-(to-from)+1,attrs,this))return false;return elt.matchesType(type,typeAttrs,marks,attrs,this)}var match=this.getMatchAt(attrs,content,from).matchType(type,typeAttrs,marks);return match?match.matchToEnd(content,to):false}},{key:"compatible",value:function compatible(other){for(var i=0;i<this.elements.length;i++){var elt=this.elements[i];for(var j=0;j<other.elements.length;j++){if(other.elements[j].compatible(elt))return true}}return false}},{key:"generateContent",value:function generateContent(attrs){return this.start(attrs).fillBefore(Fragment.empty,true)}},{key:"isLeaf",get:function get(){return this.elements.length==0}}],[{key:"parse",value:function parse(nodeType,expr,specs){var elements=[],pos=0,inline=null;for(;;){pos+=/^\s*/.exec(expr.slice(pos))[0].length;if(pos==expr.length)break;var types=/^(?:(\w+)|\(\s*(\w+(?:\s*\|\s*\w+)*)\s*\))/.exec(expr.slice(pos));if(!types)throw new SyntaxError("Invalid content expression '"+expr+"' at "+pos);pos+=types[0].length;var attrs=/^\[([^\]]+)\]/.exec(expr.slice(pos));if(attrs)pos+=attrs[0].length;var marks=/^<(?:(_)|\s*(\w+(?:\s+\w+)*)\s*)>/.exec(expr.slice(pos));if(marks)pos+=marks[0].length;var repeat=/^(?:([+*?])|\{\s*(\d+|\.\w+)\s*(,\s*(\d+|\.\w+)?)?\s*\})/.exec(expr.slice(pos));if(repeat)pos+=repeat[0].length;var nodeTypes=expandTypes(nodeType.schema,specs,types[1]?[types[1]]:types[2].split(/\s*\|\s*/));for(var i=0;i<nodeTypes.length;i++){if(inline==null)inline=nodeTypes[i].isInline;else if(inline!=nodeTypes[i].isInline)throw new SyntaxError("Mixing inline and block content in a single node")}var attrSet=!attrs?null:parseAttrs(nodeType,attrs[1]);var markSet=!marks?false:marks[1]?true:checkMarks(nodeType.schema,marks[2].split(/\s+/));var _parseRepeat=parseRepeat(nodeType,repeat);var min=_parseRepeat.min;var max=_parseRepeat.max;if(min!=0&&nodeTypes[0].hasRequiredAttrs(attrSet))throw new SyntaxError("Node type "+types[0]+" in type "+nodeType.name+" is required, but has non-optional attributes");var newElt=new ContentElement(nodeTypes,attrSet,markSet,min,max);for(var _i=elements.length-1;_i>=0;_i--){var prev=elements[_i];if(prev.min!=prev.max&&prev.overlaps(newElt))throw new SyntaxError("Possibly ambiguous overlapping adjacent content expressions in '"+expr+"'");if(prev.min!=0)break}elements.push(newElt)}return new ContentExpr(nodeType,elements,!!inline)}}]);return ContentExpr}();exports.ContentExpr=ContentExpr;var ContentElement=function(){function ContentElement(nodeTypes,attrs,marks,min,max){_classCallCheck(this,ContentElement);this.nodeTypes=nodeTypes;this.attrs=attrs;this.marks=marks;this.min=min;this.max=max}_createClass(ContentElement,[{key:"matchesType",value:function matchesType(type,attrs,marks,parentAttrs,parentExpr){if(this.nodeTypes.indexOf(type)==-1)return false;if(this.attrs){if(!attrs)return false;for(var prop in this.attrs){if(attrs[prop]!=_resolveValue(this.attrs[prop],parentAttrs,parentExpr))return false}}if(this.marks===true)return true;if(this.marks===false)return marks.length==0;for(var i=0;i<marks.length;i++){if(this.marks.indexOf(marks[i].type)==-1)return false}return true}},{key:"matches",value:function matches(node,parentAttrs,parentExpr){return this.matchesType(node.type,node.attrs,node.marks,parentAttrs,parentExpr)}},{key:"compatible",value:function compatible(other){for(var i=0;i<this.nodeTypes.length;i++){if(other.nodeTypes.indexOf(this.nodeTypes[i])!=-1)return true}return false}},{key:"constrainedAttrs",value:function constrainedAttrs(parentAttrs,expr){if(!this.attrs)return null;var attrs=Object.create(null);for(var prop in this.attrs){attrs[prop]=_resolveValue(this.attrs[prop],parentAttrs,expr)}return attrs}},{key:"createFiller",value:function createFiller(parentAttrs,expr){var type=this.nodeTypes[0],attrs=type.computeAttrs(this.constrainedAttrs(parentAttrs,expr));return type.create(attrs,type.contentExpr.generateContent(attrs))}},{key:"defaultType",value:function defaultType(){return this.nodeTypes[0].defaultAttrs&&this.nodeTypes[0]}},{key:"overlaps",value:function overlaps(other){return this.nodeTypes.some(function(t){return other.nodeTypes.indexOf(t)>-1})}},{key:"allowsMark",value:function allowsMark(markType){return this.marks===true||this.marks&&this.marks.indexOf(markType)>-1}}]);return ContentElement}();var ContentMatch=function(){function ContentMatch(expr,attrs,index,count){_classCallCheck(this,ContentMatch);this.expr=expr;this.attrs=attrs;this.index=index;this.count=count}_createClass(ContentMatch,[{key:"move",value:function move(index,count){return new ContentMatch(this.expr,this.attrs,index,count)}},{key:"resolveValue",value:function resolveValue(value){return value instanceof AttrValue?_resolveValue(value,this.attrs,this.expr):value}},{key:"matchNode",value:function matchNode(node){return this.matchType(node.type,node.attrs,node.marks)}},{key:"matchType",value:function matchType(type,attrs){var marks=arguments.length<=2||arguments[2]===undefined?Mark.none:arguments[2];for(index=this.index,count=this.count,void 0;index<this.expr.elements.length;index++,count=0){var index,count;var elt=this.expr.elements[index],max=this.resolveValue(elt.max);if(count<max&&elt.matchesType(type,attrs,marks,this.attrs,this.expr)){count++;return this.move(index,count)}if(count<this.resolveValue(elt.min))return null}}},{key:"matchFragment",value:function matchFragment(fragment){var from=arguments.length<=1||arguments[1]===undefined?0:arguments[1];var to=arguments.length<=2||arguments[2]===undefined?fragment.childCount:arguments[2];if(from==to)return this;var fragPos=from,end=this.expr.elements.length;for(index=this.index,count=this.count,void 0;index<end;index++,count=0){var index,count;var elt=this.expr.elements[index],max=this.resolveValue(elt.max);while(count<max){if(elt.matches(fragment.child(fragPos),this.attrs,this.expr)){count++;if(++fragPos==to)return this.move(index,count)}else{break}}if(count<this.resolveValue(elt.min))return null}return false}},{key:"matchToEnd",value:function matchToEnd(fragment,start,end){var matched=this.matchFragment(fragment,start,end);return matched&&matched.validEnd()||false}},{key:"validEnd",value:function validEnd(){for(var i=this.index,count=this.count;i<this.expr.elements.length;i++,count=0){if(count<this.resolveValue(this.expr.elements[i].min))return false}return true}},{key:"fillBefore",value:function fillBefore(after,toEnd,startIndex){var added=[],match=this,index=startIndex||0,end=this.expr.elements.length;for(;;){var fits=match.matchFragment(after,index);if(fits&&(!toEnd||fits.validEnd()))return Fragment.from(added);if(fits===false)return null;var elt=match.element;if(match.count<this.resolveValue(elt.min)){added.push(elt.createFiller(this.attrs,this.expr));match=match.move(match.index,match.count+1)}else if(match.index<end){match=match.move(match.index+1,0)}else if(after.childCount>index){return null}else{return Fragment.from(added)}}}},{key:"possibleContent",value:function possibleContent(){var found=[];for(var i=this.index,count=this.count;i<this.expr.elements.length;i++,count=0){var elt=this.expr.elements[i],attrs=elt.constrainedAttrs(this.attrs,this.expr);if(count<this.resolveValue(elt.max))for(var j=0;j<elt.nodeTypes.length;j++){var type=elt.nodeTypes[j];if(!type.hasRequiredAttrs(attrs))found.push({type:type,attrs:attrs})}if(this.resolveValue(elt.min)>count)break}return found}},{key:"allowsMark",value:function allowsMark(markType){return this.element.allowsMark(markType)}},{key:"findWrapping",value:function findWrapping(target,targetAttrs){var seen=Object.create(null),first={match:this,via:null},active=[first];while(active.length){var current=active.shift(),match=current.match;if(match.matchType(target,targetAttrs)){var result=[];for(var obj=current;obj!=first;obj=obj.via){result.push({type:obj.match.expr.nodeType,attrs:obj.match.attrs})}return result.reverse()}var possible=match.possibleContent();for(var i=0;i<possible.length;i++){var _possible$i=possible[i];var type=_possible$i.type;var attrs=_possible$i.attrs;var fullAttrs=type.computeAttrs(attrs);if(!type.isLeaf&&!(type.name in seen)&&(current==first||match.matchType(type,fullAttrs).validEnd())){active.push({match:type.contentExpr.start(fullAttrs),via:current});seen[type.name]=true}}}}},{key:"element",get:function get(){return this.expr.elements[this.index]}},{key:"nextElement",get:function get(){for(var i=this.index,count=this.count;i<this.expr.elements.length;i++){var element=this.expr.elements[i];if(this.resolveValue(element.max)>count)return element;count=0}}}]);return ContentMatch}();exports.ContentMatch=ContentMatch;var AttrValue=function AttrValue(attr){_classCallCheck(this,AttrValue);this.attr=attr};function parseValue(nodeType,value){if(value.charAt(0)=="."){var attr=value.slice(1);if(!nodeType.attrs[attr])throw new SyntaxError("Node type "+nodeType.name+" has no attribute "+attr);return new AttrValue(attr)}else{return JSON.parse(value)}}function checkMarks(schema,marks){var found=[];for(var i=0;i<marks.length;i++){var mark=schema.marks[marks[i]];if(mark)found.push(mark);else throw new SyntaxError("Unknown mark type: '"+marks[i]+"'")}return found}function _resolveValue(value,attrs,expr){if(!(value instanceof AttrValue))return value;var attrVal=attrs&&attrs[value.attr];return attrVal!==undefined?attrVal:expr.nodeType.defaultAttrs[value.attr]}function checkCount(elt,count,attrs,expr){return count>=_resolveValue(elt.min,attrs,expr)&&count<=_resolveValue(elt.max,attrs,expr)}function expandTypes(schema,specs,types){var result=[];types.forEach(function(type){var found=schema.nodes[type];if(found){if(result.indexOf(found)==-1)result.push(found)}else{specs.forEach(function(name,spec){if(spec.group&&spec.group.split(" ").indexOf(type)>-1){found=schema.nodes[name];if(result.indexOf(found)==-1)result.push(found)}})}if(!found)throw new SyntaxError("Node type or group '"+type+"' does not exist")});return result}var many=2e9;function parseRepeat(nodeType,match){var min=1,max=1;if(match){if(match[1]=="+"){max=many}else if(match[1]=="*"){min=0;max=many}else if(match[1]=="?"){min=0}else if(match[2]){min=parseValue(nodeType,match[2]);if(match[3])max=match[4]?parseValue(nodeType,match[4]):many;else max=min}if(max==0||min>max)throw new SyntaxError("Invalid repeat count in '"+match[0]+"'")}return{min:min,max:max}}function parseAttrs(nodeType,expr){var parts=expr.split(/\s*,\s*/);var attrs=Object.create(null);for(var i=0;i<parts.length;i++){var match=/^(\w+)=(\w+|\"(?:\\.|[^\\])*\"|\.\w+)$/.exec(parts[i]);if(!match)throw new SyntaxError("Invalid attribute syntax: "+parts[i]);attrs[match[1]]=parseValue(nodeType,match[2])}return attrs}},{"./fragment":111,"./mark":114}],110:[function(require,module,exports){"use strict";function findDiffStart(a,b,pos){for(var i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;var childA=a.child(i),childB=b.child(i);if(childA==childB){pos+=childA.nodeSize;continue}if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++){pos++}return pos}if(childA.content.size||childB.content.size){var inner=findDiffStart(childA.content,childB.content,pos+1);if(inner!=null)return inner}pos+=childA.nodeSize}}exports.findDiffStart=findDiffStart;function findDiffEnd(a,b,posA,posB){for(var iA=a.childCount,iB=b.childCount;;){if(iA==0||iB==0)return iA==iB?null:{a:posA,b:posB};var childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA==childB){posA-=size;posB-=size;continue}if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){var same=0,minSize=Math.min(childA.text.length,childB.text.length);while(same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1]){same++;posA--;posB--}return{a:posA,b:posB}}if(childA.content.size||childB.content.size){var inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size;posB-=size}}exports.findDiffEnd=findDiffEnd},{}],111:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("./to_dom");var fragmentToDOM=_require.fragmentToDOM;var _require2=require("./diff");var _findDiffStart=_require2.findDiffStart;var _findDiffEnd=_require2.findDiffEnd;var Fragment=function(){function Fragment(content,size){_classCallCheck(this,Fragment);this.content=content;this.size=size||0;if(size==null)for(var i=0;i<content.length;i++){this.size+=content[i].nodeSize}}_createClass(Fragment,[{key:"toString",value:function toString(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function toStringInner(){return this.content.join(", ")}},{key:"nodesBetween",value:function nodesBetween(from,to,f,nodeStart,parent){for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from&&f(child,nodeStart+pos,parent,i)!==false&&child.content.size){var start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}}},{key:"textBetween",value:function textBetween(from,to,separator){var text="",separated=true;this.nodesBetween(from,to,function(node,pos){if(node.isText){text+=node.text.slice(Math.max(from,pos)-pos,to-pos);separated=!separator}else if(!separated&&node.isBlock){text+=separator;separated=true}},0);return text}},{key:"cut",value:function cut(from,to){if(to==null)to=this.size;if(from==0&&to==this.size)return this;var result=[],size=0;if(to>from)for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from){if(pos<from||end>to){if(child.isText)child=child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos));else child=child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))}result.push(child);size+=child.nodeSize}pos=end}return new Fragment(result,size)}},{key:"cutByIndex",value:function cutByIndex(from,to){if(from==to)return Fragment.empty;if(from==0&&to==this.content.length)return this;return new Fragment(this.content.slice(from,to))}},{key:"append",value:function append(other){if(!other.size)return this;if(!this.size)return other;var last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;if(last.isText&&last.sameMarkup(first)){content[content.length-1]=last.withText(last.text+first.text);i=1}for(;i<other.content.length;i++){content.push(other.content[i])}return new Fragment(content,this.size+other.size)}},{key:"replaceChild",value:function replaceChild(index,node){var current=this.content[index];if(current==node)return this;var copy=this.content.slice();var size=this.size+node.nodeSize-current.nodeSize;copy[index]=node;return new Fragment(copy,size)}},{key:"addToStart",value:function addToStart(node){return new Fragment([node].concat(this.content),this.size+node.nodeSize)}},{key:"addToEnd",value:function addToEnd(node){return new Fragment(this.content.concat(node),this.size+node.nodeSize)}},{key:"toJSON",value:function toJSON(){return this.content.length?this.content.map(function(n){return n.toJSON()}):null}},{key:"eq",value:function eq(other){if(this.content.length!=other.content.length)return false;for(var i=0;i<this.content.length;i++){if(!this.content[i].eq(other.content[i]))return false}return true}},{key:"child",value:function child(index){var found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found}},{key:"maybeChild",value:function maybeChild(index){return this.content[index]}},{key:"forEach",value:function forEach(f){for(var i=0,p=0;i<this.content.length;i++){var child=this.content[i];f(child,p,i);p+=child.nodeSize}}},{key:"findDiffStart",value:function findDiffStart(other){var pos=arguments.length<=1||arguments[1]===undefined?0:arguments[1];return _findDiffStart(this,other,pos)}},{key:"findDiffEnd",value:function findDiffEnd(other){var pos=arguments.length<=1||arguments[1]===undefined?this.size:arguments[1];var otherPos=arguments.length<=2||arguments[2]===undefined?other.size:arguments[2];return _findDiffEnd(this,other,pos,otherPos)}},{key:"findIndex",value:function findIndex(pos){var round=arguments.length<=1||arguments[1]===undefined?-1:arguments[1];if(pos==0)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError("Position "+pos+" outside of fragment ("+this+")");for(var i=0,curPos=0;;i++){var cur=this.child(i),end=curPos+cur.nodeSize;if(end>=pos){if(end==pos||round>0)return retIndex(i+1,end);return retIndex(i,curPos)}curPos=end}}},{key:"toDOM",value:function toDOM(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return fragmentToDOM(this,options)}},{key:"firstChild",get:function get(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function get(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function get(){return this.content.length}}],[{key:"fromJSON",value:function fromJSON(schema,value){return value?new Fragment(value.map(schema.nodeFromJSON)):Fragment.empty}},{key:"fromArray",value:function fromArray(array){if(!array.length)return Fragment.empty;var joined=void 0,size=0;for(var i=0;i<array.length;i++){var node=array[i];size+=node.nodeSize;if(i&&node.isText&&array[i-1].sameMarkup(node)){if(!joined)joined=array.slice(0,i);joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)}else if(joined){joined.push(node)}}return new Fragment(joined||array,size)}},{key:"from",value:function from(nodes){if(!nodes)return Fragment.empty;if(nodes instanceof Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);return new Fragment([nodes],nodes.nodeSize)}}]);return Fragment}();exports.Fragment=Fragment;var found={index:0,offset:0};function retIndex(index,offset){found.index=index;

found.offset=offset;return found}Fragment.empty=new Fragment([],0)},{"./diff":110,"./to_dom":119}],112:[function(require,module,exports){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"])_i["return"]()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("./fragment");var Fragment=_require.Fragment;var _require2=require("./mark");var Mark=_require2.Mark;function parseDOM(schema,dom,options){var topNode=options.topNode;var top=new NodeBuilder(topNode?topNode.type:schema.nodes.doc,topNode?topNode.attrs:null,true,null,null,options.preserveWhitespace);var state=new DOMParseState(schema,options,top);state.addAll(dom,null,options.from,options.to);return top.finish(null)}exports.parseDOM=parseDOM;function parseDOMInContext($context,dom){var options=arguments.length<=2||arguments[2]===undefined?{}:arguments[2];var schema=$context.parent.type.schema;var _builderFromContext=builderFromContext($context,options.preserveWhitespace);var builder=_builderFromContext.builder;var top=_builderFromContext.top;var openLeft=options.openLeft,startPos=$context.depth;var state=new(function(_DOMParseState){_inherits(_class,_DOMParseState);function _class(){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).apply(this,arguments))}_createClass(_class,[{key:"enter",value:function enter(type,attrs,preserveWhitespace){if(openLeft==null)openLeft=type.isTextblock?1:0;if(openLeft>0&&this.top.match.matchType(type,attrs))openLeft=0;if(openLeft==0)return _get(Object.getPrototypeOf(_class.prototype),"enter",this).call(this,type,attrs,preserveWhitespace);openLeft--;return null}}]);return _class}(DOMParseState))(schema,options,builder);state.addAll(dom);var openTo=top.openDepth,doc=top.finish(openTo),$startPos=doc.resolve(startPos);for(var d=$startPos.depth;d>=0&&startPos==$startPos.end(d);d--){++startPos}return doc.slice(startPos,doc.content.size-openTo)}exports.parseDOMInContext=parseDOMInContext;function builderFromContext($context,preserveWhitespace){var top=void 0,builder=void 0;for(var i=0;i<=$context.depth;i++){var node=$context.node(i),match=node.contentMatchAt($context.index(i));if(i==0)builder=top=new NodeBuilder(node.type,node.attrs,true,null,match,preserveWhitespace);else builder=builder.start(node.type,node.attrs,false,match,preserveWhitespace)}return{builder:builder,top:top}}var NodeBuilder=function(){function NodeBuilder(type,attrs,solid,prev,match,preserveWhitespace){_classCallCheck(this,NodeBuilder);this.type=type;this.match=match||type.contentExpr.start(attrs);this.solid=solid;this.content=[];this.prev=prev;this.openChild=null;this.preserveWhitespace=preserveWhitespace}_createClass(NodeBuilder,[{key:"add",value:function add(node){var _this2=this;var matched=this.match.matchNode(node);if(!matched&&node.marks.length){node=node.mark(node.marks.filter(function(mark){return _this2.match.allowsMark(mark.type)}));matched=this.match.matchNode(node)}if(!matched)return null;this.closeChild();this.content.push(node);this.match=matched;return node}},{key:"start",value:function start(type,attrs,solid,match,preserveWhitespace){var matched=this.match.matchType(type,attrs);if(!matched)return null;this.closeChild();this.match=matched;return this.openChild=new NodeBuilder(type,attrs,solid,this,match,preserveWhitespace)}},{key:"closeChild",value:function closeChild(openRight){if(this.openChild){this.content.push(this.openChild.finish(openRight&&openRight-1));this.openChild=null}}},{key:"stripTrailingSpace",value:function stripTrailingSpace(){if(this.openChild)return;var last=this.content[this.content.length-1],m=void 0;if(last&&last.isText&&(m=/\s+$/.exec(last.text))){if(last.text.length==m[0].length)this.content.pop();else this.content[this.content.length-1]=last.withText(last.text.slice(0,last.text.length-m[0].length))}}},{key:"finish",value:function finish(openRight){if(!this.preserveWhitespace)this.stripTrailingSpace();this.closeChild(openRight);var content=Fragment.from(this.content);if(!openRight)content=content.append(this.match.fillBefore(Fragment.empty,true));this.content=null;return this.type.create(this.match.attrs,content)}},{key:"findPlace",value:function findPlace(type,attrs,node,preserveWhitespace){var route=void 0,builder=void 0;for(var top=this;;top=top.prev){var found=top.match.findWrapping(type,attrs);if(found&&(!route||route.length>found.length)){route=found;builder=top;if(!found.length)break}if(top.solid)break}if(!route)return null;for(var i=0;i<route.length;i++){builder=builder.start(route[i].type,route[i].attrs,false)}return node?builder.add(node)&&builder:builder.start(type,attrs,true,null,preserveWhitespace)}},{key:"depth",get:function get(){var d=0;for(var b=this.prev;b;b=b.prev){d++}return d}},{key:"openDepth",get:function get(){var d=0;for(var c=this.openChild;c;c=c.openChild){d++}return d}},{key:"posBeforeLastChild",get:function get(){var pos=this.prev?this.prev.posBeforeLastChild+1:0;for(var i=0;i<this.content.length;i++){pos+=this.content[i].nodeSize}return pos}},{key:"currentPos",get:function get(){this.closeChild();return this.posBeforeLastChild}}]);return NodeBuilder}();var blockTags={address:true,article:true,aside:true,blockquote:true,canvas:true,dd:true,div:true,dl:true,fieldset:true,figcaption:true,figure:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,li:true,noscript:true,ol:true,output:true,p:true,pre:true,section:true,table:true,tfoot:true,ul:true};var ignoreTags={head:true,noscript:true,object:true,script:true,style:true,title:true};var listTags={ol:true,ul:true};var DOMParseState=function(){function DOMParseState(schema,options,top){_classCallCheck(this,DOMParseState);this.options=options||{};this.schema=schema;this.top=top;this.marks=Mark.none;this.info=schemaInfo(schema);this.find=options.findPositions}_createClass(DOMParseState,[{key:"addMark",value:function addMark(mark){var old=this.marks;this.marks=mark.addToSet(this.marks);return old}},{key:"addDOM",value:function addDOM(dom){if(dom.nodeType==3){var value=dom.nodeValue;var top=this.top;if(/\S/.test(value)||top.type.isTextblock){if(!this.top.preserveWhitespace){value=value.replace(/\s+/g," ");if(/^\s/.test(value))top.stripTrailingSpace()}if(value)this.insertNode(this.schema.text(value,this.marks));this.findInText(dom)}else{this.findInside(dom)}}else if(dom.nodeType==1&&!dom.hasAttribute("pm-ignore")){var style=dom.getAttribute("style");if(style)this.addElementWithStyles(parseStyles(style),dom);else this.addElement(dom)}}},{key:"addElement",value:function addElement(dom){var name=dom.nodeName.toLowerCase();if(listTags.hasOwnProperty(name))this.normalizeList(dom);if(this.options.editableContent&&name=="br"&&!dom.nextSibling)return;if(!this.parseNodeType(dom,name)){if(ignoreTags.hasOwnProperty(name)){this.findInside(dom)}else{var sync=blockTags.hasOwnProperty(name)&&this.top;this.addAll(dom);if(sync)this.sync(sync)}}}},{key:"addElementWithStyles",value:function addElementWithStyles(styles,dom){var oldMarks=this.marks,marks=this.marks;for(var i=0;i<styles.length;i+=2){var result=matchStyle(this.info.styles,styles[i],styles[i+1]);if(!result)continue;if(result.attrs===false)return;marks=result.mark.create(result.attrs).addToSet(marks)}this.marks=marks;this.addElement(dom);this.marks=oldMarks}},{key:"parseNodeType",value:function parseNodeType(dom){var result=matchTag(this.info.selectors,dom);if(!result)return false;var sync=void 0,before=void 0,contentNode=dom,preserve=this.top.preserveWhitespace;if(result.content){if(result.content.content===false)contentNode=null;else if(result.content.content)contentNode=result.content.content;if(result.content.preserveWhitespace!=null)preserve=result.content.preserveWhitespace}else if(result.node&&result.node.isLeaf){contentNode=null}if(result.node&&result.node.isLeaf)this.insertNode(result.node.create(result.attrs));else if(result.node)sync=this.enter(result.node,result.attrs,preserve);else before=this.addMark(result.mark.create(result.attrs));if(contentNode){this.findAround(dom,contentNode,true);this.addAll(contentNode,sync);if(sync)this.sync(sync.prev);else if(before)this.marks=before;this.findAround(dom,contentNode,true)}else{this.findInside(dom)}return true}},{key:"addAll",value:function addAll(parent,sync,startIndex,endIndex){var index=startIndex||0;for(var dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=endIndex==null?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index){this.findAtPoint(parent,index);this.addDOM(dom);if(sync&&blockTags.hasOwnProperty(dom.nodeName.toLowerCase()))this.sync(sync)}this.findAtPoint(parent,index)}},{key:"insertNode",value:function insertNode(node){var ok=this.top.findPlace(node.type,node.attrs,node);if(ok){this.sync(ok);return true}}},{key:"enter",value:function enter(type,attrs,preserveWhitespace){var ok=this.top.findPlace(type,attrs,null,preserveWhitespace);if(ok){this.sync(ok);return ok}}},{key:"leave",value:function leave(){this.top=this.top.prev}},{key:"sync",value:function sync(to){for(;;){for(var cur=to;cur;cur=cur.prev){if(cur==this.top){this.top=to;return}}this.leave()}}},{key:"normalizeList",value:function normalizeList(dom){for(var child=dom.firstChild,prevItem=null;child;child=child.nextSibling){var name=child.nodeType==1?child.nodeName.toLowerCase():null;if(name&&listTags.hasOwnProperty(name)&&prevItem){prevItem.appendChild(child);child=prevItem}else if(name=="li"){prevItem=child}else if(name){prevItem=null}}}},{key:"findAtPoint",value:function findAtPoint(parent,offset){if(this.find)for(var i=0;i<this.find.length;i++){if(this.find[i].node==parent&&this.find[i].offset==offset)this.find[i].pos=this.top.currentPos}}},{key:"findInside",value:function findInside(parent){if(this.find)for(var i=0;i<this.find.length;i++){if(this.find[i].pos==null&&parent.contains(this.find[i].node))this.find[i].pos=this.top.currentPos}}},{key:"findAround",value:function findAround(parent,content,before){if(parent!=content&&this.find)for(var i=0;i<this.find.length;i++){if(this.find[i].pos==null&&parent.contains(this.find[i].node)){var pos=content.compareDocumentPosition(this.find[i].node);if(pos&(before?2:4))this.find[i].pos=this.top.currentPos}}}},{key:"findInText",value:function findInText(textNode){if(this.find)for(var i=0;i<this.find.length;i++){if(this.find[i].node==textNode)this.find[i].pos=this.top.currentPos-(textNode.nodeValue.length-this.find[i].offset)}}}]);return DOMParseState}();function matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function parseStyles(style){var re=/\s*([\w-]+)\s*:\s*([^;]+)/g,m=void 0,result=[];while(m=re.exec(style)){result.push(m[1],m[2].trim())}return result}function schemaInfo(schema){return schema.cached.parseDOMInfo||(schema.cached.parseDOMInfo=summarizeSchemaInfo(schema))}function summarizeSchemaInfo(schema){var selectors=[],styles=[];for(var name in schema.nodes){var type=schema.nodes[name],match=type.matchDOMTag;if(match)for(var selector in match){selectors.push({selector:selector,node:type,value:match[selector]})}}for(var _name in schema.marks){var _type=schema.marks[_name],_match=_type.matchDOMTag,props=_type.matchDOMStyle;if(_match)for(var _selector in _match){selectors.push({selector:_selector,mark:_type,value:_match[_selector]})}if(props)for(var prop in props){styles.push({prop:prop,mark:_type,value:props[prop]})}}return{selectors:selectors,styles:styles}}function matchTag(selectors,dom){for(var i=0;i<selectors.length;i++){var cur=selectors[i];if(matches(dom,cur.selector)){var value=cur.value,content=void 0;if(value instanceof Function){value=value(dom);if(value===false)continue}if(Array.isArray(value)){var _value=value;var _value2=_slicedToArray(_value,2);value=_value2[0];content=_value2[1]}return{node:cur.node,mark:cur.mark,attrs:value,content:content}}}}function matchStyle(styles,prop,value){for(var i=0;i<styles.length;i++){var cur=styles[i];if(cur.prop==prop){var attrs=cur.value;if(attrs instanceof Function){attrs=attrs(value);if(attrs===false)continue}return{mark:cur.mark,attrs:attrs}}}}},{"./fragment":111,"./mark":114}],113:[function(require,module,exports){"use strict";exports.Node=require("./node").Node;var _require=require("./resolvedpos");exports.ResolvedPos=_require.ResolvedPos;exports.NodeRange=_require.NodeRange;exports.Fragment=require("./fragment").Fragment;var _require2=require("./replace");exports.Slice=_require2.Slice;exports.ReplaceError=_require2.ReplaceError;exports.Mark=require("./mark").Mark;var _require3=require("./schema");exports.SchemaSpec=_require3.SchemaSpec;exports.Schema=_require3.Schema;exports.NodeType=_require3.NodeType;exports.Block=_require3.Block;exports.Inline=_require3.Inline;exports.Text=_require3.Text;exports.MarkType=_require3.MarkType;exports.Attribute=_require3.Attribute;exports.NodeKind=_require3.NodeKind;var _require4=require("./content");exports.ContentMatch=_require4.ContentMatch;exports.parseDOMInContext=require("./from_dom").parseDOMInContext},{"./content":109,"./fragment":111,"./from_dom":112,"./mark":114,"./node":115,"./replace":116,"./resolvedpos":117,"./schema":118}],114:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../util/comparedeep");var compareDeep=_require.compareDeep;var Mark=function(){function Mark(type,attrs){_classCallCheck(this,Mark);this.type=type;this.attrs=attrs}_createClass(Mark,[{key:"toJSON",value:function toJSON(){var obj={_:this.type.name};for(var attr in this.attrs){obj[attr]=this.attrs[attr]}return obj}},{key:"addToSet",value:function addToSet(set){for(var i=0;i<set.length;i++){var other=set[i];if(other.type==this.type){if(this.eq(other))return set;var copy=set.slice();copy[i]=this;return copy}if(other.type.rank>this.type.rank)return set.slice(0,i).concat(this).concat(set.slice(i))}return set.concat(this)}},{key:"removeFromSet",value:function removeFromSet(set){for(var i=0;i<set.length;i++){if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1))}return set}},{key:"isInSet",value:function isInSet(set){for(var i=0;i<set.length;i++){if(this.eq(set[i]))return true}return false}},{key:"eq",value:function eq(other){if(this==other)return true;if(this.type!=other.type)return false;if(!compareDeep(other.attrs,this.attrs))return false;return true}}],[{key:"sameSet",value:function sameSet(a,b){if(a==b)return true;if(a.length!=b.length)return false;for(var i=0;i<a.length;i++){if(!a[i].eq(b[i]))return false}return true}},{key:"setFrom",value:function setFrom(marks){if(!marks||marks.length==0)return Mark.none;if(marks instanceof Mark)return[marks];var copy=marks.slice();copy.sort(function(a,b){return a.type.rank-b.type.rank});return copy}}]);return Mark}();exports.Mark=Mark;Mark.none=[]},{"../util/comparedeep":134}],115:[function(require,module,exports){"use strict";var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("./fragment");var Fragment=_require.Fragment;var _require2=require("./mark");var Mark=_require2.Mark;var _require3=require("./replace");var Slice=_require3.Slice;var _replace=_require3.replace;var _require4=require("./resolvedpos");var ResolvedPos=_require4.ResolvedPos;var _require5=require("./to_dom");var nodeToDOM=_require5.nodeToDOM;var _require6=require("../util/comparedeep");var compareDeep=_require6.compareDeep;var emptyAttrs=Object.create(null);var Node=function(){function Node(type,attrs,content,marks){_classCallCheck(this,Node);this.type=type;this.attrs=attrs;this.content=content||Fragment.empty;this.marks=marks||Mark.none}_createClass(Node,[{key:"child",value:function child(index){return this.content.child(index)}},{key:"maybeChild",value:function maybeChild(index){return this.content.maybeChild(index)}},{key:"forEach",value:function forEach(f){this.content.forEach(f)}},{key:"textBetween",value:function textBetween(from,to,separator){return this.content.textBetween(from,to,separator)}},{key:"eq",value:function eq(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)}},{key:"sameMarkup",value:function sameMarkup(other){return this.hasMarkup(other.type,other.attrs,other.marks)}},{key:"hasMarkup",value:function hasMarkup(type,attrs,marks){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,marks||Mark.none)}},{key:"copy",value:function copy(){var content=arguments.length<=0||arguments[0]===undefined?null:arguments[0];if(content==this.content)return this;return new this.constructor(this.type,this.attrs,content,this.marks)}},{key:"mark",value:function mark(marks){return marks==this.marks?this:new this.constructor(this.type,this.attrs,this.content,marks)}},{key:"cut",value:function cut(from,to){if(from==0&&to==this.content.size)return this;return this.copy(this.content.cut(from,to))}},{key:"slice",value:function slice(from){var to=arguments.length<=1||arguments[1]===undefined?this.content.size:arguments[1];if(from==to)return Slice.empty;var $from=this.resolve(from),$to=this.resolve(to);var depth=$from.sameDepth($to),start=$from.start(depth),node=$from.node(depth);var content=node.content.cut($from.pos-start,$to.pos-start);return new Slice(content,$from.depth-depth,$to.depth-depth,node)}},{key:"replace",value:function replace(from,to,slice){return _replace(this.resolve(from),this.resolve(to),slice)}},{key:"nodeAt",value:function nodeAt(pos){for(var node=this;;){var _node$content$findInd=node.content.findIndex(pos);var index=_node$content$findInd.index;var offset=_node$content$findInd.offset;node=node.maybeChild(index);if(!node)return null;if(offset==pos||node.isText)return node;pos-=offset+1}}},{key:"childAfter",value:function childAfter(pos){var _content$findIndex=this.content.findIndex(pos);var index=_content$findIndex.index;var offset=_content$findIndex.offset;return{node:this.content.maybeChild(index),index:index,offset:offset}}},{key:"childBefore",value:function childBefore(pos){if(pos==0)return{node:null,index:0,offset:0};var _content$findIndex2=this.content.findIndex(pos);var index=_content$findIndex2.index;var offset=_content$findIndex2.offset;if(offset<pos)return{node:this.content.child(index),index:index,offset:offset};var node=this.content.child(index-1);return{node:node,index:index-1,offset:offset-node.nodeSize}}},{key:"nodesBetween",value:function nodesBetween(from,to,f){var pos=arguments.length<=3||arguments[3]===undefined?0:arguments[3];this.content.nodesBetween(from,to,f,pos,this)}},{key:"descendants",value:function descendants(f){this.nodesBetween(0,this.content.size,f)}},{key:"resolve",value:function resolve(pos){return ResolvedPos.resolveCached(this,pos)}},{key:"resolveNoCache",value:function resolveNoCache(pos){return ResolvedPos.resolve(this,pos)}},{key:"marksAt",value:function marksAt(pos){var $pos=this.resolve(pos),parent=$pos.parent,index=$pos.index();if(parent.content.size==0)return Mark.none;if(index==0||!$pos.atNodeBoundary)return parent.child(index).marks;var marks=parent.child(index-1).marks;for(var i=0;i<marks.length;i++){if(!marks[i].type.inclusiveRight)marks=marks[i--].removeFromSet(marks)}return marks}},{key:"rangeHasMark",value:function rangeHasMark(from,to,type){var found=false;this.nodesBetween(from,to,function(node){if(type.isInSet(node.marks))found=true;return!found});return found}},{key:"toString",value:function toString(){var name=this.type.name;if(this.content.size)name+="("+this.content.toStringInner()+")";return wrapMarks(this.marks,name)}},{key:"contentMatchAt",value:function contentMatchAt(index){return this.type.contentExpr.getMatchAt(this.attrs,this.content,index)}},{key:"canReplace",value:function canReplace(from,to,replacement,start,end){return this.type.contentExpr.checkReplace(this.attrs,this.content,from,to,replacement,start,end)}},{key:"canReplaceWith",value:function canReplaceWith(from,to,type,attrs,marks){return this.type.contentExpr.checkReplaceWith(this.attrs,this.content,from,to,type,attrs,marks||Mark.none)}},{key:"canAppend",value:function canAppend(other){if(other.content.size)return this.canReplace(this.childCount,this.childCount,other.content);else return this.type.compatibleContent(other.type)}},{key:"defaultContentType",value:function defaultContentType(at){var elt=this.contentMatchAt(at).nextElement;return elt&&elt.defaultType()}},{key:"toJSON",value:function toJSON(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}if(this.content.size)obj.content=this.content.toJSON();if(this.marks.length)obj.marks=this.marks.map(function(n){return n.toJSON()});return obj}},{key:"toDOM",value:function toDOM(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];return nodeToDOM(this,options)}},{key:"nodeSize",get:function get(){return this.type.isLeaf?1:2+this.content.size}},{key:"childCount",get:function get(){return this.content.childCount}},{key:"textContent",get:function get(){return this.textBetween(0,this.content.size,"")}},{key:"firstChild",get:function get(){return this.content.firstChild}},{key:"lastChild",get:function get(){return this.content.lastChild}},{key:"isBlock",get:function get(){return this.type.isBlock}},{key:"isTextblock",get:function get(){return this.type.isTextblock}},{key:"isInline",get:function get(){return this.type.isInline}},{key:"isText",get:function get(){return this.type.isText}}],[{key:"fromJSON",value:function fromJSON(schema,json){var type=schema.nodeType(json.type);var content=json.text!=null?json.text:Fragment.fromJSON(schema,json.content);return type.create(json.attrs,content,json.marks&&json.marks.map(schema.markFromJSON))}}]);return Node}();exports.Node=Node;var TextNode=function(_Node){_inherits(TextNode,_Node);function TextNode(type,attrs,content,marks){_classCallCheck(this,TextNode);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(TextNode).call(this,type,attrs,null,marks));if(!content)throw new RangeError("Empty text nodes are not allowed");_this.text=content;return _this}_createClass(TextNode,[{key:"toString",value:function toString(){return wrapMarks(this.marks,JSON.stringify(this.text))}},{key:"textBetween",value:function textBetween(from,to){return this.text.slice(from,to)}},{key:"mark",value:function mark(marks){return new TextNode(this.type,this.attrs,this.text,marks)}},{key:"withText",value:function withText(text){if(text==this.text)return this;return new TextNode(this.type,this.attrs,text,this.marks)}},{key:"cut",value:function cut(){var from=arguments.length<=0||arguments[0]===undefined?0:arguments[0];var to=arguments.length<=1||arguments[1]===undefined?this.text.length:arguments[1];if(from==0&&to==this.text.length)return this;return this.withText(this.text.slice(from,to))}},{key:"eq",value:function eq(other){return this.sameMarkup(other)&&this.text==other.text}},{key:"toJSON",value:function toJSON(){var base=_get(Object.getPrototypeOf(TextNode.prototype),"toJSON",this).call(this);base.text=this.text;return base}},{key:"textContent",get:function get(){return this.text}},{key:"nodeSize",get:function get(){return this.text.length}}]);return TextNode}(Node);exports.TextNode=TextNode;function wrapMarks(marks,str){for(var i=marks.length-1;i>=0;i--){str=marks[i].type.name+"("+str+")"}return str}},{"../util/comparedeep":134,"./fragment":111,"./mark":114,"./replace":116,"./resolvedpos":117,"./to_dom":119}],116:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../util/error");var ProseMirrorError=_require.ProseMirrorError;var _require2=require("./fragment");var Fragment=_require2.Fragment;var ReplaceError=function(_ProseMirrorError){_inherits(ReplaceError,_ProseMirrorError);function ReplaceError(){_classCallCheck(this,ReplaceError);return _possibleConstructorReturn(this,Object.getPrototypeOf(ReplaceError).apply(this,arguments))}return ReplaceError}(ProseMirrorError);exports.ReplaceError=ReplaceError;var Slice=function(){function Slice(content,openLeft,openRight,possibleParent){_classCallCheck(this,Slice);this.content=content;this.openLeft=openLeft;this.openRight=openRight;this.possibleParent=possibleParent}_createClass(Slice,[{key:"insertAt",value:function insertAt(pos,fragment){function insertInto(content,dist,insert,parent){var _content$findIndex=content.findIndex(dist);var index=_content$findIndex.index;var offset=_content$findIndex.offset;var child=content.maybeChild(index);if(offset==dist||child.isText){if(parent&&!parent.canReplace(index,index,insert))return null;return content.cut(0,dist).append(insert).append(content.cut(dist))}var inner=insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}var content=insertInto(this.content,pos+this.openLeft,fragment,null);return content&&new Slice(content,this.openLeft,this.openRight)}},{key:"removeBetween",value:function removeBetween(from,to){function removeRange(content,from,to){var _content$findIndex2=content.findIndex(from);var index=_content$findIndex2.index;var offset=_content$findIndex2.offset;var child=content.maybeChild(index);var _content$findIndex3=content.findIndex(to);var indexTo=_content$findIndex3.index;var offsetTo=_content$findIndex3.offset;if(offset==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset-1,to-offset-1)))}return new Slice(removeRange(this.content,from+this.openLeft,to+this.openLeft),this.openLeft,this.openRight)}},{key:"toString",value:function toString(){return this.content+"("+this.openLeft+","+this.openRight+")"}},{key:"toJSON",value:function toJSON(){if(!this.content.size)return null;return{content:this.content.toJSON(),openLeft:this.openLeft,openRight:this.openRight}}},{key:"size",get:function get(){return this.content.size-this.openLeft-this.openRight}}],[{key:"fromJSON",value:function fromJSON(schema,json){if(!json)return Slice.empty;return new Slice(Fragment.fromJSON(schema,json.content),json.openLeft,json.openRight)}}]);return Slice}();exports.Slice=Slice;

Slice.empty=new Slice(Fragment.empty,0,0);function replace($from,$to,slice){if(slice.openLeft>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openLeft!=$to.depth-slice.openRight)throw new ReplaceError("Inconsistent open depths");return replaceOuter($from,$to,slice,0)}exports.replace=replace;function replaceOuter($from,$to,slice,depth){var index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openLeft){var inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}else if(slice.content.size){var _prepareSliceForRepla=prepareSliceForReplace(slice,$from);var start=_prepareSliceForRepla.start;var end=_prepareSliceForRepla.end;return close(node,replaceThreeWay($from,start,end,$to,depth))}else{return close(node,replaceTwoWay($from,$to,depth))}}function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable($before,$after,depth){var node=$before.node(depth);checkJoin(node,$after.node(depth));return node}function addNode(child,target){var last=target.length-1;if(last>=0&&child.isText&&child.sameMarkup(target[last]))target[last]=child.withText(target[last].text+child.text);else target.push(child)}function addRange($start,$end,depth,target){var node=($end||$start).node(depth);var startIndex=0,endIndex=$end?$end.index(depth):node.childCount;if($start){startIndex=$start.index(depth);if($start.depth>depth){startIndex++}else if(!$start.atNodeBoundary){addNode($start.nodeAfter,target);startIndex++}}for(var i=startIndex;i<endIndex;i++){addNode(node.child(i),target)}if($end&&$end.depth==depth&&!$end.atNodeBoundary)addNode($end.nodeBefore,target)}function close(node,content){if(!node.type.validContent(content,node.attrs))throw new ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function replaceThreeWay($from,$start,$end,$to,depth){var openLeft=$from.depth>depth&&joinable($from,$start,depth+1);var openRight=$to.depth>depth&&joinable($end,$to,depth+1);var content=[];addRange(null,$from,depth,content);if(openLeft&&openRight&&$start.index(depth)==$end.index(depth)){checkJoin(openLeft,openRight);addNode(close(openLeft,replaceThreeWay($from,$start,$end,$to,depth+1)),content)}else{if(openLeft)addNode(close(openLeft,replaceTwoWay($from,$start,depth+1)),content);addRange($start,$end,depth,content);if(openRight)addNode(close(openRight,replaceTwoWay($end,$to,depth+1)),content)}addRange($to,null,depth,content);return new Fragment(content)}function replaceTwoWay($from,$to,depth){var content=[];addRange(null,$from,depth,content);if($from.depth>depth){var type=joinable($from,$to,depth+1);addNode(close(type,replaceTwoWay($from,$to,depth+1)),content)}addRange($to,null,depth,content);return new Fragment(content)}function prepareSliceForReplace(slice,$along){var extra=$along.depth-slice.openLeft,parent=$along.node(extra);var node=parent.copy(slice.content);for(var i=extra-1;i>=0;i--){node=$along.node(i).copy(Fragment.from(node))}return{start:node.resolveNoCache(slice.openLeft+extra),end:node.resolveNoCache(node.content.size-slice.openRight-extra)}}},{"../util/error":136,"./fragment":111}],117:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ResolvedPos=function(){function ResolvedPos(pos,path,parentOffset){_classCallCheck(this,ResolvedPos);this.pos=pos;this.path=path;this.depth=path.length/3-1;this.parentOffset=parentOffset}_createClass(ResolvedPos,[{key:"resolveDepth",value:function resolveDepth(val){if(val==null)return this.depth;if(val<0)return this.depth+val;return val}},{key:"node",value:function node(depth){return this.path[this.resolveDepth(depth)*3]}},{key:"index",value:function index(depth){return this.path[this.resolveDepth(depth)*3+1]}},{key:"indexAfter",value:function indexAfter(depth){depth=this.resolveDepth(depth);return this.index(depth)+(depth==this.depth&&this.atNodeBoundary?0:1)}},{key:"start",value:function start(depth){depth=this.resolveDepth(depth);return depth==0?0:this.path[depth*3-1]+1}},{key:"end",value:function end(depth){depth=this.resolveDepth(depth);return this.start(depth)+this.node(depth).content.size}},{key:"before",value:function before(depth){depth=this.resolveDepth(depth);if(!depth)throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[depth*3-1]}},{key:"after",value:function after(depth){depth=this.resolveDepth(depth);if(!depth)throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[depth*3-1]+this.path[depth*3].nodeSize}},{key:"sameDepth",value:function sameDepth(other){var depth=0,max=Math.min(this.depth,other.depth);while(depth<max&&this.index(depth)==other.index(depth)){++depth}return depth}},{key:"blockRange",value:function blockRange(){var other=arguments.length<=0||arguments[0]===undefined?this:arguments[0];var pred=arguments[1];if(other.pos<this.pos)return other.blockRange(this);for(var d=this.depth-(this.parent.isTextblock||this.pos==other.pos?1:0);d>=0;d--){if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d)}}},{key:"sameParent",value:function sameParent(other){return this.pos-this.parentOffset==other.pos-other.parentOffset}},{key:"toString",value:function toString(){var str="";for(var i=1;i<=this.depth;i++){str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1)}return str+":"+this.parentOffset}},{key:"plusOne",value:function plusOne(){var copy=this.path.slice(),skip=this.nodeAfter.nodeSize;copy[copy.length-2]+=1;var pos=copy[copy.length-1]=this.pos+skip;return new ResolvedPos(pos,copy,this.parentOffset+skip)}},{key:"parent",get:function get(){return this.node(this.depth)}},{key:"atNodeBoundary",get:function get(){return this.path[this.path.length-1]==this.pos}},{key:"nodeAfter",get:function get(){var parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;var dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child}},{key:"nodeBefore",get:function get(){var index=this.index(this.depth);var dOff=this.pos-this.path[this.path.length-1];if(dOff)return this.parent.child(index).cut(0,dOff);return index==0?null:this.parent.child(index-1)}}],[{key:"resolve",value:function resolve(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");var path=[];var start=0,parentOffset=pos;for(var node=doc;;){var _node$content$findInd=node.content.findIndex(parentOffset);var index=_node$content$findInd.index;var offset=_node$content$findInd.offset;var rem=parentOffset-offset;path.push(node,index,start+offset);if(!rem)break;node=node.child(index);if(node.isText)break;parentOffset=rem-1;start+=offset+1}return new ResolvedPos(pos,path,parentOffset)}},{key:"resolveCached",value:function resolveCached(doc,pos){for(var i=0;i<resolveCache.length;i++){var cached=resolveCache[i];if(cached.pos==pos&&cached.node(0)==doc)return cached}var result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc,pos);resolveCachePos=(resolveCachePos+1)%resolveCacheSize;return result}}]);return ResolvedPos}();exports.ResolvedPos=ResolvedPos;var resolveCache=[],resolveCachePos=0,resolveCacheSize=6;var NodeRange=function(){function NodeRange($from,$to,depth){_classCallCheck(this,NodeRange);this.$from=$from;this.$to=$to;this.depth=depth}_createClass(NodeRange,[{key:"start",get:function get(){return this.$from.before(this.depth+1)}},{key:"end",get:function get(){return this.$to.after(this.depth+1)}},{key:"parent",get:function get(){return this.$from.node(this.depth)}},{key:"startIndex",get:function get(){return this.$from.index(this.depth)}},{key:"endIndex",get:function get(){return this.$to.indexAfter(this.depth)}}]);return NodeRange}();exports.NodeRange=NodeRange},{}],118:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("./node");var Node=_require.Node;var TextNode=_require.TextNode;var _require2=require("./fragment");var Fragment=_require2.Fragment;var _require3=require("./mark");var Mark=_require3.Mark;var _require4=require("./content");var ContentExpr=_require4.ContentExpr;var _require5=require("./from_dom");var _parseDOM=_require5.parseDOM;var _require6=require("../util/obj");var copyObj=_require6.copyObj;var _require7=require("../util/orderedmap");var OrderedMap=_require7.OrderedMap;function defaultAttrs(attrs){var defaults=Object.create(null);for(var attrName in attrs){var attr=attrs[attrName];if(attr.default===undefined)return null;defaults[attrName]=attr.default}return defaults}function _computeAttrs(attrs,value){var built=Object.create(null);for(var name in attrs){var given=value&&value[name];if(given==null){var attr=attrs[name];if(attr.default!==undefined)given=attr.default;else if(attr.compute)given=attr.compute();else throw new RangeError("No value supplied for attribute "+name)}built[name]=given}return built}var NodeType=function(){function NodeType(name,schema){_classCallCheck(this,NodeType);this.name=name;Object.defineProperty(this,"attrs",{value:copyObj(this.attrs)});this.defaultAttrs=defaultAttrs(this.attrs);this.contentExpr=null;this.schema=schema}_createClass(NodeType,[{key:"hasRequiredAttrs",value:function hasRequiredAttrs(ignore){for(var n in this.attrs){if(this.attrs[n].isRequired&&(!ignore||!(n in ignore)))return true}return false}},{key:"compatibleContent",value:function compatibleContent(other){return this==other||this.contentExpr.compatible(other.contentExpr)}},{key:"computeAttrs",value:function computeAttrs(attrs){if(!attrs&&this.defaultAttrs)return this.defaultAttrs;else return _computeAttrs(this.attrs,attrs)}},{key:"create",value:function create(attrs,content,marks){return new Node(this,this.computeAttrs(attrs),Fragment.from(content),Mark.setFrom(marks))}},{key:"createChecked",value:function createChecked(attrs,content,marks){attrs=this.computeAttrs(attrs);content=Fragment.from(content);if(!this.validContent(content,attrs))throw new RangeError("Invalid content for node "+this.name);return new Node(this,attrs,content,Mark.setFrom(marks))}},{key:"createAndFill",value:function createAndFill(attrs,content,marks){attrs=this.computeAttrs(attrs);content=Fragment.from(content);if(content.size){var before=this.contentExpr.start(attrs).fillBefore(content);if(!before)return null;content=before.append(content)}var after=this.contentExpr.getMatchAt(attrs,content).fillBefore(Fragment.empty,true);if(!after)return null;return new Node(this,attrs,content.append(after),Mark.setFrom(marks))}},{key:"validContent",value:function validContent(content,attrs){return this.contentExpr.matches(attrs,content)}},{key:"toDOM",value:function toDOM(_){throw new Error("Failed to override NodeType.toDOM")}},{key:"isBlock",get:function get(){return false}},{key:"isTextblock",get:function get(){return false}},{key:"isInline",get:function get(){return false}},{key:"isText",get:function get(){return false}},{key:"isLeaf",get:function get(){return this.contentExpr.isLeaf}},{key:"selectable",get:function get(){return true}},{key:"draggable",get:function get(){return false}},{key:"matchDOMTag",get:function get(){}}],[{key:"compile",value:function compile(nodes,schema){var result=Object.create(null);nodes.forEach(function(name,spec){return result[name]=new spec.type(name,schema)});if(!result.doc)throw new RangeError("Every schema needs a 'doc' type");if(!result.text)throw new RangeError("Every schema needs a 'text' type");return result}}]);return NodeType}();exports.NodeType=NodeType;var Block=function(_NodeType){_inherits(Block,_NodeType);function Block(){_classCallCheck(this,Block);return _possibleConstructorReturn(this,Object.getPrototypeOf(Block).apply(this,arguments))}_createClass(Block,[{key:"isBlock",get:function get(){return true}},{key:"isTextblock",get:function get(){return this.contentExpr.inlineContent}}]);return Block}(NodeType);exports.Block=Block;var Inline=function(_NodeType2){_inherits(Inline,_NodeType2);function Inline(){_classCallCheck(this,Inline);return _possibleConstructorReturn(this,Object.getPrototypeOf(Inline).apply(this,arguments))}_createClass(Inline,[{key:"isInline",get:function get(){return true}}]);return Inline}(NodeType);exports.Inline=Inline;var Text=function(_Inline){_inherits(Text,_Inline);function Text(){_classCallCheck(this,Text);return _possibleConstructorReturn(this,Object.getPrototypeOf(Text).apply(this,arguments))}_createClass(Text,[{key:"create",value:function create(attrs,content,marks){return new TextNode(this,this.computeAttrs(attrs),content,marks)}},{key:"toDOM",value:function toDOM(node){return node.text}},{key:"selectable",get:function get(){return false}},{key:"isText",get:function get(){return true}}]);return Text}(Inline);exports.Text=Text;var Attribute=function(){function Attribute(){var options=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];_classCallCheck(this,Attribute);this.default=options.default;this.compute=options.compute}_createClass(Attribute,[{key:"isRequired",get:function get(){return this.default===undefined&&!this.compute}}]);return Attribute}();exports.Attribute=Attribute;var MarkType=function(){function MarkType(name,rank,schema){_classCallCheck(this,MarkType);this.name=name;Object.defineProperty(this,"attrs",{value:copyObj(this.attrs)});this.rank=rank;this.schema=schema;var defaults=defaultAttrs(this.attrs);this.instance=defaults&&new Mark(this,defaults)}_createClass(MarkType,[{key:"create",value:function create(attrs){if(!attrs&&this.instance)return this.instance;return new Mark(this,_computeAttrs(this.attrs,attrs))}},{key:"removeFromSet",value:function removeFromSet(set){for(var i=0;i<set.length;i++){if(set[i].type==this)return set.slice(0,i).concat(set.slice(i+1))}return set}},{key:"isInSet",value:function isInSet(set){for(var i=0;i<set.length;i++){if(set[i].type==this)return set[i]}}},{key:"toDOM",value:function toDOM(_){throw new Error("Failed to override MarkType.toDOM")}},{key:"inclusiveRight",get:function get(){return true}},{key:"matchDOMTag",get:function get(){}},{key:"matchDOMStyle",get:function get(){}}],[{key:"compile",value:function compile(marks,schema){var result=Object.create(null),rank=0;marks.forEach(function(name,markType){return result[name]=new markType(name,rank++,schema)});return result}}]);return MarkType}();exports.MarkType=MarkType;var Schema=function(){function Schema(spec,data){_classCallCheck(this,Schema);this.nodeSpec=OrderedMap.from(spec.nodes);this.markSpec=OrderedMap.from(spec.marks);this.data=data;this.nodes=NodeType.compile(this.nodeSpec,this);this.marks=MarkType.compile(this.markSpec,this);for(var prop in this.nodes){if(prop in this.marks)throw new RangeError(prop+" can not be both a node and a mark");var type=this.nodes[prop];type.contentExpr=ContentExpr.parse(type,this.nodeSpec.get(prop).content||"",this.nodeSpec)}this.cached=Object.create(null);this.cached.wrappings=Object.create(null);this.node=this.node.bind(this);this.text=this.text.bind(this);this.nodeFromJSON=this.nodeFromJSON.bind(this);this.markFromJSON=this.markFromJSON.bind(this)}_createClass(Schema,[{key:"node",value:function node(type,attrs,content,marks){if(typeof type=="string")type=this.nodeType(type);else if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);else if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")");return type.createChecked(attrs,content,marks)}},{key:"text",value:function text(_text,marks){return this.nodes.text.create(null,_text,Mark.setFrom(marks))}},{key:"mark",value:function mark(name,attrs){var spec=this.marks[name];if(!spec)throw new RangeError("No mark named "+name);return spec.create(attrs)}},{key:"nodeFromJSON",value:function nodeFromJSON(json){return Node.fromJSON(this,json)}},{key:"markFromJSON",value:function markFromJSON(json){var type=this.marks[json._];var attrs=null;for(var prop in json){if(prop!="_"){if(!attrs)attrs=Object.create(null);attrs[prop]=json[prop]}}return attrs?type.create(attrs):type.instance}},{key:"nodeType",value:function nodeType(name){var found=this.nodes[name];if(!found)throw new RangeError("Unknown node type: "+name);return found}},{key:"parseDOM",value:function parseDOM(dom){var options=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];return _parseDOM(this,dom,options)}}]);return Schema}();exports.Schema=Schema},{"../util/obj":138,"../util/orderedmap":139,"./content":109,"./fragment":111,"./from_dom":112,"./mark":114,"./node":115}],119:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var DOMSerializer=function(){function DOMSerializer(options){_classCallCheck(this,DOMSerializer);this.options=options||{};this.doc=this.options.document||window.document}_createClass(DOMSerializer,[{key:"renderNode",value:function renderNode(node,pos,offset){var dom=this.renderStructure(node.type.toDOM(node),node.content,pos+1);if(this.options.onRender)dom=this.options.onRender(node,dom,pos,offset)||dom;return dom}},{key:"renderStructure",value:function renderStructure(structure,content,startPos){if(typeof structure=="string")return this.doc.createTextNode(structure);if(structure.nodeType!=null)return structure;var dom=this.doc.createElement(structure[0]),attrs=structure[1],start=1;if(attrs&&(typeof attrs==="undefined"?"undefined":_typeof(attrs))=="object"&&attrs.nodeType==null&&!Array.isArray(attrs)){start=2;for(var name in attrs){if(name=="style")dom.style.cssText=attrs[name];else if(attrs[name])dom.setAttribute(name,attrs[name])}}for(var i=start;i<structure.length;i++){var child=structure[i];if(child===0){if(!content)throw new RangeError("Content hole not allowed in a Mark spec (must produce a single node)");if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");if(this.options.onContainer)this.options.onContainer(dom);this.renderFragment(content,dom,startPos)}else{dom.appendChild(this.renderStructure(child,content,startPos))}}return dom}},{key:"renderFragment",value:function renderFragment(fragment,where,startPos){if(!where)where=this.doc.createDocumentFragment();if(fragment.size==0)return where;if(!fragment.firstChild.isInline)this.renderBlocksInto(fragment,where,startPos);else if(this.options.renderInlineFlat)this.renderInlineFlatInto(fragment,where,startPos);else this.renderInlineInto(fragment,where,startPos);return where}},{key:"renderBlocksInto",value:function renderBlocksInto(fragment,where,startPos){var _this=this;fragment.forEach(function(node,offset){return where.appendChild(_this.renderNode(node,startPos+offset,offset))})}},{key:"renderInlineInto",value:function renderInlineInto(fragment,where,startPos){var _this2=this;var top=where;var active=[];fragment.forEach(function(node,offset){var keep=0;for(;keep<Math.min(active.length,node.marks.length);++keep){if(!node.marks[keep].eq(active[keep]))break}while(keep<active.length){active.pop();top=top.parentNode}while(active.length<node.marks.length){var add=node.marks[active.length];active.push(add);top=top.appendChild(_this2.renderMark(add))}top.appendChild(_this2.renderNode(node,startPos+offset,offset))})}},{key:"renderInlineFlatInto",value:function renderInlineFlatInto(fragment,where,startPos){var _this3=this;fragment.forEach(function(node,offset){var pos=startPos+offset,dom=_this3.renderNode(node,pos,offset);dom=_this3.wrapInlineFlat(dom,node.marks);dom=_this3.options.renderInlineFlat(node,dom,pos,offset)||dom;where.appendChild(dom)})}},{key:"renderMark",value:function renderMark(mark){return this.renderStructure(mark.type.toDOM(mark))}},{key:"wrapInlineFlat",value:function wrapInlineFlat(dom,marks){for(var i=marks.length-1;i>=0;i--){var wrap=this.renderMark(marks[i]);wrap.appendChild(dom);dom=wrap}return dom}}]);return DOMSerializer}();function fragmentToDOM(fragment,options){return new DOMSerializer(options).renderFragment(fragment,null,options.pos||0)}exports.fragmentToDOM=fragmentToDOM;function nodeToDOM(node,options){var serializer=new DOMSerializer(options),pos=options.pos||0;var dom=serializer.renderNode(node,pos,options.offset||0);if(node.isInline){dom=serializer.wrapInlineFlat(dom,node.marks);if(serializer.options.renderInlineFlat)dom=options.renderInlineFlat(node,dom,pos,options.offset||0)||dom}return dom}exports.nodeToDOM=nodeToDOM},{}],120:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../model");var Schema=_require.Schema;var Block=_require.Block;var Inline=_require.Inline;var Text=_require.Text;var Attribute=_require.Attribute;var MarkType=_require.MarkType;exports.Text=Text;var Doc=function(_Block){_inherits(Doc,_Block);function Doc(){_classCallCheck(this,Doc);return _possibleConstructorReturn(this,Object.getPrototypeOf(Doc).apply(this,arguments))}return Doc}(Block);exports.Doc=Doc;var BlockQuote=function(_Block2){_inherits(BlockQuote,_Block2);function BlockQuote(){_classCallCheck(this,BlockQuote);return _possibleConstructorReturn(this,Object.getPrototypeOf(BlockQuote).apply(this,arguments))}_createClass(BlockQuote,[{key:"toDOM",value:function toDOM(){return["blockquote",0]}},{key:"matchDOMTag",get:function get(){return{blockquote:null}}}]);return BlockQuote}(Block);exports.BlockQuote=BlockQuote;var OrderedList=function(_Block3){_inherits(OrderedList,_Block3);function OrderedList(){_classCallCheck(this,OrderedList);return _possibleConstructorReturn(this,Object.getPrototypeOf(OrderedList).apply(this,arguments))}_createClass(OrderedList,[{key:"toDOM",value:function toDOM(node){return["ol",{start:node.attrs.order==1?null:node.attrs.order},0]}},{key:"attrs",get:function get(){return{order:new Attribute({"default":1})}}},{key:"matchDOMTag",get:function get(){return{ol:function ol(dom){return{order:dom.hasAttribute("start")?+dom.getAttribute("start"):1}}}}}]);return OrderedList}(Block);exports.OrderedList=OrderedList;var BulletList=function(_Block4){_inherits(BulletList,_Block4);function BulletList(){_classCallCheck(this,BulletList);return _possibleConstructorReturn(this,Object.getPrototypeOf(BulletList).apply(this,arguments))}_createClass(BulletList,[{key:"toDOM",value:function toDOM(){return["ul",0]}},{key:"matchDOMTag",get:function get(){return{ul:null}}}]);return BulletList}(Block);exports.BulletList=BulletList;var ListItem=function(_Block5){_inherits(ListItem,_Block5);function ListItem(){_classCallCheck(this,ListItem);return _possibleConstructorReturn(this,Object.getPrototypeOf(ListItem).apply(this,arguments))}_createClass(ListItem,[{key:"toDOM",value:function toDOM(){return["li",0]}},{key:"matchDOMTag",get:function get(){return{li:null}}}]);return ListItem}(Block);exports.ListItem=ListItem;var HorizontalRule=function(_Block6){_inherits(HorizontalRule,_Block6);function HorizontalRule(){_classCallCheck(this,HorizontalRule);return _possibleConstructorReturn(this,Object.getPrototypeOf(HorizontalRule).apply(this,arguments))}_createClass(HorizontalRule,[{key:"toDOM",value:function toDOM(){return["div",["hr"]]}},{key:"matchDOMTag",get:function get(){return{hr:null}}}]);return HorizontalRule}(Block);exports.HorizontalRule=HorizontalRule;var Heading=function(_Block7){_inherits(Heading,_Block7);function Heading(){_classCallCheck(this,Heading);return _possibleConstructorReturn(this,Object.getPrototypeOf(Heading).apply(this,arguments))}_createClass(Heading,[{key:"toDOM",value:function toDOM(node){return["h"+node.attrs.level,0]}},{key:"attrs",get:function get(){return{level:new Attribute({"default":1})}}},{key:"maxLevel",get:function get(){return 6}},{key:"matchDOMTag",get:function get(){return{h1:{level:1},h2:{level:2},h3:{level:3},h4:{level:4},h5:{level:5},h6:{level:6}}}}]);return Heading}(Block);exports.Heading=Heading;var CodeBlock=function(_Block8){_inherits(CodeBlock,_Block8);function CodeBlock(){_classCallCheck(this,CodeBlock);return _possibleConstructorReturn(this,Object.getPrototypeOf(CodeBlock).apply(this,arguments))}_createClass(CodeBlock,[{key:"toDOM",value:function toDOM(){return["pre",["code",0]]}},{key:"isCode",get:function get(){return true}},{key:"matchDOMTag",get:function get(){return{pre:[null,{preserveWhitespace:true}]}}}]);return CodeBlock}(Block);exports.CodeBlock=CodeBlock;var Paragraph=function(_Block9){_inherits(Paragraph,_Block9);function Paragraph(){_classCallCheck(this,Paragraph);return _possibleConstructorReturn(this,Object.getPrototypeOf(Paragraph).apply(this,arguments))}_createClass(Paragraph,[{key:"toDOM",value:function toDOM(){return["p",0]}},{key:"matchDOMTag",get:function get(){return{p:null}}}]);return Paragraph}(Block);exports.Paragraph=Paragraph;var Image=function(_Inline){_inherits(Image,_Inline);function Image(){_classCallCheck(this,Image);return _possibleConstructorReturn(this,Object.getPrototypeOf(Image).apply(this,arguments))}_createClass(Image,[{key:"toDOM",value:function toDOM(node){return["img",node.attrs]}},{key:"attrs",get:function get(){return{src:new Attribute,alt:new Attribute({"default":""}),title:new Attribute({"default":""})}}},{key:"draggable",get:function get(){return true}},{key:"matchDOMTag",get:function get(){return{"img[src]":function imgSrc(dom){return{src:dom.getAttribute("src"),title:dom.getAttribute("title"),alt:dom.getAttribute("alt")}}}}}]);return Image}(Inline);exports.Image=Image;var HardBreak=function(_Inline2){_inherits(HardBreak,_Inline2);function HardBreak(){_classCallCheck(this,HardBreak);return _possibleConstructorReturn(this,Object.getPrototypeOf(HardBreak).apply(this,arguments))}_createClass(HardBreak,[{key:"toDOM",value:function toDOM(){return["br"]}},{key:"selectable",get:function get(){return false}},{key:"isBR",get:function get(){return true}},{key:"matchDOMTag",get:function get(){return{br:null}}}]);return HardBreak}(Inline);exports.HardBreak=HardBreak;var EmMark=function(_MarkType){_inherits(EmMark,_MarkType);function EmMark(){_classCallCheck(this,EmMark);return _possibleConstructorReturn(this,Object.getPrototypeOf(EmMark).apply(this,arguments))}_createClass(EmMark,[{key:"toDOM",value:function toDOM(){return["em"]}},{key:"matchDOMTag",get:function get(){return{i:null,em:null}}},{key:"matchDOMStyle",get:function get(){return{"font-style":function fontStyle(value){return value=="italic"&&null}}}}]);return EmMark}(MarkType);exports.EmMark=EmMark;var StrongMark=function(_MarkType2){_inherits(StrongMark,_MarkType2);function StrongMark(){_classCallCheck(this,StrongMark);return _possibleConstructorReturn(this,Object.getPrototypeOf(StrongMark).apply(this,arguments))}_createClass(StrongMark,[{key:"toDOM",value:function toDOM(){return["strong"]}},{key:"matchDOMTag",get:function get(){return{b:null,strong:null}}},{key:"matchDOMStyle",get:function get(){return{"font-weight":function fontWeight(value){return/^(bold(er)?|[5-9]\d{2,})$/.test(value)&&null}}}}]);return StrongMark}(MarkType);exports.StrongMark=StrongMark;var LinkMark=function(_MarkType3){_inherits(LinkMark,_MarkType3);function LinkMark(){_classCallCheck(this,LinkMark);return _possibleConstructorReturn(this,Object.getPrototypeOf(LinkMark).apply(this,arguments))}_createClass(LinkMark,[{key:"toDOM",value:function toDOM(node){return["a",node.attrs]}},{key:"attrs",get:function get(){return{href:new Attribute,title:new Attribute({"default":""})}}},{key:"matchDOMTag",get:function get(){return{"a[href]":function aHref(dom){return{href:dom.getAttribute("href"),title:dom.getAttribute("title")}}}}}]);return LinkMark}(MarkType);exports.LinkMark=LinkMark;var CodeMark=function(_MarkType4){_inherits(CodeMark,_MarkType4);function CodeMark(){_classCallCheck(this,CodeMark);return _possibleConstructorReturn(this,Object.getPrototypeOf(CodeMark).apply(this,arguments))}_createClass(CodeMark,[{key:"toDOM",value:function toDOM(){return["code"]}},{key:"isCode",get:function get(){return true}},{key:"matchDOMTag",get:function get(){return{
code:null}}}]);return CodeMark}(MarkType);exports.CodeMark=CodeMark;var schema=new Schema({nodes:{doc:{type:Doc,content:"block+"},paragraph:{type:Paragraph,content:"inline<_>*",group:"block"},blockquote:{type:BlockQuote,content:"block+",group:"block"},ordered_list:{type:OrderedList,content:"list_item+",group:"block"},bullet_list:{type:BulletList,content:"list_item+",group:"block"},horizontal_rule:{type:HorizontalRule,group:"block"},heading:{type:Heading,content:"inline<_>*",group:"block"},code_block:{type:CodeBlock,content:"text*",group:"block"},list_item:{type:ListItem,content:"paragraph block*"},text:{type:Text,group:"inline"},image:{type:Image,group:"inline"},hard_break:{type:HardBreak,group:"inline"}},marks:{em:EmMark,strong:StrongMark,link:LinkMark,code:CodeMark}});exports.schema=schema},{"../model":113}],121:[function(require,module,exports){"use strict";var _require=require("./transform");exports.Transform=_require.Transform;exports.TransformError=_require.TransformError;var _require2=require("./step");exports.Step=_require2.Step;exports.StepResult=_require2.StepResult;var _require3=require("./structure");exports.joinPoint=_require3.joinPoint;exports.joinable=_require3.joinable;exports.canSplit=_require3.canSplit;exports.insertPoint=_require3.insertPoint;exports.liftTarget=_require3.liftTarget;exports.findWrapping=_require3.findWrapping;var _require4=require("./map");exports.PosMap=_require4.PosMap;exports.MapResult=_require4.MapResult;exports.Remapping=_require4.Remapping;exports.mapThrough=_require4.mapThrough;exports.mapThroughResult=_require4.mapThroughResult;var _require5=require("./mark_step");exports.AddMarkStep=_require5.AddMarkStep;exports.RemoveMarkStep=_require5.RemoveMarkStep;var _require6=require("./replace_step");exports.ReplaceStep=_require6.ReplaceStep;exports.ReplaceAroundStep=_require6.ReplaceAroundStep;require("./mark");require("./replace")},{"./map":122,"./mark":123,"./mark_step":124,"./replace":125,"./replace_step":126,"./step":127,"./structure":128,"./transform":129}],122:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var lower16=65535;var factor16=Math.pow(2,16);function makeRecover(index,offset){return index+offset*factor16}function recoverIndex(value){return value&lower16}function recoverOffset(value){return(value-(value&lower16))/factor16}var MapResult=function MapResult(pos){var deleted=arguments.length<=1||arguments[1]===undefined?false:arguments[1];var recover=arguments.length<=2||arguments[2]===undefined?null:arguments[2];_classCallCheck(this,MapResult);this.pos=pos;this.deleted=deleted;this.recover=recover};exports.MapResult=MapResult;var PosMap=function(){function PosMap(ranges){var inverted=arguments.length<=1||arguments[1]===undefined?false:arguments[1];_classCallCheck(this,PosMap);this.ranges=ranges;this.inverted=inverted}_createClass(PosMap,[{key:"recover",value:function recover(value){var diff=0,index=recoverIndex(value);if(!this.inverted)for(var i=0;i<index;i++){diff+=this.ranges[i*3+2]-this.ranges[i*3+1]}return this.ranges[index*3]+diff+recoverOffset(value)}},{key:"mapResult",value:function mapResult(pos,bias){return this._map(pos,bias,false)}},{key:"map",value:function map(pos,bias){return this._map(pos,bias,true)}},{key:"_map",value:function _map(pos,bias,simple){var diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(var i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){var side=!oldSize?bias:pos==start?-1:pos==end?1:bias;var result=start+diff+(side<0?0:newSize);if(simple)return result;var recover=makeRecover(i/3,pos-start);return new MapResult(result,pos!=start&&pos!=end,recover)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff)}},{key:"touches",value:function touches(pos,recover){var diff=0,index=recoverIndex(recover);var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(var i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],end=start+oldSize;if(pos<=end&&i==index*3)return true;diff+=this.ranges[i+newIndex]-oldSize}return false}},{key:"forEach",value:function forEach(f){var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(var i=0,diff=0;i<this.ranges.length;i+=3){var start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff);var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize);diff+=newSize-oldSize}}},{key:"invert",value:function invert(){return new PosMap(this.ranges,!this.inverted)}},{key:"toString",value:function toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}]);return PosMap}();exports.PosMap=PosMap;PosMap.empty=new PosMap([]);var Remapping=function(){function Remapping(){var head=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];var tail=arguments.length<=1||arguments[1]===undefined?[]:arguments[1];_classCallCheck(this,Remapping);this.head=head;this.tail=tail;this.mirror=Object.create(null)}_createClass(Remapping,[{key:"addToFront",value:function addToFront(map,corr){this.head.push(map);var id=-this.head.length;if(corr!=null)this.mirror[id]=corr;return id}},{key:"addToBack",value:function addToBack(map,corr){this.tail.push(map);var id=this.tail.length-1;if(corr!=null)this.mirror[corr]=id;return id}},{key:"get",value:function get(id){return id<0?this.head[-id-1]:this.tail[id]}},{key:"mapResult",value:function mapResult(pos,bias){return this._map(pos,bias,false)}},{key:"map",value:function map(pos,bias){return this._map(pos,bias,true)}},{key:"_map",value:function _map(pos,bias,simple){var deleted=false,recoverables=null;for(var i=-this.head.length;i<this.tail.length;i++){var map=this.get(i),rec=void 0;if((rec=recoverables&&recoverables[i])!=null&&map.touches(pos,rec)){pos=map.recover(rec);continue}var result=map.mapResult(pos,bias);if(result.recover!=null){var corr=this.mirror[i];if(corr!=null){if(result.deleted){i=corr;pos=this.get(corr).recover(result.recover);continue}else{(recoverables||(recoverables=Object.create(null)))[corr]=result.recover}}}if(result.deleted)deleted=true;pos=result.pos}return simple?pos:new MapResult(pos,deleted)}},{key:"toString",value:function toString(){var maps=[];for(var i=-this.head.length;i<this.tail.length;i++){maps.push(i+":"+this.get(i)+(this.mirror[i]!=null?"->"+this.mirror[i]:""))}return maps.join("\n")}}]);return Remapping}();exports.Remapping=Remapping;function mapThrough(mappables,pos,bias,start){for(var i=start||0;i<mappables.length;i++){pos=mappables[i].map(pos,bias)}return pos}exports.mapThrough=mapThrough;function mapThroughResult(mappables,pos,bias,start){var deleted=false;for(var i=start||0;i<mappables.length;i++){var result=mappables[i].mapResult(pos,bias);pos=result.pos;if(result.deleted)deleted=true}return new MapResult(pos,deleted)}exports.mapThroughResult=mapThroughResult},{}],123:[function(require,module,exports){"use strict";var _require=require("../model");var MarkType=_require.MarkType;var Slice=_require.Slice;var _require2=require("./transform");var Transform=_require2.Transform;var _require3=require("./mark_step");var AddMarkStep=_require3.AddMarkStep;var RemoveMarkStep=_require3.RemoveMarkStep;var _require4=require("./replace_step");var ReplaceStep=_require4.ReplaceStep;Transform.prototype.addMark=function(from,to,mark){var _this=this;var removed=[],added=[],removing=null,adding=null;this.doc.nodesBetween(from,to,function(node,pos,parent,index){if(!node.isInline)return;var marks=node.marks;if(mark.isInSet(marks)||!parent.contentMatchAt(index+1).allowsMark(mark.type)){adding=removing=null}else{var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to);var rm=mark.type.isInSet(marks);if(!rm)removing=null;else if(removing&&removing.mark.eq(rm))removing.to=end;else removed.push(removing=new RemoveMarkStep(start,end,rm));if(adding)adding.to=end;else added.push(adding=new AddMarkStep(start,end,mark))}});removed.forEach(function(s){return _this.step(s)});added.forEach(function(s){return _this.step(s)});return this};Transform.prototype.removeMark=function(from,to){var _this2=this;var mark=arguments.length<=2||arguments[2]===undefined?null:arguments[2];var matched=[],step=0;this.doc.nodesBetween(from,to,function(node,pos){if(!node.isInline)return;step++;var toRemove=null;if(mark instanceof MarkType){var found=mark.isInSet(node.marks);if(found)toRemove=[found]}else if(mark){if(mark.isInSet(node.marks))toRemove=[mark]}else{toRemove=node.marks}if(toRemove&&toRemove.length){var end=Math.min(pos+node.nodeSize,to);for(var i=0;i<toRemove.length;i++){var style=toRemove[i],_found=void 0;for(var j=0;j<matched.length;j++){var m=matched[j];if(m.step==step-1&&style.eq(matched[j].style))_found=m}if(_found){_found.to=end;_found.step=step}else{matched.push({style:style,from:Math.max(pos,from),to:end,step:step})}}}});matched.forEach(function(m){return _this2.step(new RemoveMarkStep(m.from,m.to,m.style))});return this};Transform.prototype.clearMarkup=function(from,to){var _this3=this;var delSteps=[];this.doc.nodesBetween(from,to,function(node,pos){if(!node.isInline)return;if(!node.type.isText){delSteps.push(new ReplaceStep(pos,pos+node.nodeSize,Slice.empty));return}for(var i=0;i<node.marks.length;i++){_this3.step(new RemoveMarkStep(Math.max(pos,from),Math.min(pos+node.nodeSize,to),node.marks[i]))}});for(var i=delSteps.length-1;i>=0;i--){this.step(delSteps[i])}return this};Transform.prototype.clearMarkupFor=function(pos,newType,newAttrs){var node=this.doc.nodeAt(pos),match=newType.contentExpr.start(newAttrs);var delSteps=[];for(var i=0,cur=pos+1;i<node.childCount;i++){var child=node.child(i),end=cur+child.nodeSize;var allowed=match.matchType(child.type,child.attrs);if(!allowed){delSteps.push(new ReplaceStep(cur,end,Slice.empty))}else{match=allowed;for(var j=0;j<child.marks.length;j++){if(!match.allowsMark(child.marks[j]))this.step(new RemoveMarkStep(cur,end,child.marks[j]))}}cur=end}for(var _i=delSteps.length-1;_i>=0;_i--){this.step(delSteps[_i])}return this}},{"../model":113,"./mark_step":124,"./replace_step":126,"./transform":129}],124:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../model");var Fragment=_require.Fragment;var Slice=_require.Slice;var _require2=require("./step");var Step=_require2.Step;var StepResult=_require2.StepResult;function mapFragment(fragment,f,parent){var mapped=[];for(var i=0;i<fragment.childCount;i++){var child=fragment.child(i);if(child.content.size)child=child.copy(mapFragment(child.content,f,child));if(child.isInline)child=f(child,parent,i);mapped.push(child)}return Fragment.fromArray(mapped)}var AddMarkStep=function(_Step){_inherits(AddMarkStep,_Step);function AddMarkStep(from,to,mark){_classCallCheck(this,AddMarkStep);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(AddMarkStep).call(this));_this.from=from;_this.to=to;_this.mark=mark;return _this}_createClass(AddMarkStep,[{key:"apply",value:function apply(doc){var _this2=this;var oldSlice=doc.slice(this.from,this.to);var slice=new Slice(mapFragment(oldSlice.content,function(node,parent,index){if(!parent.contentMatchAt(index+1).allowsMark(_this2.mark.type))return node;return node.mark(_this2.mark.addToSet(node.marks))},oldSlice.possibleParent),oldSlice.openLeft,oldSlice.openRight);return StepResult.fromReplace(doc,this.from,this.to,slice)}},{key:"invert",value:function invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}},{key:"map",value:function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);if(from.deleted&&to.deleted||from.pos>=to.pos)return null;return new AddMarkStep(from.pos,to.pos,this.mark)}}],[{key:"fromJSON",value:function fromJSON(schema,json){return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))}}]);return AddMarkStep}(Step);exports.AddMarkStep=AddMarkStep;Step.jsonID("addMark",AddMarkStep);var RemoveMarkStep=function(_Step2){_inherits(RemoveMarkStep,_Step2);function RemoveMarkStep(from,to,mark){_classCallCheck(this,RemoveMarkStep);var _this3=_possibleConstructorReturn(this,Object.getPrototypeOf(RemoveMarkStep).call(this));_this3.from=from;_this3.to=to;_this3.mark=mark;return _this3}_createClass(RemoveMarkStep,[{key:"apply",value:function apply(doc){var _this4=this;var oldSlice=doc.slice(this.from,this.to);var slice=new Slice(mapFragment(oldSlice.content,function(node){return node.mark(_this4.mark.removeFromSet(node.marks))}),oldSlice.openLeft,oldSlice.openRight);return StepResult.fromReplace(doc,this.from,this.to,slice)}},{key:"invert",value:function invert(){return new AddMarkStep(this.from,this.to,this.mark)}},{key:"map",value:function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);if(from.deleted&&to.deleted||from.pos>=to.pos)return null;return new RemoveMarkStep(from.pos,to.pos,this.mark)}}],[{key:"fromJSON",value:function fromJSON(schema,json){return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))}}]);return RemoveMarkStep}(Step);exports.RemoveMarkStep=RemoveMarkStep;Step.jsonID("removeMark",RemoveMarkStep)},{"../model":113,"./step":127}],125:[function(require,module,exports){"use strict";var _require=require("../model");var Fragment=_require.Fragment;var Slice=_require.Slice;var _require2=require("./replace_step");var ReplaceStep=_require2.ReplaceStep;var ReplaceAroundStep=_require2.ReplaceAroundStep;var _require3=require("./transform");var Transform=_require3.Transform;Transform.prototype.delete=function(from,to){return this.replace(from,to,Slice.empty)};Transform.prototype.replace=function(from){var to=arguments.length<=1||arguments[1]===undefined?from:arguments[1];var slice=arguments.length<=2||arguments[2]===undefined?Slice.empty:arguments[2];if(from==to&&!slice.size)return this;var $from=this.doc.resolve(from),$to=this.doc.resolve(to);var placed=placeSlice($from,slice);var fittedLeft=fitLeft($from,placed);var fitted=fitRight($from,$to,fittedLeft);if(!fitted)return this;if(fittedLeft.size!=fitted.size&&canMoveText($from,$to,fittedLeft)){var d=$to.depth,after=$to.after(d);while(d>1&&after==$to.end(--d)){++after}var fittedAfter=fitRight($from,this.doc.resolve(after),fittedLeft);if(fittedAfter)return this.step(new ReplaceAroundStep(from,after,to,$to.end(),fittedAfter,fittedLeft.size))}return this.step(new ReplaceStep(from,to,fitted))};Transform.prototype.replaceWith=function(from,to,content){return this.replace(from,to,new Slice(Fragment.from(content),0,0))};Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)};Transform.prototype.insertText=function(pos,text){return this.insert(pos,this.doc.type.schema.text(text,this.doc.marksAt(pos)))};Transform.prototype.insertInline=function(pos,node){return this.insert(pos,node.mark(this.doc.marksAt(pos)))};function fitLeftInner($from,depth,placed,placedBelow){var content=Fragment.empty,openRight=0,placedHere=placed[depth];if($from.depth>depth){var inner=fitLeftInner($from,depth+1,placed,placedBelow||placedHere);openRight=inner.openRight+1;content=Fragment.from($from.node(depth+1).copy(inner.content))}if(placedHere){content=content.append(placedHere.content);openRight=placedHere.openRight}if(placedBelow){content=content.append($from.node(depth).contentMatchAt($from.indexAfter(depth)).fillBefore(Fragment.empty,true));openRight=0}return{content:content,openRight:openRight}}function fitLeft($from,placed){var _fitLeftInner=fitLeftInner($from,0,placed,false);var content=_fitLeftInner.content;var openRight=_fitLeftInner.openRight;return new Slice(content,$from.depth,openRight||0)}function fitRightJoin(content,parent,$from,$to,depth,openLeft,openRight){var match=void 0,count=content.childCount,matchCount=count-(openRight>0?1:0);if(openLeft<0)match=parent.contentMatchAt(matchCount);else if(count==1&&openRight>0)match=$from.node(depth).contentMatchAt(openLeft?$from.index(depth):$from.indexAfter(depth));else match=$from.node(depth).contentMatchAt($from.indexAfter(depth)).matchFragment(content,count>0&&openLeft?1:0,matchCount);var toNode=$to.node(depth);if(openRight>0&&depth<$to.depth){var after=toNode.content.cutByIndex($to.indexAfter(depth)).addToStart(content.lastChild);var _joinable=match.fillBefore(after,true);if(_joinable&&_joinable.size&&openLeft>0&&count==1)_joinable=null;if(_joinable){var inner=fitRightJoin(content.lastChild.content,content.lastChild,$from,$to,depth+1,count==1?openLeft-1:-1,openRight-1);if(inner){var last=content.lastChild.copy(inner);if(_joinable.size)return content.cutByIndex(0,count-1).append(_joinable).addToEnd(last);else return content.replaceChild(count-1,last)}}}if(openRight>0)match=match.matchNode(count==1&&openLeft>0?$from.node(depth+1):content.lastChild);var toIndex=$to.index(depth);if(toIndex==toNode.childCount&&!toNode.type.compatibleContent(parent.type))return null;var joinable=match.fillBefore(toNode.content,true,toIndex);if(!joinable)return null;if(openRight>0){var closed=fitRightClosed(content.lastChild,openRight-1,$from,depth+1,count==1?openLeft-1:-1);content=content.replaceChild(count-1,closed)}content=content.append(joinable);if($to.depth>depth)content=content.addToEnd(fitRightSeparate($to,depth+1));return content}function fitRightClosed(node,openRight,$from,depth,openLeft){var match=void 0,content=node.content,count=content.childCount;if(openLeft>=0)match=$from.node(depth).contentMatchAt($from.indexAfter(depth)).matchFragment(content,openLeft>0?1:0,count);else match=node.contentMatchAt(count);if(openRight>0){var closed=fitRightClosed(content.lastChild,openRight-1,$from,depth+1,count==1?openLeft-1:-1);content=content.replaceChild(count-1,closed)}return node.copy(content.append(match.fillBefore(Fragment.empty,true)))}function fitRightSeparate($to,depth){var node=$to.node(depth);var fill=node.contentMatchAt(0).fillBefore(node.content,true,$to.index(depth));if($to.depth>depth)fill=fill.addToEnd(fitRightSeparate($to,depth+1));return node.copy(fill)}function normalizeSlice(content,openLeft,openRight){while(openLeft>0&&openRight>0&&content.childCount==1){content=content.firstChild.content;openLeft--;openRight--}return new Slice(content,openLeft,openRight)}function fitRight($from,$to,slice){var fitted=fitRightJoin(slice.content,$from.node(0),$from,$to,0,slice.openLeft,slice.openRight);if(!fitted)return null;return normalizeSlice(fitted,slice.openLeft,$to.depth)}function canMoveText($from,$to,slice){if(!$to.parent.isTextblock)return false;var match=void 0;if(!slice.openRight){var parent=$from.node($from.depth-(slice.openLeft-slice.openRight));if(!parent.isTextblock)return false;match=parent.contentMatchAt(parent.childCount);if(slice.size)match=match.matchFragment(slice.content,slice.openLeft?1:0)}else{var _parent=nodeRight(slice.content,slice.openRight);if(!_parent.isTextblock)return false;match=_parent.contentMatchAt(_parent.childCount)}match=match.matchFragment($to.parent.content,$to.index());return match&&match.validEnd()}function nodeLeft(content,depth){for(var i=1;i<depth;i++){content=content.firstChild.content}return content.firstChild}function nodeRight(content,depth){for(var i=1;i<depth;i++){content=content.lastChild.content}return content.lastChild}function placeSlice($from,slice){var dFrom=$from.depth,unplaced=null;var placed=[],parents=null;for(var dSlice=slice.openLeft;;--dSlice){var curType=void 0,curAttrs=void 0,curFragment=void 0;if(dSlice>=0){if(dSlice>0){var _nodeLeft=nodeLeft(slice.content,dSlice);curType=_nodeLeft.type;curAttrs=_nodeLeft.attrs;curFragment=_nodeLeft.content}else if(dSlice==0){curFragment=slice.content}if(dSlice<slice.openLeft)curFragment=curFragment.cut(curFragment.firstChild.nodeSize)}else{curFragment=Fragment.empty;var parent=parents[parents.length+dSlice-1];curType=parent.type;curAttrs=parent.attrs}if(unplaced)curFragment=curFragment.addToStart(unplaced);if(curFragment.size==0&&dSlice<=0)break;var found=findPlacement(curFragment,$from,dFrom);if(found){if(found.fragment.size>0)placed[found.depth]={content:found.fill.append(found.fragment),openRight:dSlice>0?0:slice.openRight-dSlice,depth:found.depth};if(dSlice<=0)break;unplaced=null;dFrom=Math.max(0,found.depth-1)}else{if(dSlice==0){var top=$from.node(0);parents=top.contentMatchAt($from.index(0)).findWrapping(curFragment.firstChild.type,curFragment.firstChild.attrs);if(!parents)break;var last=parents[parents.length-1];if(last?!last.type.contentExpr.matches(last.attrs,curFragment):!top.canReplace($from.indexAfter(0),$from.depth?$from.index(0):$from.indexAfter(0),curFragment))break;parents=[{type:top.type,attrs:top.attrs}].concat(parents);curType=parents[parents.length-1].type;curAttrs=parents[parents.length-1].type}curFragment=curType.contentExpr.start(curAttrs).fillBefore(curFragment,true).append(curFragment);unplaced=curType.create(curAttrs,curFragment)}}return placed}function findPlacement(fragment,$from,start){var hasMarks=false;for(var i=0;i<fragment.childCount;i++){if(fragment.child(i).marks.length)hasMarks=true}for(var d=start;d>=0;d--){var startMatch=$from.node(d).contentMatchAt($from.indexAfter(d));var match=startMatch.fillBefore(fragment);if(match)return{depth:d,fill:match,fragment:fragment};if(hasMarks){var stripped=matchStrippingMarks(startMatch,fragment);if(stripped)return{depth:d,fill:Fragment.empty,fragment:stripped}}}}function matchStrippingMarks(match,fragment){var newNodes=[];for(var i=0;i<fragment.childCount;i++){var node=fragment.child(i),stripped=node.mark(node.marks.filter(function(m){return match.allowsMark(m.type)}));match=match.matchNode(stripped);if(!match)return null;newNodes.push(stripped)}return Fragment.from(newNodes)}},{"../model":113,"./replace_step":126,"./transform":129}],126:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../model");var Slice=_require.Slice;var _require2=require("./step");var Step=_require2.Step;var StepResult=_require2.StepResult;var _require3=require("./map");var PosMap=_require3.PosMap;var ReplaceStep=function(_Step){_inherits(ReplaceStep,_Step);function ReplaceStep(from,to,slice,structure){_classCallCheck(this,ReplaceStep);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(ReplaceStep).call(this));_this.from=from;_this.to=to;_this.slice=slice;_this.structure=!!structure;return _this}_createClass(ReplaceStep,[{key:"apply",value:function apply(doc){if(this.structure&&contentBetween(doc,this.from,this.to))return StepResult.fail("Structure replace would overwrite content");return StepResult.fromReplace(doc,this.from,this.to,this.slice)}},{key:"posMap",value:function posMap(){return new PosMap([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function invert(doc){return new ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))}},{key:"map",value:function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);if(from.deleted&&to.deleted)return null;return new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)}}],[{key:"fromJSON",value:function fromJSON(schema,json){return new ReplaceStep(json.from,json.to,Slice.fromJSON(schema,json.slice))}}]);return ReplaceStep}(Step);exports.ReplaceStep=ReplaceStep;Step.jsonID("replace",ReplaceStep);var ReplaceAroundStep=function(_Step2){_inherits(ReplaceAroundStep,_Step2);function ReplaceAroundStep(from,to,gapFrom,gapTo,slice,insert,structure){_classCallCheck(this,ReplaceAroundStep);var _this2=_possibleConstructorReturn(this,Object.getPrototypeOf(ReplaceAroundStep).call(this));_this2.from=from;_this2.to=to;_this2.gapFrom=gapFrom;_this2.gapTo=gapTo;_this2.slice=slice;_this2.insert=insert;_this2.structure=!!structure;return _this2}_createClass(ReplaceAroundStep,[{key:"apply",value:function apply(doc){if(this.structure&&(contentBetween(doc,this.from,this.gapFrom)||contentBetween(doc,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");var gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openLeft||gap.openRight)return StepResult.fail("Gap is not a flat range");var inserted=this.slice.insertAt(this.insert,gap.content);if(!inserted)return StepResult.fail("Content does not fit in gap");return StepResult.fromReplace(doc,this.from,this.to,inserted)}},{key:"posMap",value:function posMap(){return new PosMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function invert(doc){var gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function map(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);var gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);if(from.deleted&&to.deleted||gapFrom<from.pos||gapTo>to.pos)return null;return new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)}}],[{key:"fromJSON",value:function fromJSON(schema,json){return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,Slice.fromJSON(schema,json.slice),json.insert,json.structure)}}]);return ReplaceAroundStep}(Step);exports.ReplaceAroundStep=ReplaceAroundStep;Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(doc,from,to){var $from=doc.resolve(from),dist=to-from,depth=$from.depth;while(dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount){depth--;dist--}if(dist>0){var next=$from.node(depth).maybeChild($from.indexAfter(depth));while(dist>0){if(!next||next.type.isLeaf)return true;next=next.firstChild;dist--}}return false}},{"../model":113,"./map":122,"./step":127}],127:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../model");var ReplaceError=_require.ReplaceError;var _require2=require("./map");var PosMap=_require2.PosMap;function mustOverride(){throw new Error("Override me")}var stepsByID=Object.create(null);var Step=function(){function Step(){_classCallCheck(this,Step)}_createClass(Step,[{key:"apply",value:function apply(_doc){return mustOverride()}},{key:"posMap",value:function posMap(){return PosMap.empty}},{key:"invert",value:function invert(_doc){return mustOverride()}},{key:"map",value:function map(_mapping){return mustOverride()}},{key:"toJSON",value:function toJSON(){var obj={stepType:this.jsonID};for(var prop in this){if(this.hasOwnProperty(prop)){var val=this[prop];obj[prop]=val&&val.toJSON?val.toJSON():val}}return obj}}],[{key:"fromJSON",value:function fromJSON(schema,json){return stepsByID[json.stepType].fromJSON(schema,json)}},{key:"jsonID",value:function jsonID(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);stepsByID[id]=stepClass;stepClass.prototype.jsonID=id;return stepClass}}]);return Step}();exports.Step=Step;var StepResult=function(){function StepResult(doc,failed){_classCallCheck(this,StepResult);this.doc=doc;this.failed=failed}_createClass(StepResult,null,[{key:"ok",value:function ok(doc){return new StepResult(doc,null)}},{key:"fail",value:function fail(message){return new StepResult(null,message)}},{key:"fromReplace",value:function fromReplace(doc,from,to,slice){try{return StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof ReplaceError)return StepResult.fail(e.message);throw e}}}]);return StepResult}();exports.StepResult=StepResult},{"../model":113,"./map":122}],128:[function(require,module,exports){"use strict";var _require=require("../model");var Slice=_require.Slice;var Fragment=_require.Fragment;var _require2=require("./transform");var Transform=_require2.Transform;var _require3=require("./replace_step");var ReplaceStep=_require3.ReplaceStep;var ReplaceAroundStep=_require3.ReplaceAroundStep;function canCut(node,start,end){return(start==0||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end));

}function liftTarget(range){var parent=range.parent;var content=parent.content.cutByIndex(range.startIndex,range.endIndex);for(var depth=range.depth;;--depth){var node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(depth==0||!canCut(node,index,endIndex))break}}exports.liftTarget=liftTarget;Transform.prototype.lift=function(range,target){var $from=range.$from;var $to=range.$to;var depth=range.depth;var gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1);var start=gapStart,end=gapEnd;var before=Fragment.empty,openLeft=0;for(var d=depth,splitting=false;d>target;d--){if(splitting||$from.index(d)>0){splitting=true;before=Fragment.from($from.node(d).copy(before));openLeft++}else{start--}}var after=Fragment.empty,openRight=0;for(var _d=depth,_splitting=false;_d>target;_d--){if(_splitting||$to.after(_d+1)<$to.end(_d)){_splitting=true;after=Fragment.from($to.node(_d).copy(after));openRight++}else{end++}}return this.step(new ReplaceAroundStep(start,end,gapStart,gapEnd,new Slice(before.append(after),openLeft,openRight),before.size-openLeft,true))};function findWrapping(range,nodeType,attrs){var innerRange=arguments.length<=3||arguments[3]===undefined?range:arguments[3];var wrap={type:nodeType,attrs:attrs};var around=findWrappingOutside(range,wrap);var inner=around&&findWrappingInside(innerRange,wrap);if(!inner)return null;return around.concat(wrap).concat(inner)}exports.findWrapping=findWrapping;function findWrappingOutside(range,wrap){var parent=range.parent;var startIndex=range.startIndex;var endIndex=range.endIndex;var around=parent.contentMatchAt(startIndex).findWrapping(wrap.type,wrap.attrs);if(!around)return null;var outer=around.length?around[0]:wrap;if(!parent.canReplaceWith(startIndex,endIndex,outer.type,outer.attrs))return null;return around}function findWrappingInside(range,wrap){var parent=range.parent;var startIndex=range.startIndex;var endIndex=range.endIndex;var inner=parent.child(startIndex);var inside=wrap.type.contentExpr.start(wrap.attrs).findWrapping(inner.type,inner.attrs);if(!inside)return null;var last=inside.length?inside[inside.length-1]:wrap;var innerMatch=last.type.contentExpr.start(last.attrs);for(var i=startIndex;i<endIndex;i++){innerMatch=innerMatch&&innerMatch.matchNode(parent.child(i))}if(!innerMatch||!innerMatch.validEnd())return null;return inside}Transform.prototype.wrap=function(range,wrappers){var content=Fragment.empty;for(var i=wrappers.length-1;i>=0;i--){content=Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content))}var start=range.start,end=range.end;return this.step(new ReplaceAroundStep(start,end,start,end,new Slice(content,0,0),wrappers.length,true))};Transform.prototype.setBlockType=function(from){var to=arguments.length<=1||arguments[1]===undefined?from:arguments[1];var _this=this;var type=arguments[2];var attrs=arguments[3];if(!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var mapFrom=this.steps.length;this.doc.nodesBetween(from,to,function(node,pos){if(node.isTextblock&&!node.hasMarkup(type,attrs)){_this.clearMarkupFor(_this.map(pos,1,mapFrom),type,attrs);var startM=_this.map(pos,1,mapFrom),endM=_this.map(pos+node.nodeSize,1,mapFrom);_this.step(new ReplaceAroundStep(startM,endM,startM+1,endM-1,new Slice(Fragment.from(type.create(attrs)),0,0),1,true));return false}});return this};Transform.prototype.setNodeType=function(pos,type,attrs){var node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");if(!type)type=node.type;if(node.type.isLeaf)return this.replaceWith(pos,pos+node.nodeSize,type.create(attrs,null,node.marks));if(!type.validContent(node.content,attrs))throw new RangeError("Invalid content for node type "+type.name);return this.step(new ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new Slice(Fragment.from(type.create(attrs)),0,0),1,true))};function canSplit(doc,pos){var depth=arguments.length<=2||arguments[2]===undefined?1:arguments[2];var typeAfter=arguments[3];var attrsAfter=arguments[4];var $pos=doc.resolve(pos),base=$pos.depth-depth;if(base<0||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!$pos.parent.canReplace(0,$pos.indexAfter()))return false;for(var d=$pos.depth-1;d>base;d--){var node=$pos.node(d),_index=$pos.index(d);if(!node.canReplace(0,_index)||!node.canReplaceWith(_index,node.childCount,typeAfter||$pos.node(d+1).type,typeAfter?attrsAfter:$pos.node(d+1).attrs))return false;typeAfter=null}var index=$pos.indexAfter(base);return $pos.node(base).canReplaceWith(index,index,typeAfter||$pos.node(base+1).type,typeAfter?attrsAfter:$pos.node(base+1).attrs)}exports.canSplit=canSplit;Transform.prototype.split=function(pos){var depth=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var typeAfter=arguments[2];var attrsAfter=arguments[3];var $pos=this.doc.resolve(pos),before=Fragment.empty,after=Fragment.empty;for(var d=$pos.depth,e=$pos.depth-depth;d>e;d--){before=Fragment.from($pos.node(d).copy(before));after=Fragment.from(typeAfter?typeAfter.create(attrsAfter,after):$pos.node(d).copy(after));typeAfter=null}return this.step(new ReplaceStep(pos,pos,new Slice(before.append(after),depth,depth,true)))};function joinable(doc,pos){var $pos=doc.resolve(pos),index=$pos.index();return canJoin($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}exports.joinable=joinable;function canJoin(a,b){return a&&b&&!a.isLeaf&&a.canAppend(b)}function joinPoint(doc,pos){var dir=arguments.length<=2||arguments[2]===undefined?-1:arguments[2];var $pos=doc.resolve(pos);for(var d=$pos.depth;;d--){var before=void 0,after=void 0;if(d==$pos.depth){before=$pos.nodeBefore;after=$pos.nodeAfter}else if(dir>0){before=$pos.node(d+1);after=$pos.node(d).maybeChild($pos.index(d)+1)}else{before=$pos.node(d).maybeChild($pos.index(d)-1);after=$pos.node(d+1)}if(before&&!before.isTextblock&&canJoin(before,after))return pos;if(d==0)break;pos=dir<0?$pos.before(d):$pos.after(d)}}exports.joinPoint=joinPoint;Transform.prototype.join=function(pos){var depth=arguments.length<=1||arguments[1]===undefined?1:arguments[1];var silent=arguments.length<=2||arguments[2]===undefined?false:arguments[2];if(silent&&(pos<depth||pos+depth>this.doc.content.size))return this;var step=new ReplaceStep(pos-depth,pos+depth,Slice.empty,true);if(silent)this.maybeStep(step);else this.step(step);return this};function insertPoint(doc,pos,nodeType,attrs){var $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType,attrs))return pos;if($pos.parentOffset==0)for(var d=$pos.depth-1;d>=0;d--){var index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType,attrs))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(var _d2=$pos.depth-1;_d2>=0;_d2--){var _index2=$pos.indexAfter(_d2);if($pos.node(_d2).canReplaceWith(_index2,_index2,nodeType,attrs))return $pos.after(_d2+1);if(_index2<$pos.node(_d2).childCount)return null}}exports.insertPoint=insertPoint},{"../model":113,"./replace_step":126,"./transform":129}],129:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _require=require("../util/error");var ProseMirrorError=_require.ProseMirrorError;var _require2=require("./map");var mapThrough=_require2.mapThrough;var mapThroughResult=_require2.mapThroughResult;var TransformError=function(_ProseMirrorError){_inherits(TransformError,_ProseMirrorError);function TransformError(){_classCallCheck(this,TransformError);return _possibleConstructorReturn(this,Object.getPrototypeOf(TransformError).apply(this,arguments))}return TransformError}(ProseMirrorError);exports.TransformError=TransformError;var Transform=function(){function Transform(doc){_classCallCheck(this,Transform);this.doc=doc;this.steps=[];this.docs=[];this.maps=[]}_createClass(Transform,[{key:"step",value:function step(_step){var result=this.maybeStep(_step);if(result.failed)throw new TransformError(result.failed);return this}},{key:"maybeStep",value:function maybeStep(step){var result=step.apply(this.doc);if(!result.failed){this.docs.push(this.doc);this.steps.push(step);this.maps.push(step.posMap());this.doc=result.doc}return result}},{key:"mapResult",value:function mapResult(pos,bias,start){return mapThroughResult(this.maps,pos,bias,start)}},{key:"map",value:function map(pos,bias,start){return mapThrough(this.maps,pos,bias,start)}},{key:"before",get:function get(){return this.docs.length?this.docs[0]:this.doc}}]);return Transform}();exports.Transform=Transform},{"../util/error":136,"./map":122}],130:[function(require,module,exports){"use strict";var _require=require("../util/obj");var copyObj=_require.copyObj;copyObj(require("./prompt"),exports);exports.Tooltip=require("./tooltip").Tooltip},{"../util/obj":138,"./prompt":131,"./tooltip":132}],131:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../util/dom");var elt=_require.elt;var insertCSS=_require.insertCSS;var FieldPrompt=function(){function FieldPrompt(pm,title,fields){var _this=this;_classCallCheck(this,FieldPrompt);this.pm=pm;this.title=title;this.fields=fields;this.doClose=null;this.domFields=[];for(var name in fields){this.domFields.push(fields[name].render(pm))}var promptTitle=elt("h5",{},pm.translate(title));var submitButton=elt("button",{type:"submit","class":"ProseMirror-prompt-submit"},"Ok");var cancelButton=elt("button",{type:"button","class":"ProseMirror-prompt-cancel"},"Cancel");cancelButton.addEventListener("click",function(){return _this.close()});this.form=elt("form",null,promptTitle,this.domFields.map(function(f){return elt("div",null,f)}),elt("div",{"class":"ProseMirror-prompt-buttons"},submitButton," ",cancelButton))}_createClass(FieldPrompt,[{key:"close",value:function close(){if(this.doClose){this.doClose();this.doClose=null}}},{key:"open",value:function open(callback){var _this2=this;this.close();var prompt=this.prompt();var hadFocus=this.pm.hasFocus();this.doClose=function(){prompt.close();if(hadFocus)setTimeout(function(){return _this2.pm.focus()},50)};var submit=function submit(){var params=_this2.values();if(params){_this2.close();callback(params)}};this.form.addEventListener("submit",function(e){e.preventDefault();submit()});this.form.addEventListener("keydown",function(e){if(e.keyCode==27){e.preventDefault();prompt.close()}else if(e.keyCode==13&&!(e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();submit()}});var input=this.form.elements[0];if(input)input.focus()}},{key:"values",value:function values(){var result=Object.create(null),i=0;for(var name in this.fields){var field=this.fields[name],dom=this.domFields[i++];var value=field.read(dom),bad=field.validate(value);if(bad){this.reportInvalid(dom,this.pm.translate(bad));return null}result[name]=field.clean(value)}return result}},{key:"prompt",value:function prompt(){var _this3=this;return openPrompt(this.pm,this.form,{onClose:function onClose(){return _this3.close()}})}},{key:"reportInvalid",value:function reportInvalid(dom,message){var parent=dom.parentNode;var style="left: "+(dom.offsetLeft+dom.offsetWidth+2)+"px; top: "+(dom.offsetTop-5)+"px";var msg=parent.appendChild(elt("div",{"class":"ProseMirror-invalid",style:style},message));setTimeout(function(){return parent.removeChild(msg)},1500)}}]);return FieldPrompt}();exports.FieldPrompt=FieldPrompt;var Field=function(){function Field(options){_classCallCheck(this,Field);this.options=options}_createClass(Field,[{key:"read",value:function read(dom){return dom.value}},{key:"validateType",value:function validateType(_value){}},{key:"validate",value:function validate(value){if(!value&&this.options.required)return"Required field";return this.validateType(value)||this.options.validate&&this.options.validate(value)}},{key:"clean",value:function clean(value){return this.options.clean?this.options.clean(value):value}}]);return Field}();exports.Field=Field;var TextField=function(_Field){_inherits(TextField,_Field);function TextField(){_classCallCheck(this,TextField);return _possibleConstructorReturn(this,Object.getPrototypeOf(TextField).apply(this,arguments))}_createClass(TextField,[{key:"render",value:function render(pm){return elt("input",{type:"text",placeholder:pm.translate(this.options.label),value:this.options.value||"",autocomplete:"off"})}}]);return TextField}(Field);exports.TextField=TextField;var SelectField=function(_Field2){_inherits(SelectField,_Field2);function SelectField(){_classCallCheck(this,SelectField);return _possibleConstructorReturn(this,Object.getPrototypeOf(SelectField).apply(this,arguments))}_createClass(SelectField,[{key:"render",value:function render(pm){var opts=this.options;var options=opts.options.call?opts.options(pm):opts.options;return elt("select",null,options.map(function(o){return elt("option",{value:o.value,selected:o.value==opts.value?"true":null},pm.translate(o.label))}))}}]);return SelectField}(Field);exports.SelectField=SelectField;function openPrompt(pm,content,options){var button=elt("button",{"class":"ProseMirror-prompt-close"});var wrapper=elt("div",{"class":"ProseMirror-prompt"},content,button);var outerBox=pm.wrapper.getBoundingClientRect();pm.wrapper.appendChild(wrapper);if(options&&options.pos){wrapper.style.left=options.pos.left-outerBox.left+"px";wrapper.style.top=options.pos.top-outerBox.top+"px"}else{var blockBox=wrapper.getBoundingClientRect();var cX=Math.max(0,outerBox.left)+Math.min(window.innerWidth,outerBox.right)-blockBox.width;var cY=Math.max(0,outerBox.top)+Math.min(window.innerHeight,outerBox.bottom)-blockBox.height;wrapper.style.left=cX/2-outerBox.left+"px";wrapper.style.top=cY/2-outerBox.top+"px"}var close=function close(){pm.on.interaction.remove(close);if(wrapper.parentNode){wrapper.parentNode.removeChild(wrapper);if(options&&options.onClose)options.onClose()}};button.addEventListener("click",close);pm.on.interaction.add(close);return{close:close}}exports.openPrompt=openPrompt;insertCSS('\n.ProseMirror-prompt {\n  background: white;\n  padding: 2px 6px 2px 15px;\n  border: 1px solid silver;\n  position: absolute;\n  border-radius: 3px;\n  z-index: 11;\n}\n\n.ProseMirror-prompt h5 {\n  margin: 0;\n  font-weight: normal;\n  font-size: 100%;\n  color: #444;\n}\n\n.ProseMirror-prompt input[type="text"],\n.ProseMirror-prompt textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n.ProseMirror-prompt input[type="text"] {\n  padding: 0 4px;\n}\n\n.ProseMirror-prompt-close {\n  position: absolute;\n  left: 2px; top: 1px;\n  color: #666;\n  border: none; background: transparent; padding: 0;\n}\n\n.ProseMirror-prompt-close:after {\n  content: "";\n  font-size: 12px;\n}\n\n.ProseMirror-invalid {\n  background: #ffc;\n  border: 1px solid #cc7;\n  border-radius: 4px;\n  padding: 5px 10px;\n  position: absolute;\n  min-width: 10em;\n}\n\n.ProseMirror-prompt-buttons {\n  margin-top: 5px;\n  display: none;\n}\n\n')},{"../util/dom":135}],132:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var _require=require("../util/dom");var elt=_require.elt;var insertCSS=_require.insertCSS;var prefix="ProseMirror-tooltip";var Tooltip=function(){function Tooltip(wrapper,options){var _this=this;_classCallCheck(this,Tooltip);this.wrapper=wrapper;this.options=typeof options=="string"?{direction:options}:options;this.dir=this.options.direction||"above";this.pointer=wrapper.appendChild(elt("div",{"class":prefix+"-pointer-"+this.dir+" "+prefix+"-pointer"}));this.pointerWidth=this.pointerHeight=null;this.dom=wrapper.appendChild(elt("div",{"class":prefix}));this.dom.addEventListener("transitionend",function(){if(_this.dom.style.opacity=="0")_this.dom.style.display=_this.pointer.style.display=""});this.isOpen=false;this.lastLeft=this.lastTop=null}_createClass(Tooltip,[{key:"detach",value:function detach(){this.dom.parentNode.removeChild(this.dom);this.pointer.parentNode.removeChild(this.pointer)}},{key:"getSize",value:function getSize(node){var wrap=this.wrapper.appendChild(elt("div",{"class":prefix,style:"display: block; position: absolute"},node));var size={width:wrap.offsetWidth+1,height:wrap.offsetHeight};wrap.parentNode.removeChild(wrap);return size}},{key:"open",value:function open(node,pos){var left=this.lastLeft=pos?pos.left:this.lastLeft;var top=this.lastTop=pos?pos.top:this.lastTop;var size=this.getSize(node);var around=this.wrapper.getBoundingClientRect();var boundingRect=(this.options.getBoundingRect||windowRect)();for(var child=this.dom.firstChild,next;child;child=next){next=child.nextSibling;if(child!=this.pointer)this.dom.removeChild(child)}this.dom.appendChild(node);this.dom.style.display=this.pointer.style.display="block";if(this.pointerWidth==null){this.pointerWidth=this.pointer.offsetWidth-1;this.pointerHeight=this.pointer.offsetHeight-1}this.dom.style.width=size.width+"px";this.dom.style.height=size.height+"px";var margin=5;if(this.dir=="above"||this.dir=="below"){var tipLeft=Math.max(boundingRect.left,Math.min(left-size.width/2,boundingRect.right-size.width));this.dom.style.left=tipLeft-around.left+"px";this.pointer.style.left=left-around.left-this.pointerWidth/2+"px";if(this.dir=="above"){var tipTop=top-around.top-margin-this.pointerHeight-size.height;this.dom.style.top=tipTop+"px";this.pointer.style.top=tipTop+size.height+"px"}else{var _tipTop=top-around.top+margin;this.pointer.style.top=_tipTop+"px";this.dom.style.top=_tipTop+this.pointerHeight+"px"}}else if(this.dir=="left"||this.dir=="right"){this.dom.style.top=top-around.top-size.height/2+"px";this.pointer.style.top=top-this.pointerHeight/2-around.top+"px";if(this.dir=="left"){var pointerLeft=left-around.left-margin-this.pointerWidth;this.dom.style.left=pointerLeft-size.width+"px";this.pointer.style.left=pointerLeft+"px"}else{var _pointerLeft=left-around.left+margin;this.dom.style.left=_pointerLeft+this.pointerWidth+"px";this.pointer.style.left=_pointerLeft+"px"}}else if(this.dir=="center"){var _top=Math.max(around.top,boundingRect.top),bottom=Math.min(around.bottom,boundingRect.bottom);var fromTop=(bottom-_top-size.height)/2;this.dom.style.left=(around.width-size.width)/2+"px";this.dom.style.top=_top-around.top+fromTop+"px"}getComputedStyle(this.dom).opacity;getComputedStyle(this.pointer).opacity;this.dom.style.opacity=this.pointer.style.opacity=1;this.isOpen=true}},{key:"close",value:function close(){if(this.isOpen){this.isOpen=false;this.dom.style.opacity=this.pointer.style.opacity=0}}}]);return Tooltip}();exports.Tooltip=Tooltip;function windowRect(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}insertCSS("\n\n."+prefix+" {\n  position: absolute;\n  display: none;\n  box-sizing: border-box;\n  -moz-box-sizing: border- box;\n  overflow: hidden;\n\n  -webkit-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: width 0.4s ease-out, height 0.4s ease-out, left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  border-radius: 5px;\n  padding: 3px 7px;\n  margin: 0;\n  background: white;\n  border: 1px solid #777;\n  color: #555;\n\n  z-index: 11;\n}\n\n."+prefix+"-pointer {\n  position: absolute;\n  display: none;\n  width: 0; height: 0;\n\n  -webkit-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  -moz-transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  transition: left 0.4s ease-out, top 0.4s ease-out, opacity 0.2s;\n  opacity: 0;\n\n  z-index: 12;\n}\n\n."+prefix+'-pointer:after {\n  content: "";\n  position: absolute;\n  display: block;\n}\n\n.'+prefix+"-pointer-above {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid #777;\n}\n\n."+prefix+"-pointer-above:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-top: 6px solid white;\n  left: -6px; top: -7px;\n}\n\n."+prefix+"-pointer-below {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid #777;\n}\n\n."+prefix+"-pointer-below:after {\n  border-left: 6px solid transparent;\n  border-right: 6px solid transparent;\n  border-bottom: 6px solid white;\n  left: -6px; top: 1px;\n}\n\n."+prefix+"-pointer-right {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid #777;\n}\n\n."+prefix+"-pointer-right:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-right: 6px solid white;\n  left: 1px; top: -6px;\n}\n\n."+prefix+"-pointer-left {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid #777;\n}\n\n."+prefix+"-pointer-left:after {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  border-left: 6px solid white;\n  left: -7px; top: -6px;\n}\n\n."+prefix+' input[type="text"],\n.'+prefix+" textarea {\n  background: #eee;\n  border: none;\n  outline: none;\n}\n\n."+prefix+' input[type="text"] {\n  padding: 0 4px;\n}\n\n')},{"../util/dom":135}],133:[function(require,module,exports){"use strict";var ie_upto10=/MSIE \d/.test(navigator.userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);module.exports={mac:/Mac/.test(navigator.platform),ie:ie_upto10||!!ie_11up,ie_version:ie_upto10?document.documentMode||6:ie_11up&&+ie_11up[1],gecko:/gecko\/\d/i.test(navigator.userAgent),ios:/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)}},{}],134:[function(require,module,exports){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};function compareDeep(a,b){if(a===b)return true;if(!(a&&(typeof a==="undefined"?"undefined":_typeof(a))=="object")||!(b&&(typeof b==="undefined"?"undefined":_typeof(b))=="object"))return false;var array=Array.isArray(a);if(Array.isArray(b)!=array)return false;if(array){if(a.length!=b.length)return false;for(var i=0;i<a.length;i++){if(!compareDeep(a[i],b[i]))return false}}else{for(var p in a){if(!(p in b)||!compareDeep(a[p],b[p]))return false}for(var _p in b){if(!(_p in a))return false}}return true}exports.compareDeep=compareDeep},{}],135:[function(require,module,exports){"use strict";function elt(tag,attrs){var result=document.createElement(tag);if(attrs)for(var name in attrs){if(name=="style")result.style.cssText=attrs[name];else if(attrs[name]!=null)result.setAttribute(name,attrs[name])}for(var _len=arguments.length,args=Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){args[_key-2]=arguments[_key]}for(var i=0;i<args.length;i++){add(args[i],result)}return result}exports.elt=elt;function add(value,target){if(typeof value=="string")value=document.createTextNode(value);if(Array.isArray(value)){for(var i=0;i<value.length;i++){add(value[i],target)}}else{target.appendChild(value)}}var reqFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var cancelFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame;function requestAnimationFrame(f){if(reqFrame)return reqFrame.call(window,f);else return setTimeout(f,10)}exports.requestAnimationFrame=requestAnimationFrame;function cancelAnimationFrame(handle){if(reqFrame)return cancelFrame.call(window,handle);else clearTimeout(handle)}exports.cancelAnimationFrame=cancelAnimationFrame;function contains(parent,child){if(child.nodeType!=1)child=child.parentNode;return child&&parent.contains(child)}exports.contains=contains;var accumulatedCSS="",cssNode=null;function insertCSS(css){if(cssNode)cssNode.textContent+=css;else accumulatedCSS+=css}exports.insertCSS=insertCSS;function ensureCSSAdded(){if(!cssNode){cssNode=document.createElement("style");cssNode.textContent="/* ProseMirror CSS */\n"+accumulatedCSS;document.head.insertBefore(cssNode,document.head.firstChild)}}exports.ensureCSSAdded=ensureCSSAdded},{}],136:[function(require,module,exports){"use strict";function ProseMirrorError(message){Error.call(this,message);if(this.message!=message){this.message=message;if(Error.captureStackTrace)Error.captureStackTrace(this,this.name);else this.stack=new Error(message).stack}}exports.ProseMirrorError=ProseMirrorError;ProseMirrorError.prototype=Object.create(Error.prototype);ProseMirrorError.prototype.constructor=ProseMirrorError;Object.defineProperty(ProseMirrorError.prototype,"name",{get:function get(){return this.constructor.name||functionName(this.constructor)||"ProseMirrorError"}});function functionName(f){var match=/^function (\w+)/.exec(f.toString());return match&&match[1]}},{}],137:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Map=window.Map||function(){function _class(){_classCallCheck(this,_class);this.content=[]}_createClass(_class,[{key:"set",value:function set(key,value){var found=this.find(key);if(found>-1)this.content[found+1]=value;else this.content.push(key,value)}},{key:"get",value:function get(key){var found=this.find(key);return found==-1?undefined:this.content[found+1]}},{key:"has",value:function has(key){return this.find(key)>-1}},{key:"find",value:function find(key){for(var i=0;i<this.content.length;i+=2){if(this.content[i]===key)return i}}},{key:"clear",value:function clear(){this.content.length=0}},{key:"size",get:function get(){return this.content.length/2}}]);return _class}();exports.Map=Map},{}],138:[function(require,module,exports){"use strict";function copyObj(obj,base){var copy=base||Object.create(null);for(var prop in obj){copy[prop]=obj[prop]}return copy}exports.copyObj=copyObj},{}],139:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var OrderedMap=function(){function OrderedMap(content){_classCallCheck(this,OrderedMap);this.content=content}_createClass(OrderedMap,[{key:"find",value:function find(key){for(var i=0;i<this.content.length;i+=2){if(this.content[i]==key)return i}return-1}},{key:"get",value:function get(key){var found=this.find(key);return found==-1?undefined:this.content[found+1]}},{key:"update",value:function update(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this;var found=self.find(key),content=self.content.slice();if(found==-1){content.push(newKey||key,value)}else{content[found+1]=value;if(newKey)content[found]=newKey}return new OrderedMap(content)}},{key:"remove",value:function remove(key){var found=this.find(key);if(found==-1)return this;var content=this.content.slice();content.splice(found,2);return new OrderedMap(content)}},{key:"addToStart",value:function addToStart(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))}},{key:"addToEnd",value:function addToEnd(key,value){var content=this.remove(key).content.slice();content.push(key,value);return new OrderedMap(content)}},{key:"addBefore",value:function addBefore(place,key,value){var without=this.remove(key),content=without.content.slice();var found=without.find(place);content.splice(found==-1?content.length:found,0,key,value);return new OrderedMap(content)}},{key:"forEach",value:function forEach(f){for(var i=0;i<this.content.length;i+=2){f(this.content[i],this.content[i+1])}}},{key:"prepend",value:function prepend(map){
map=OrderedMap.from(map);if(!map.size)return this;return new OrderedMap(map.content.concat(this.subtract(map).content))}},{key:"append",value:function append(map){map=OrderedMap.from(map);if(!map.size)return this;return new OrderedMap(this.subtract(map).content.concat(map.content))}},{key:"subtract",value:function subtract(map){var result=this;OrderedMap.from(map).forEach(function(key){return result=result.remove(key)});return result}},{key:"size",get:function get(){return this.content.length>>1}}],[{key:"from",value:function from(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value){content.push(prop,value[prop])}return new OrderedMap(content)}}]);return OrderedMap}();exports.OrderedMap=OrderedMap},{}],140:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],141:[function(require,module,exports){function Handler(f,once,priority){this.f=f;this.once=once;this.priority=priority}function Subscription(){this.handlers=[]}exports.Subscription=Subscription;function insert(s,handler){var pos=0;for(;pos<s.handlers.length;pos++)if(s.handlers[pos].priority<handler.priority)break;s.handlers=s.handlers.slice(0,pos).concat(handler).concat(s.handlers.slice(pos))}Subscription.prototype.handlersForDispatch=function(){var handlers=this.handlers,updated=null;for(var i=handlers.length-1;i>=0;i--)if(handlers[i].once){if(!updated)updated=handlers.slice();updated.splice(i,1)}if(updated)this.handlers=updated;return handlers};Subscription.prototype.add=function(f,priority){insert(this,new Handler(f,false,priority||0))};Subscription.prototype.addOnce=function(f,priority){insert(this,new Handler(f,true,priority||0))};Subscription.prototype.remove=function(f){for(var i=0;i<this.handlers.length;i++)if(this.handlers[i].f==f){this.handlers=this.handlers.slice(0,i).concat(this.handlers.slice(i+1));return}};Subscription.prototype.hasHandler=function(){return this.handlers.length>0};Subscription.prototype.dispatch=function(){var handlers=this.handlersForDispatch();for(var i=0;i<handlers.length;i++)handlers[i].f.apply(null,arguments)};function PipelineSubscription(){Subscription.call(this)}exports.PipelineSubscription=PipelineSubscription;PipelineSubscription.prototype=new Subscription;PipelineSubscription.prototype.dispatch=function(value){var handlers=this.handlersForDispatch();for(var i=0;i<handlers.length;i++)value=handlers[i].f(value);return value};function StoppableSubscription(){Subscription.call(this)}exports.StoppableSubscription=StoppableSubscription;StoppableSubscription.prototype=new Subscription;StoppableSubscription.prototype.dispatch=function(){var handlers=this.handlersForDispatch();for(var i=0;i<handlers.length;i++){var result=handlers[i].f.apply(null,arguments);if(result)return result}};function DOMSubscription(){Subscription.call(this)}exports.DOMSubscription=DOMSubscription;DOMSubscription.prototype=new Subscription;DOMSubscription.prototype.dispatch=function(event){var handlers=this.handlersForDispatch();for(var i=0;i<handlers.length;i++)if(handlers[i].f(event)||event.defaultPrevented)return true;return false}},{}],142:[function(require,module,exports){module.exports=/[\0-\x1F\x7F-\x9F]/},{}],143:[function(require,module,exports){module.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804\uDCBD|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},{}],144:[function(require,module,exports){module.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E44\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD807[\uDC41-\uDC45\uDC70\uDC71]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},{}],145:[function(require,module,exports){module.exports=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/},{}],146:[function(require,module,exports){"use strict";exports.Any=require("./properties/Any/regex");exports.Cc=require("./categories/Cc/regex");exports.Cf=require("./categories/Cf/regex");exports.P=require("./categories/P/regex");exports.Z=require("./categories/Z/regex")},{"./categories/Cc/regex":142,"./categories/Cf/regex":143,"./categories/P/regex":144,"./categories/Z/regex":145,"./properties/Any/regex":147}],147:[function(require,module,exports){module.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},{}]},{},[2,3,4,5]);